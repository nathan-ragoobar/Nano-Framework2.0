cmake_minimum_required(VERSION 3.16)

#Define the NanoDash library
add_library(NanoDash TrainingVisualizer.cpp TrainingVisualizer.hpp)

# Find and include Qt6 components
find_package(Qt6 QUIET COMPONENTS Core Widgets Charts)

if (NOT Qt6_FOUND)
    if (UNIX)
        message(STATUS "Qt6 not found. Installing using apt...")
        execute_process(COMMAND sudo apt-get install -y qt6-base-dev qt6-charts-dev)
    else()
        message(FATAL_ERROR "Qt6 not found, and automatic installation is not supported on this system.")
    endif()
else()
    find_package(Qt6 REQUIRED COMPONENTS Core Widgets Charts)
endif()

find_package(Qt6 REQUIRED COMPONENTS Core Widgets Charts)
# Set CMake prefix path to include Qt6 installation directories
set(CMAKE_PREFIX_PATH "/usr/lib/x86_64-linux-gnu/cmake/Qt6Core;/usr/lib/x86_64-linux-gnu/cmake/Qt6Widgets;/usr/lib/x86_64-linux-gnu/cmake/Qt6Charts")


# Link Qt libraries to your executable

target_link_libraries(NanoDash PRIVATE Qt6::Core Qt6::Widgets Qt6::Charts)

# Include directories
target_include_directories(NanoDash PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})