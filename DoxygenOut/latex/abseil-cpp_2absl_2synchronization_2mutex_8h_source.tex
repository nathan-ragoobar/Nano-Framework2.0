\doxysection{mutex.\+h}
\hypertarget{abseil-cpp_2absl_2synchronization_2mutex_8h_source}{}\label{abseil-cpp_2absl_2synchronization_2mutex_8h_source}\index{abseil-\/cpp/absl/synchronization/mutex.h@{abseil-\/cpp/absl/synchronization/mutex.h}}
\mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ 2017\ The\ Abseil\ Authors.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ \ \ \ \ \ https://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00014\ \textcolor{comment}{//}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ mutex.h}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00018\ \textcolor{comment}{//}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ This\ header\ file\ defines\ a\ \`{}Mutex`\ -\/-\/\ a\ mutually\ exclusive\ lock\ -\/-\/\ and\ the}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ most\ common\ type\ of\ synchronization\ primitive\ for\ facilitating\ locks\ on}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\ shared\ resources.\ A\ mutex\ is\ used\ to\ prevent\ multiple\ threads\ from\ accessing}}
\DoxyCodeLine{00022\ \textcolor{comment}{//\ and/or\ writing\ to\ a\ shared\ resource\ concurrently.}}
\DoxyCodeLine{00023\ \textcolor{comment}{//}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ Unlike\ a\ \`{}std::mutex`,\ the\ Abseil\ \`{}Mutex`\ provides\ the\ following\ additional}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ features:}}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ \ \ *\ Conditional\ predicates\ intrinsic\ to\ the\ \`{}Mutex`\ object}}
\DoxyCodeLine{00027\ \textcolor{comment}{//\ \ \ *\ Shared/reader\ locks,\ in\ addition\ to\ standard\ exclusive/writer\ locks}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ \ \ *\ Deadlock\ detection\ and\ debug\ support.}}
\DoxyCodeLine{00029\ \textcolor{comment}{//}}
\DoxyCodeLine{00030\ \textcolor{comment}{//\ The\ following\ helper\ classes\ are\ also\ defined\ within\ this\ file:}}
\DoxyCodeLine{00031\ \textcolor{comment}{//}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ \ MutexLock\ -\/\ An\ RAII\ wrapper\ to\ acquire\ and\ release\ a\ \`{}Mutex`\ for\ exclusive/}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ write\ access\ within\ the\ current\ scope.}}
\DoxyCodeLine{00034\ \textcolor{comment}{//}}
\DoxyCodeLine{00035\ \textcolor{comment}{//\ \ ReaderMutexLock}}
\DoxyCodeLine{00036\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ -\/\ An\ RAII\ wrapper\ to\ acquire\ and\ release\ a\ \`{}Mutex`\ for\ shared/read}}
\DoxyCodeLine{00037\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ access\ within\ the\ current\ scope.}}
\DoxyCodeLine{00038\ \textcolor{comment}{//}}
\DoxyCodeLine{00039\ \textcolor{comment}{//\ \ WriterMutexLock}}
\DoxyCodeLine{00040\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ -\/\ Effectively\ an\ alias\ for\ \`{}MutexLock`\ above,\ designed\ for\ use\ in}}
\DoxyCodeLine{00041\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ distinguishing\ reader\ and\ writer\ locks\ within\ code.}}
\DoxyCodeLine{00042\ \textcolor{comment}{//}}
\DoxyCodeLine{00043\ \textcolor{comment}{//\ In\ addition\ to\ simple\ mutex\ locks,\ this\ file\ also\ defines\ ways\ to\ perform}}
\DoxyCodeLine{00044\ \textcolor{comment}{//\ locking\ under\ certain\ conditions.}}
\DoxyCodeLine{00045\ \textcolor{comment}{//}}
\DoxyCodeLine{00046\ \textcolor{comment}{//\ \ Condition\ -\/\ (Preferred)\ Used\ to\ wait\ for\ a\ particular\ predicate\ that}}
\DoxyCodeLine{00047\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ depends\ on\ state\ protected\ by\ the\ \`{}Mutex`\ to\ become\ true.}}
\DoxyCodeLine{00048\ \textcolor{comment}{//\ \ CondVar\ \ \ -\/\ A\ lower-\/level\ variant\ of\ \`{}Condition`\ that\ relies\ on}}
\DoxyCodeLine{00049\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ application\ code\ to\ explicitly\ signal\ the\ \`{}CondVar`\ when}}
\DoxyCodeLine{00050\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ condition\ has\ been\ met.}}
\DoxyCodeLine{00051\ \textcolor{comment}{//}}
\DoxyCodeLine{00052\ \textcolor{comment}{//\ See\ below\ for\ more\ information\ on\ using\ \`{}Condition`\ or\ \`{}CondVar`.}}
\DoxyCodeLine{00053\ \textcolor{comment}{//}}
\DoxyCodeLine{00054\ \textcolor{comment}{//\ Mutexes\ and\ mutex\ behavior\ can\ be\ quite\ complicated.\ The\ information\ within}}
\DoxyCodeLine{00055\ \textcolor{comment}{//\ this\ header\ file\ is\ limited,\ as\ a\ result.\ Please\ consult\ the\ Mutex\ guide\ for}}
\DoxyCodeLine{00056\ \textcolor{comment}{//\ more\ complete\ information\ and\ examples.}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#ifndef\ ABSL\_SYNCHRONIZATION\_MUTEX\_H\_}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#define\ ABSL\_SYNCHRONIZATION\_MUTEX\_H\_}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#include\ <iterator>}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#include\ "{}absl/base/attributes.h"{}}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#include\ "{}absl/base/const\_init.h"{}}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\#include\ "{}absl/base/internal/identity.h"{}}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#include\ "{}absl/base/internal/low\_level\_alloc.h"{}}}
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#include\ "{}absl/base/internal/thread\_identity.h"{}}}
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#include\ "{}absl/base/internal/tsan\_mutex\_interface.h"{}}}
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\#include\ "{}absl/base/port.h"{}}}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#include\ "{}absl/base/thread\_annotations.h"{}}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#include\ "{}absl/synchronization/internal/kernel\_timeout.h"{}}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#include\ "{}absl/synchronization/internal/per\_thread\_sem.h"{}}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#include\ "{}absl/time/time.h"{}}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceabsl}{absl}}\ \{}
\DoxyCodeLine{00080\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_a1426209ed359f780778edc8975b23f07}{ABSL\_NAMESPACE\_BEGIN}}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \textcolor{keyword}{class\ }Condition;}
\DoxyCodeLine{00083\ \textcolor{keyword}{struct\ }SynchWaitParams;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00086\ \textcolor{comment}{//\ Mutex}}
\DoxyCodeLine{00087\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00088\ \textcolor{comment}{//}}
\DoxyCodeLine{00089\ \textcolor{comment}{//\ A\ \`{}Mutex`\ is\ a\ non-\/reentrant\ (aka\ non-\/recursive)\ Mutually\ Exclusive\ lock}}
\DoxyCodeLine{00090\ \textcolor{comment}{//\ on\ some\ resource,\ typically\ a\ variable\ or\ data\ structure\ with\ associated}}
\DoxyCodeLine{00091\ \textcolor{comment}{//\ invariants.\ Proper\ usage\ of\ mutexes\ prevents\ concurrent\ access\ by\ different}}
\DoxyCodeLine{00092\ \textcolor{comment}{//\ threads\ to\ the\ same\ resource.}}
\DoxyCodeLine{00093\ \textcolor{comment}{//}}
\DoxyCodeLine{00094\ \textcolor{comment}{//\ A\ \`{}Mutex`\ has\ two\ basic\ operations:\ \`{}Mutex::Lock()`\ and\ \`{}Mutex::Unlock()`.}}
\DoxyCodeLine{00095\ \textcolor{comment}{//\ The\ \`{}Lock()`\ operation\ *acquires*\ a\ \`{}Mutex`\ (in\ a\ state\ known\ as\ an}}
\DoxyCodeLine{00096\ \textcolor{comment}{//\ *exclusive*\ -\/-\/\ or\ *write*\ -\/-\/\ lock),\ and\ the\ \`{}Unlock()`\ operation\ *releases*\ a}}
\DoxyCodeLine{00097\ \textcolor{comment}{//\ Mutex.\ During\ the\ span\ of\ time\ between\ the\ Lock()\ and\ Unlock()\ operations,}}
\DoxyCodeLine{00098\ \textcolor{comment}{//\ a\ mutex\ is\ said\ to\ be\ *held*.\ By\ design,\ all\ mutexes\ support\ exclusive/write}}
\DoxyCodeLine{00099\ \textcolor{comment}{//\ locks,\ as\ this\ is\ the\ most\ common\ way\ to\ use\ a\ mutex.}}
\DoxyCodeLine{00100\ \textcolor{comment}{//}}
\DoxyCodeLine{00101\ \textcolor{comment}{//\ Mutex\ operations\ are\ only\ allowed\ under\ certain\ conditions;\ otherwise\ an}}
\DoxyCodeLine{00102\ \textcolor{comment}{//\ operation\ is\ "{}invalid"{},\ and\ disallowed\ by\ the\ API.\ The\ conditions\ concern}}
\DoxyCodeLine{00103\ \textcolor{comment}{//\ both\ the\ current\ state\ of\ the\ mutex\ and\ the\ identity\ of\ the\ threads\ that}}
\DoxyCodeLine{00104\ \textcolor{comment}{//\ are\ performing\ the\ operations.}}
\DoxyCodeLine{00105\ \textcolor{comment}{//}}
\DoxyCodeLine{00106\ \textcolor{comment}{//\ The\ \`{}Mutex`\ state\ machine\ for\ basic\ lock/unlock\ operations\ is\ quite\ simple:}}
\DoxyCodeLine{00107\ \textcolor{comment}{//}}
\DoxyCodeLine{00108\ \textcolor{comment}{//\ |\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ Lock()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ Unlock()\ |}}
\DoxyCodeLine{00109\ \textcolor{comment}{//\ |-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}}
\DoxyCodeLine{00110\ \textcolor{comment}{//\ |\ Free\ \ \ \ \ \ \ \ \ \ \ |\ Exclusive\ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ invalid\ \ |}}
\DoxyCodeLine{00111\ \textcolor{comment}{//\ |\ Exclusive\ \ \ \ \ \ |\ blocks,\ then\ exclusive\ |\ Free\ \ \ \ \ |}}
\DoxyCodeLine{00112\ \textcolor{comment}{//}}
\DoxyCodeLine{00113\ \textcolor{comment}{//\ The\ full\ conditions\ are\ as\ follows.}}
\DoxyCodeLine{00114\ \textcolor{comment}{//}}
\DoxyCodeLine{00115\ \textcolor{comment}{//\ *\ Calls\ to\ \`{}Unlock()`\ require\ that\ the\ mutex\ be\ held,\ and\ must\ be\ made\ in\ the}}
\DoxyCodeLine{00116\ \textcolor{comment}{//\ \ \ same\ thread\ that\ performed\ the\ corresponding\ \`{}Lock()`\ operation\ which}}
\DoxyCodeLine{00117\ \textcolor{comment}{//\ \ \ acquired\ the\ mutex;\ otherwise\ the\ call\ is\ invalid.}}
\DoxyCodeLine{00118\ \textcolor{comment}{//}}
\DoxyCodeLine{00119\ \textcolor{comment}{//\ *\ The\ mutex\ being\ non-\/reentrant\ (or\ non-\/recursive)\ means\ that\ a\ call\ to}}
\DoxyCodeLine{00120\ \textcolor{comment}{//\ \ \ \`{}Lock()`\ or\ \`{}TryLock()`\ must\ not\ be\ made\ in\ a\ thread\ that\ already\ holds\ the}}
\DoxyCodeLine{00121\ \textcolor{comment}{//\ \ \ mutex;\ such\ a\ call\ is\ invalid.}}
\DoxyCodeLine{00122\ \textcolor{comment}{//}}
\DoxyCodeLine{00123\ \textcolor{comment}{//\ *\ In\ other\ words,\ the\ state\ of\ being\ "{}held"{}\ has\ both\ a\ temporal\ component}}
\DoxyCodeLine{00124\ \textcolor{comment}{//\ \ \ (from\ \`{}Lock()`\ until\ \`{}Unlock()`)\ as\ well\ as\ a\ thread\ identity\ component:}}
\DoxyCodeLine{00125\ \textcolor{comment}{//\ \ \ the\ mutex\ is\ held\ *by\ a\ particular\ thread*.}}
\DoxyCodeLine{00126\ \textcolor{comment}{//}}
\DoxyCodeLine{00127\ \textcolor{comment}{//\ An\ "{}invalid"{}\ operation\ has\ undefined\ behavior.\ The\ \`{}Mutex`\ implementation}}
\DoxyCodeLine{00128\ \textcolor{comment}{//\ is\ allowed\ to\ do\ anything\ on\ an\ invalid\ call,\ including,\ but\ not\ limited\ to,}}
\DoxyCodeLine{00129\ \textcolor{comment}{//\ crashing\ with\ a\ useful\ error\ message,\ silently\ succeeding,\ or\ corrupting}}
\DoxyCodeLine{00130\ \textcolor{comment}{//\ data\ structures.\ In\ debug\ mode,\ the\ implementation\ may\ crash\ with\ a\ useful}}
\DoxyCodeLine{00131\ \textcolor{comment}{//\ error\ message.}}
\DoxyCodeLine{00132\ \textcolor{comment}{//}}
\DoxyCodeLine{00133\ \textcolor{comment}{//\ \`{}Mutex`\ is\ not\ guaranteed\ to\ be\ "{}fair"{}\ in\ prioritizing\ waiting\ threads;\ it}}
\DoxyCodeLine{00134\ \textcolor{comment}{//\ is,\ however,\ approximately\ fair\ over\ long\ periods,\ and\ starvation-\/free\ for}}
\DoxyCodeLine{00135\ \textcolor{comment}{//\ threads\ at\ the\ same\ priority.}}
\DoxyCodeLine{00136\ \textcolor{comment}{//}}
\DoxyCodeLine{00137\ \textcolor{comment}{//\ The\ lock/unlock\ primitives\ are\ now\ annotated\ with\ lock\ annotations}}
\DoxyCodeLine{00138\ \textcolor{comment}{//\ defined\ in\ (base/thread\_annotations.h).\ When\ writing\ multi-\/threaded\ code,}}
\DoxyCodeLine{00139\ \textcolor{comment}{//\ you\ should\ use\ lock\ annotations\ whenever\ possible\ to\ document\ your\ lock}}
\DoxyCodeLine{00140\ \textcolor{comment}{//\ synchronization\ policy.\ Besides\ acting\ as\ documentation,\ these\ annotations}}
\DoxyCodeLine{00141\ \textcolor{comment}{//\ also\ help\ compilers\ or\ static\ analysis\ tools\ to\ identify\ and\ warn\ about}}
\DoxyCodeLine{00142\ \textcolor{comment}{//\ issues\ that\ could\ potentially\ result\ in\ race\ conditions\ and\ deadlocks.}}
\DoxyCodeLine{00143\ \textcolor{comment}{//}}
\DoxyCodeLine{00144\ \textcolor{comment}{//\ For\ more\ information\ about\ the\ lock\ annotations,\ please\ see}}
\DoxyCodeLine{00145\ \textcolor{comment}{//\ [Thread\ Safety}}
\DoxyCodeLine{00146\ \textcolor{comment}{//\ Analysis](http://clang.llvm.org/docs/ThreadSafetyAnalysis.html)\ in\ the\ Clang}}
\DoxyCodeLine{00147\ \textcolor{comment}{//\ documentation.}}
\DoxyCodeLine{00148\ \textcolor{comment}{//}}
\DoxyCodeLine{00149\ \textcolor{comment}{//\ See\ also\ \`{}MutexLock`,\ below,\ for\ scoped\ \`{}Mutex`\ acquisition.}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \textcolor{keyword}{class\ }\mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a474827525a05da25eeee625052e60f70}{ABSL\_LOCKABLE}}\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_abfa81c12e6bc7c07ec5002f0a690701f}{ABSL\_ATTRIBUTE\_WARN\_UNUSED}}\ Mutex\ \{}
\DoxyCodeLine{00152\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00153\ \ \ \textcolor{comment}{//\ Creates\ a\ \`{}Mutex`\ that\ is\ not\ held\ by\ anyone.\ This\ constructor\ is}}
\DoxyCodeLine{00154\ \ \ \textcolor{comment}{//\ typically\ used\ for\ Mutexes\ allocated\ on\ the\ heap\ or\ the\ stack.}}
\DoxyCodeLine{00155\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00156\ \ \ \textcolor{comment}{//\ To\ create\ \`{}Mutex`\ instances\ with\ static\ storage\ duration}}
\DoxyCodeLine{00157\ \ \ \textcolor{comment}{//\ (e.g.\ a\ namespace-\/scoped\ or\ global\ variable),\ see}}
\DoxyCodeLine{00158\ \ \ \textcolor{comment}{//\ \`{}Mutex::Mutex(absl::kConstInit)`\ below\ instead.}}
\DoxyCodeLine{00159\ \ \ Mutex();}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \textcolor{comment}{//\ Creates\ a\ mutex\ with\ static\ storage\ duration.\ \ A\ global\ variable}}
\DoxyCodeLine{00162\ \ \ \textcolor{comment}{//\ constructed\ this\ way\ avoids\ the\ lifetime\ issues\ that\ can\ occur\ on\ program}}
\DoxyCodeLine{00163\ \ \ \textcolor{comment}{//\ startup\ and\ shutdown.\ \ (See\ absl/base/const\_init.h.)}}
\DoxyCodeLine{00164\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00165\ \ \ \textcolor{comment}{//\ For\ Mutexes\ allocated\ on\ the\ heap\ and\ stack,\ instead\ use\ the\ default}}
\DoxyCodeLine{00166\ \ \ \textcolor{comment}{//\ constructor,\ which\ can\ interact\ more\ fully\ with\ the\ thread\ sanitizer.}}
\DoxyCodeLine{00167\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00168\ \ \ \textcolor{comment}{//\ Example\ usage:}}
\DoxyCodeLine{00169\ \ \ \textcolor{comment}{//\ \ \ namespace\ foo\ \{}}
\DoxyCodeLine{00170\ \ \ \textcolor{comment}{//\ \ \ ABSL\_CONST\_INIT\ absl::Mutex\ mu(absl::kConstInit);}}
\DoxyCodeLine{00171\ \ \ \textcolor{comment}{//\ \ \ \}}}
\DoxyCodeLine{00172\ \ \ \textcolor{keyword}{explicit}\ \textcolor{keyword}{constexpr}\ Mutex(\mbox{\hyperlink{namespaceabsl_aa7e9ebe5aa2498d9d5d26823c49d0bfc}{absl::ConstInitType}});}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \string~Mutex();}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \textcolor{comment}{//\ Mutex::Lock()}}
\DoxyCodeLine{00177\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00178\ \ \ \textcolor{comment}{//\ Blocks\ the\ calling\ thread,\ if\ necessary,\ until\ this\ \`{}Mutex`\ is\ free,\ and}}
\DoxyCodeLine{00179\ \ \ \textcolor{comment}{//\ then\ acquires\ it\ exclusively.\ (This\ lock\ is\ also\ known\ as\ a\ "{}write\ lock."{})}}
\DoxyCodeLine{00180\ \ \ \textcolor{keywordtype}{void}\ Lock()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}();}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \textcolor{comment}{//\ Mutex::Unlock()}}
\DoxyCodeLine{00183\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00184\ \ \ \textcolor{comment}{//\ Releases\ this\ \`{}Mutex`\ and\ returns\ it\ from\ the\ exclusive/write\ state\ to\ the}}
\DoxyCodeLine{00185\ \ \ \textcolor{comment}{//\ free\ state.\ Calling\ thread\ must\ hold\ the\ \`{}Mutex`\ exclusively.}}
\DoxyCodeLine{00186\ \ \ \textcolor{keywordtype}{void}\ Unlock()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}();}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \textcolor{comment}{//\ Mutex::TryLock()}}
\DoxyCodeLine{00189\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00190\ \ \ \textcolor{comment}{//\ If\ the\ mutex\ can\ be\ acquired\ without\ blocking,\ does\ so\ exclusively\ and}}
\DoxyCodeLine{00191\ \ \ \textcolor{comment}{//\ returns\ \`{}true`.\ Otherwise,\ returns\ \`{}false`.\ Returns\ \`{}true`\ with\ high}}
\DoxyCodeLine{00192\ \ \ \textcolor{comment}{//\ probability\ if\ the\ \`{}Mutex`\ was\ free.}}
\DoxyCodeLine{00193\ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_ad3388ffb9a4b2443a11d3ab2dee6ef4e}{ABSL\_MUST\_USE\_RESULT}}\ \textcolor{keywordtype}{bool}\ TryLock()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a3ee1068359639a2c82356da26ffaee9e}{ABSL\_EXCLUSIVE\_TRYLOCK\_FUNCTION}}(true);}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{comment}{//\ Mutex::AssertHeld()}}
\DoxyCodeLine{00196\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00197\ \ \ \textcolor{comment}{//\ Require\ that\ the\ mutex\ be\ held\ exclusively\ (write\ mode)\ by\ this\ thread.}}
\DoxyCodeLine{00198\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00199\ \ \ \textcolor{comment}{//\ If\ the\ mutex\ is\ not\ currently\ held\ by\ this\ thread,\ this\ function\ may\ report}}
\DoxyCodeLine{00200\ \ \ \textcolor{comment}{//\ an\ error\ (typically\ by\ crashing\ with\ a\ diagnostic)\ or\ it\ may\ do\ nothing.}}
\DoxyCodeLine{00201\ \ \ \textcolor{comment}{//\ This\ function\ is\ intended\ only\ as\ a\ tool\ to\ assist\ debugging;\ it\ doesn't}}
\DoxyCodeLine{00202\ \ \ \textcolor{comment}{//\ guarantee\ correctness.}}
\DoxyCodeLine{00203\ \ \ \textcolor{keywordtype}{void}\ AssertHeld()\ const\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_ae9d145cdfc3acd26084e91cae9e46532}{ABSL\_ASSERT\_EXCLUSIVE\_LOCK}}();}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00206\ \ \ \textcolor{comment}{//\ Reader-\/Writer\ Locking}}
\DoxyCodeLine{00207\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \textcolor{comment}{//\ A\ Mutex\ can\ also\ be\ used\ as\ a\ starvation-\/free\ reader-\/writer\ lock.}}
\DoxyCodeLine{00210\ \ \ \textcolor{comment}{//\ Neither\ read-\/locks\ nor\ write-\/locks\ are\ reentrant/recursive\ to\ avoid}}
\DoxyCodeLine{00211\ \ \ \textcolor{comment}{//\ potential\ client\ programming\ errors.}}
\DoxyCodeLine{00212\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00213\ \ \ \textcolor{comment}{//\ The\ Mutex\ API\ provides\ \`{}Writer*()`\ aliases\ for\ the\ existing\ \`{}Lock()`,}}
\DoxyCodeLine{00214\ \ \ \textcolor{comment}{//\ \`{}Unlock()`\ and\ \`{}TryLock()`\ methods\ for\ use\ within\ applications\ mixing}}
\DoxyCodeLine{00215\ \ \ \textcolor{comment}{//\ reader/writer\ locks.\ Using\ \`{}Reader*()`\ and\ \`{}Writer*()`\ operations\ in\ this}}
\DoxyCodeLine{00216\ \ \ \textcolor{comment}{//\ manner\ can\ make\ locking\ behavior\ clearer\ when\ mixing\ read\ and\ write\ modes.}}
\DoxyCodeLine{00217\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00218\ \ \ \textcolor{comment}{//\ Introducing\ reader\ locks\ necessarily\ complicates\ the\ \`{}Mutex`\ state}}
\DoxyCodeLine{00219\ \ \ \textcolor{comment}{//\ machine\ somewhat.\ The\ table\ below\ illustrates\ the\ allowed\ state\ transitions}}
\DoxyCodeLine{00220\ \ \ \textcolor{comment}{//\ of\ a\ mutex\ in\ such\ cases.\ Note\ that\ ReaderLock()\ may\ block\ even\ if\ the\ lock}}
\DoxyCodeLine{00221\ \ \ \textcolor{comment}{//\ is\ held\ in\ shared\ mode;\ this\ occurs\ when\ another\ thread\ is\ blocked\ on\ a}}
\DoxyCodeLine{00222\ \ \ \textcolor{comment}{//\ call\ to\ WriterLock().}}
\DoxyCodeLine{00223\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00224\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00225\ \ \ \textcolor{comment}{//\ \ \ \ \ Operation:\ WriterLock()\ Unlock()\ \ ReaderLock()\ \ \ \ \ \ \ \ \ \ \ ReaderUnlock()}}
\DoxyCodeLine{00226\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00227\ \ \ \textcolor{comment}{//\ State}}
\DoxyCodeLine{00228\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00229\ \ \ \textcolor{comment}{//\ Free\ \ \ \ \ \ \ \ \ \ \ Exclusive\ \ \ \ invalid\ \ \ Shared(1)\ \ \ \ \ \ \ \ \ \ \ \ \ \ invalid}}
\DoxyCodeLine{00230\ \ \ \textcolor{comment}{//\ Shared(1)\ \ \ \ \ \ blocks\ \ \ \ \ \ \ invalid\ \ \ Shared(2)\ or\ blocks\ \ \ \ Free}}
\DoxyCodeLine{00231\ \ \ \textcolor{comment}{//\ Shared(n)\ n>1\ \ blocks\ \ \ \ \ \ \ invalid\ \ \ Shared(n+1)\ or\ blocks\ \ Shared(n-\/1)}}
\DoxyCodeLine{00232\ \ \ \textcolor{comment}{//\ Exclusive\ \ \ \ \ \ blocks\ \ \ \ \ \ \ Free\ \ \ \ \ \ blocks\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ invalid}}
\DoxyCodeLine{00233\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00234\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00235\ \ \ \textcolor{comment}{//\ In\ comments\ below,\ "{}shared"{}\ refers\ to\ a\ state\ of\ Shared(n)\ for\ any\ n\ >\ 0.}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \textcolor{comment}{//\ Mutex::ReaderLock()}}
\DoxyCodeLine{00238\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00239\ \ \ \textcolor{comment}{//\ Blocks\ the\ calling\ thread,\ if\ necessary,\ until\ this\ \`{}Mutex`\ is\ either\ free,}}
\DoxyCodeLine{00240\ \ \ \textcolor{comment}{//\ or\ in\ shared\ mode,\ and\ then\ acquires\ a\ share\ of\ it.\ Note\ that}}
\DoxyCodeLine{00241\ \ \ \textcolor{comment}{//\ \`{}ReaderLock()`\ will\ block\ if\ some\ other\ thread\ has\ an\ exclusive/writer\ lock}}
\DoxyCodeLine{00242\ \ \ \textcolor{comment}{//\ on\ the\ mutex.}}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \textcolor{keywordtype}{void}\ ReaderLock()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a2c93b9327ba1d82edc819ad018ed7c10}{ABSL\_SHARED\_LOCK\_FUNCTION}}();}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \textcolor{comment}{//\ Mutex::ReaderUnlock()}}
\DoxyCodeLine{00247\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00248\ \ \ \textcolor{comment}{//\ Releases\ a\ read\ share\ of\ this\ \`{}Mutex`.\ \`{}ReaderUnlock`\ may\ return\ a\ mutex\ to}}
\DoxyCodeLine{00249\ \ \ \textcolor{comment}{//\ the\ free\ state\ if\ this\ thread\ holds\ the\ last\ reader\ lock\ on\ the\ mutex.\ Note}}
\DoxyCodeLine{00250\ \ \ \textcolor{comment}{//\ that\ you\ cannot\ call\ \`{}ReaderUnlock()`\ on\ a\ mutex\ held\ in\ write\ mode.}}
\DoxyCodeLine{00251\ \ \ \textcolor{keywordtype}{void}\ ReaderUnlock()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}();}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//\ Mutex::ReaderTryLock()}}
\DoxyCodeLine{00254\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00255\ \ \ \textcolor{comment}{//\ If\ the\ mutex\ can\ be\ acquired\ without\ blocking,\ acquires\ this\ mutex\ for}}
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ shared\ access\ and\ returns\ \`{}true`.\ Otherwise,\ returns\ \`{}false`.\ Returns}}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ \`{}true`\ with\ high\ probability\ if\ the\ \`{}Mutex`\ was\ free\ or\ shared.}}
\DoxyCodeLine{00258\ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_ad3388ffb9a4b2443a11d3ab2dee6ef4e}{ABSL\_MUST\_USE\_RESULT}}\ \textcolor{keywordtype}{bool}\ ReaderTryLock()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a47d482a056690d977ad6976ab09d1405}{ABSL\_SHARED\_TRYLOCK\_FUNCTION}}(true);}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \textcolor{comment}{//\ Mutex::AssertReaderHeld()}}
\DoxyCodeLine{00261\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00262\ \ \ \textcolor{comment}{//\ Require\ that\ the\ mutex\ be\ held\ at\ least\ in\ shared\ mode\ (read\ mode)\ by\ this}}
\DoxyCodeLine{00263\ \ \ \textcolor{comment}{//\ thread.}}
\DoxyCodeLine{00264\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00265\ \ \ \textcolor{comment}{//\ If\ the\ mutex\ is\ not\ currently\ held\ by\ this\ thread,\ this\ function\ may\ report}}
\DoxyCodeLine{00266\ \ \ \textcolor{comment}{//\ an\ error\ (typically\ by\ crashing\ with\ a\ diagnostic)\ or\ it\ may\ do\ nothing.}}
\DoxyCodeLine{00267\ \ \ \textcolor{comment}{//\ This\ function\ is\ intended\ only\ as\ a\ tool\ to\ assist\ debugging;\ it\ doesn't}}
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{//\ guarantee\ correctness.}}
\DoxyCodeLine{00269\ \ \ \textcolor{keywordtype}{void}\ AssertReaderHeld()\ const\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a59de259fd8ee398c23a829a955de08fb}{ABSL\_ASSERT\_SHARED\_LOCK}}();}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{//\ Mutex::WriterLock()}}
\DoxyCodeLine{00272\ \ \ \textcolor{comment}{//\ Mutex::WriterUnlock()}}
\DoxyCodeLine{00273\ \ \ \textcolor{comment}{//\ Mutex::WriterTryLock()}}
\DoxyCodeLine{00274\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00275\ \ \ \textcolor{comment}{//\ Aliases\ for\ \`{}Mutex::Lock()`,\ \`{}Mutex::Unlock()`,\ and\ \`{}Mutex::TryLock()`.}}
\DoxyCodeLine{00276\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00277\ \ \ \textcolor{comment}{//\ These\ methods\ may\ be\ used\ (along\ with\ the\ complementary\ \`{}Reader*()`}}
\DoxyCodeLine{00278\ \ \ \textcolor{comment}{//\ methods)\ to\ distinguish\ simple\ exclusive\ \`{}Mutex`\ usage\ (`Lock()`,}}
\DoxyCodeLine{00279\ \ \ \textcolor{comment}{//\ etc.)\ from\ reader/writer\ lock\ usage.}}
\DoxyCodeLine{00280\ \ \ \textcolor{keywordtype}{void}\ WriterLock()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}()\ \{\ this-\/>Lock();\ \}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1Mutex_ad1699cd06c68c1b311279cdaf294284b}{WriterUnlock}}()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}()\ \{\ this-\/>Unlock();\ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_ad3388ffb9a4b2443a11d3ab2dee6ef4e}{ABSL\_MUST\_USE\_RESULT}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_a2fbdd1ad97b7a51f130ba76639c20421}{WriterTryLock}}()}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a3ee1068359639a2c82356da26ffaee9e}{ABSL\_EXCLUSIVE\_TRYLOCK\_FUNCTION}}(true)\ \{}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>TryLock();}
\DoxyCodeLine{00287\ \ \ \}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00290\ \ \ \textcolor{comment}{//\ Conditional\ Critical\ Regions}}
\DoxyCodeLine{00291\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \textcolor{comment}{//\ Conditional\ usage\ of\ a\ \`{}Mutex`\ can\ occur\ using\ two\ distinct\ paradigms:}}
\DoxyCodeLine{00294\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00295\ \ \ \textcolor{comment}{//\ \ \ *\ Use\ of\ \`{}Mutex`\ member\ functions\ with\ \`{}Condition`\ objects.}}
\DoxyCodeLine{00296\ \ \ \textcolor{comment}{//\ \ \ *\ Use\ of\ the\ separate\ \`{}CondVar`\ abstraction.}}
\DoxyCodeLine{00297\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00298\ \ \ \textcolor{comment}{//\ In\ general,\ prefer\ use\ of\ \`{}Condition`\ and\ the\ \`{}Mutex`\ member\ functions}}
\DoxyCodeLine{00299\ \ \ \textcolor{comment}{//\ listed\ below\ over\ \`{}CondVar`.\ When\ there\ are\ multiple\ threads\ waiting\ on}}
\DoxyCodeLine{00300\ \ \ \textcolor{comment}{//\ distinctly\ different\ conditions,\ however,\ a\ battery\ of\ \`{}CondVar`s\ may\ be}}
\DoxyCodeLine{00301\ \ \ \textcolor{comment}{//\ more\ efficient.\ This\ section\ discusses\ use\ of\ \`{}Condition`\ objects.}}
\DoxyCodeLine{00302\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00303\ \ \ \textcolor{comment}{//\ \`{}Mutex`\ contains\ member\ functions\ for\ performing\ lock\ operations\ only\ under}}
\DoxyCodeLine{00304\ \ \ \textcolor{comment}{//\ certain\ conditions,\ of\ class\ \`{}Condition`.\ For\ correctness,\ the\ \`{}Condition`}}
\DoxyCodeLine{00305\ \ \ \textcolor{comment}{//\ must\ return\ a\ boolean\ that\ is\ a\ pure\ function,\ only\ of\ state\ protected\ by}}
\DoxyCodeLine{00306\ \ \ \textcolor{comment}{//\ the\ \`{}Mutex`.\ The\ condition\ must\ be\ invariant\ w.r.t.\ environmental\ state}}
\DoxyCodeLine{00307\ \ \ \textcolor{comment}{//\ such\ as\ thread,\ cpu\ id,\ or\ time,\ and\ must\ be\ \`{}noexcept`.\ The\ condition\ will}}
\DoxyCodeLine{00308\ \ \ \textcolor{comment}{//\ always\ be\ invoked\ with\ the\ mutex\ held\ in\ at\ least\ read\ mode,\ so\ you\ should}}
\DoxyCodeLine{00309\ \ \ \textcolor{comment}{//\ not\ block\ it\ for\ long\ periods\ or\ sleep\ it\ on\ a\ timer.}}
\DoxyCodeLine{00310\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00311\ \ \ \textcolor{comment}{//\ Since\ a\ condition\ must\ not\ depend\ directly\ on\ the\ current\ time,\ use}}
\DoxyCodeLine{00312\ \ \ \textcolor{comment}{//\ \`{}*WithTimeout()`\ member\ function\ variants\ to\ make\ your\ condition}}
\DoxyCodeLine{00313\ \ \ \textcolor{comment}{//\ effectively\ true\ after\ a\ given\ duration,\ or\ \`{}*WithDeadline()`\ variants\ to}}
\DoxyCodeLine{00314\ \ \ \textcolor{comment}{//\ make\ your\ condition\ effectively\ true\ after\ a\ given\ time.}}
\DoxyCodeLine{00315\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00316\ \ \ \textcolor{comment}{//\ The\ condition\ function\ should\ have\ no\ side-\/effects\ aside\ from\ debug}}
\DoxyCodeLine{00317\ \ \ \textcolor{comment}{//\ logging;\ as\ a\ special\ exception,\ the\ function\ may\ acquire\ other\ mutexes}}
\DoxyCodeLine{00318\ \ \ \textcolor{comment}{//\ provided\ it\ releases\ all\ those\ that\ it\ acquires.\ \ (This\ exception\ was}}
\DoxyCodeLine{00319\ \ \ \textcolor{comment}{//\ required\ to\ allow\ logging.)}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ \textcolor{comment}{//\ Mutex::Await()}}
\DoxyCodeLine{00322\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00323\ \ \ \textcolor{comment}{//\ Unlocks\ this\ \`{}Mutex`\ and\ blocks\ until\ simultaneously\ both\ \`{}cond`\ is\ \`{}true`}}
\DoxyCodeLine{00324\ \ \ \textcolor{comment}{//\ and\ this\ \`{}Mutex`\ can\ be\ reacquired,\ then\ reacquires\ this\ \`{}Mutex`\ in\ the}}
\DoxyCodeLine{00325\ \ \ \textcolor{comment}{//\ same\ mode\ in\ which\ it\ was\ previously\ held.\ If\ the\ condition\ is\ initially}}
\DoxyCodeLine{00326\ \ \ \textcolor{comment}{//\ \`{}true`,\ \`{}Await()`\ *may*\ skip\ the\ release/re-\/acquire\ step.}}
\DoxyCodeLine{00327\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00328\ \ \ \textcolor{comment}{//\ \`{}Await()`\ requires\ that\ this\ thread\ holds\ this\ \`{}Mutex`\ in\ some\ mode.}}
\DoxyCodeLine{00329\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1Mutex_a75af6636231cb31cf830befed7ca2df6}{Await}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)\ \{}
\DoxyCodeLine{00330\ \ \ \ \ AwaitCommon(cond,\ synchronization\_internal::KernelTimeout::Never());}
\DoxyCodeLine{00331\ \ \ \}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \textcolor{comment}{//\ Mutex::LockWhen()}}
\DoxyCodeLine{00334\ \ \ \textcolor{comment}{//\ Mutex::ReaderLockWhen()}}
\DoxyCodeLine{00335\ \ \ \textcolor{comment}{//\ Mutex::WriterLockWhen()}}
\DoxyCodeLine{00336\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00337\ \ \ \textcolor{comment}{//\ Blocks\ until\ simultaneously\ both\ \`{}cond`\ is\ \`{}true`\ and\ this\ \`{}Mutex`\ can}}
\DoxyCodeLine{00338\ \ \ \textcolor{comment}{//\ be\ acquired,\ then\ atomically\ acquires\ this\ \`{}Mutex`.\ \`{}LockWhen()`\ is}}
\DoxyCodeLine{00339\ \ \ \textcolor{comment}{//\ logically\ equivalent\ to\ \`{}*Lock();\ Await();`\ though\ they\ may\ have\ different}}
\DoxyCodeLine{00340\ \ \ \textcolor{comment}{//\ performance\ characteristics.}}
\DoxyCodeLine{00341\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1Mutex_a54c8cd01a55337006a4116d6e9cd7739}{LockWhen}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00342\ \ \ \ \ LockWhenCommon(cond,\ synchronization\_internal::KernelTimeout::Never(),}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{true});}
\DoxyCodeLine{00344\ \ \ \}}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1Mutex_ac563adf9d0c1cac38c65d47cea27eb7a}{ReaderLockWhen}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a2c93b9327ba1d82edc819ad018ed7c10}{ABSL\_SHARED\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00347\ \ \ \ \ LockWhenCommon(cond,\ synchronization\_internal::KernelTimeout::Never(),}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{false});}
\DoxyCodeLine{00349\ \ \ \}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1Mutex_ad14737b99f7d275929547a8ee558c0af}{WriterLockWhen}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00352\ \ \ \ \ this-\/>LockWhen(cond);}
\DoxyCodeLine{00353\ \ \ \}}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00356\ \ \ \textcolor{comment}{//\ Mutex\ Variants\ with\ Timeouts/Deadlines}}
\DoxyCodeLine{00357\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ \textcolor{comment}{//\ Mutex::AwaitWithTimeout()}}
\DoxyCodeLine{00360\ \ \ \textcolor{comment}{//\ Mutex::AwaitWithDeadline()}}
\DoxyCodeLine{00361\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00362\ \ \ \textcolor{comment}{//\ Unlocks\ this\ \`{}Mutex`\ and\ blocks\ until\ simultaneously:}}
\DoxyCodeLine{00363\ \ \ \textcolor{comment}{//\ \ \ -\/\ either\ \`{}cond`\ is\ true\ or\ the\ \{timeout\ has\ expired,\ deadline\ has\ passed\}}}
\DoxyCodeLine{00364\ \ \ \textcolor{comment}{//\ \ \ \ \ and}}
\DoxyCodeLine{00365\ \ \ \textcolor{comment}{//\ \ \ -\/\ this\ \`{}Mutex`\ can\ be\ reacquired,}}
\DoxyCodeLine{00366\ \ \ \textcolor{comment}{//\ then\ reacquire\ this\ \`{}Mutex`\ in\ the\ same\ mode\ in\ which\ it\ was\ previously}}
\DoxyCodeLine{00367\ \ \ \textcolor{comment}{//\ held,\ returning\ \`{}true`\ iff\ \`{}cond`\ is\ \`{}true`\ on\ return.}}
\DoxyCodeLine{00368\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00369\ \ \ \textcolor{comment}{//\ If\ the\ condition\ is\ initially\ \`{}true`,\ the\ implementation\ *may*\ skip\ the}}
\DoxyCodeLine{00370\ \ \ \textcolor{comment}{//\ release/re-\/acquire\ step\ and\ return\ immediately.}}
\DoxyCodeLine{00371\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00372\ \ \ \textcolor{comment}{//\ Deadlines\ in\ the\ past\ are\ equivalent\ to\ an\ immediate\ deadline.}}
\DoxyCodeLine{00373\ \ \ \textcolor{comment}{//\ Negative\ timeouts\ are\ equivalent\ to\ a\ zero\ timeout.}}
\DoxyCodeLine{00374\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00375\ \ \ \textcolor{comment}{//\ This\ method\ requires\ that\ this\ thread\ holds\ this\ \`{}Mutex`\ in\ some\ mode.}}
\DoxyCodeLine{00376\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_aa54303d5ad3b17cc1ef0aa4cdda10a06}{AwaitWithTimeout}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,\ \mbox{\hyperlink{classabsl_1_1Duration}{absl::Duration}}\ timeout)\ \{}
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{keywordflow}{return}\ AwaitCommon(cond,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\{timeout\});}
\DoxyCodeLine{00378\ \ \ \}}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_af9bd6c8f357151b09435ce97f760964b}{AwaitWithDeadline}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,\ \mbox{\hyperlink{classabsl_1_1Time}{absl::Time}}\ deadline)\ \{}
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{keywordflow}{return}\ AwaitCommon(cond,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\{deadline\});}
\DoxyCodeLine{00382\ \ \ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \textcolor{comment}{//\ Mutex::LockWhenWithTimeout()}}
\DoxyCodeLine{00385\ \ \ \textcolor{comment}{//\ Mutex::ReaderLockWhenWithTimeout()}}
\DoxyCodeLine{00386\ \ \ \textcolor{comment}{//\ Mutex::WriterLockWhenWithTimeout()}}
\DoxyCodeLine{00387\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00388\ \ \ \textcolor{comment}{//\ Blocks\ until\ simultaneously\ both:}}
\DoxyCodeLine{00389\ \ \ \textcolor{comment}{//\ \ \ -\/\ either\ \`{}cond`\ is\ \`{}true`\ or\ the\ timeout\ has\ expired,\ and}}
\DoxyCodeLine{00390\ \ \ \textcolor{comment}{//\ \ \ -\/\ this\ \`{}Mutex`\ can\ be\ acquired,}}
\DoxyCodeLine{00391\ \ \ \textcolor{comment}{//\ then\ atomically\ acquires\ this\ \`{}Mutex`,\ returning\ \`{}true`\ iff\ \`{}cond`\ is}}
\DoxyCodeLine{00392\ \ \ \textcolor{comment}{//\ \`{}true`\ on\ return.}}
\DoxyCodeLine{00393\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00394\ \ \ \textcolor{comment}{//\ Negative\ timeouts\ are\ equivalent\ to\ a\ zero\ timeout.}}
\DoxyCodeLine{00395\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_a32bac1ff6042bd8848bd61e257a1aac8}{LockWhenWithTimeout}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,\ \mbox{\hyperlink{classabsl_1_1Duration}{absl::Duration}}\ timeout)}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keywordflow}{return}\ LockWhenCommon(}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ cond,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\{timeout\},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00399\ \ \ \}}
\DoxyCodeLine{00400\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_a26c557de6343bb1fea959d560efcd233}{ReaderLockWhenWithTimeout}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,\ \mbox{\hyperlink{classabsl_1_1Duration}{absl::Duration}}\ timeout)}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a2c93b9327ba1d82edc819ad018ed7c10}{ABSL\_SHARED\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{keywordflow}{return}\ LockWhenCommon(}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ cond,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\{timeout\},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00404\ \ \ \}}
\DoxyCodeLine{00405\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_aef93b7d0b88e9abd675888ccd1b92bac}{WriterLockWhenWithTimeout}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,\ \mbox{\hyperlink{classabsl_1_1Duration}{absl::Duration}}\ timeout)}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>LockWhenWithTimeout(cond,\ timeout);}
\DoxyCodeLine{00408\ \ \ \}}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \ \ \textcolor{comment}{//\ Mutex::LockWhenWithDeadline()}}
\DoxyCodeLine{00411\ \ \ \textcolor{comment}{//\ Mutex::ReaderLockWhenWithDeadline()}}
\DoxyCodeLine{00412\ \ \ \textcolor{comment}{//\ Mutex::WriterLockWhenWithDeadline()}}
\DoxyCodeLine{00413\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00414\ \ \ \textcolor{comment}{//\ Blocks\ until\ simultaneously\ both:}}
\DoxyCodeLine{00415\ \ \ \textcolor{comment}{//\ \ \ -\/\ either\ \`{}cond`\ is\ \`{}true`\ or\ the\ deadline\ has\ been\ passed,\ and}}
\DoxyCodeLine{00416\ \ \ \textcolor{comment}{//\ \ \ -\/\ this\ \`{}Mutex`\ can\ be\ acquired,}}
\DoxyCodeLine{00417\ \ \ \textcolor{comment}{//\ then\ atomically\ acquires\ this\ Mutex,\ returning\ \`{}true`\ iff\ \`{}cond`\ is\ \`{}true`}}
\DoxyCodeLine{00418\ \ \ \textcolor{comment}{//\ on\ return.}}
\DoxyCodeLine{00419\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00420\ \ \ \textcolor{comment}{//\ Deadlines\ in\ the\ past\ are\ equivalent\ to\ an\ immediate\ deadline.}}
\DoxyCodeLine{00421\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_a88cd95eeac95eed6f7b1b79bc79e99fa}{LockWhenWithDeadline}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,\ \mbox{\hyperlink{classabsl_1_1Time}{absl::Time}}\ deadline)}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{keywordflow}{return}\ LockWhenCommon(}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ cond,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\{deadline\},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00425\ \ \ \}}
\DoxyCodeLine{00426\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_a267f9b9efb7d33f718a06a72de07c6a1}{ReaderLockWhenWithDeadline}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,\ \mbox{\hyperlink{classabsl_1_1Time}{absl::Time}}\ deadline)}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a2c93b9327ba1d82edc819ad018ed7c10}{ABSL\_SHARED\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{keywordflow}{return}\ LockWhenCommon(}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ cond,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\{deadline\},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00430\ \ \ \}}
\DoxyCodeLine{00431\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Mutex_a784536ca96dcf5183b6ed6fca4e8de31}{WriterLockWhenWithDeadline}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,\ \mbox{\hyperlink{classabsl_1_1Time}{absl::Time}}\ deadline)}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>LockWhenWithDeadline(cond,\ deadline);}
\DoxyCodeLine{00434\ \ \ \}}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00437\ \ \ \textcolor{comment}{//\ Debug\ Support:\ Invariant\ Checking,\ Deadlock\ Detection,\ Logging.}}
\DoxyCodeLine{00438\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \ \ \textcolor{comment}{//\ Mutex::EnableInvariantDebugging()}}
\DoxyCodeLine{00441\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00442\ \ \ \textcolor{comment}{//\ If\ \`{}invariant`!=null\ and\ if\ invariant\ debugging\ has\ been\ enabled\ globally,}}
\DoxyCodeLine{00443\ \ \ \textcolor{comment}{//\ cause\ \`{}(*invariant)(arg)`\ to\ be\ called\ at\ moments\ when\ the\ invariant\ for}}
\DoxyCodeLine{00444\ \ \ \textcolor{comment}{//\ this\ \`{}Mutex`\ should\ hold\ (for\ example:\ just\ after\ acquire,\ just\ before}}
\DoxyCodeLine{00445\ \ \ \textcolor{comment}{//\ release).}}
\DoxyCodeLine{00446\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00447\ \ \ \textcolor{comment}{//\ The\ routine\ \`{}invariant`\ should\ have\ no\ side-\/effects\ since\ it\ is\ not}}
\DoxyCodeLine{00448\ \ \ \textcolor{comment}{//\ guaranteed\ how\ many\ times\ it\ will\ be\ called;\ it\ should\ check\ the\ invariant}}
\DoxyCodeLine{00449\ \ \ \textcolor{comment}{//\ and\ crash\ if\ it\ does\ not\ hold.\ Enabling\ global\ invariant\ debugging\ may}}
\DoxyCodeLine{00450\ \ \ \textcolor{comment}{//\ substantially\ reduce\ \`{}Mutex`\ performance;\ it\ should\ be\ set\ only\ for}}
\DoxyCodeLine{00451\ \ \ \textcolor{comment}{//\ non-\/production\ runs.\ \ Optimization\ options\ may\ also\ disable\ invariant}}
\DoxyCodeLine{00452\ \ \ \textcolor{comment}{//\ checks.}}
\DoxyCodeLine{00453\ \ \ \textcolor{keywordtype}{void}\ EnableInvariantDebugging(\textcolor{keywordtype}{void}\ (*\mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a33e68379fd736ef51ebf03a7a0b74243}{invariant}})(\textcolor{keywordtype}{void}*),\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}});}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \textcolor{comment}{//\ Mutex::EnableDebugLog()}}
\DoxyCodeLine{00456\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00457\ \ \ \textcolor{comment}{//\ Cause\ all\ subsequent\ uses\ of\ this\ \`{}Mutex`\ to\ be\ logged\ via}}
\DoxyCodeLine{00458\ \ \ \textcolor{comment}{//\ \`{}ABSL\_RAW\_LOG(INFO)`.\ Log\ entries\ are\ tagged\ with\ \`{}name`\ if\ no\ previous}}
\DoxyCodeLine{00459\ \ \ \textcolor{comment}{//\ call\ to\ \`{}EnableInvariantDebugging()`\ or\ \`{}EnableDebugLog()`\ has\ been\ made.}}
\DoxyCodeLine{00460\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00461\ \ \ \textcolor{comment}{//\ Note:\ This\ method\ substantially\ reduces\ \`{}Mutex`\ performance.}}
\DoxyCodeLine{00462\ \ \ \textcolor{keywordtype}{void}\ EnableDebugLog(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_ac8b44a387cf3da062c4a32316b43962c}{name}});}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ \textcolor{comment}{//\ Deadlock\ detection}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \textcolor{comment}{//\ Mutex::ForgetDeadlockInfo()}}
\DoxyCodeLine{00467\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00468\ \ \ \textcolor{comment}{//\ Forget\ any\ deadlock-\/detection\ information\ previously\ gathered}}
\DoxyCodeLine{00469\ \ \ \textcolor{comment}{//\ about\ this\ \`{}Mutex`.\ Call\ this\ method\ in\ debug\ mode\ when\ the\ lock\ ordering}}
\DoxyCodeLine{00470\ \ \ \textcolor{comment}{//\ of\ a\ \`{}Mutex`\ changes.}}
\DoxyCodeLine{00471\ \ \ \textcolor{keywordtype}{void}\ ForgetDeadlockInfo();}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00473\ \ \ \textcolor{comment}{//\ Mutex::AssertNotHeld()}}
\DoxyCodeLine{00474\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00475\ \ \ \textcolor{comment}{//\ Return\ immediately\ if\ this\ thread\ does\ not\ hold\ this\ \`{}Mutex`\ in\ any}}
\DoxyCodeLine{00476\ \ \ \textcolor{comment}{//\ mode;\ otherwise,\ may\ report\ an\ error\ (typically\ by\ crashing\ with\ a}}
\DoxyCodeLine{00477\ \ \ \textcolor{comment}{//\ diagnostic),\ or\ may\ return\ immediately.}}
\DoxyCodeLine{00478\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00479\ \ \ \textcolor{comment}{//\ Currently\ this\ check\ is\ performed\ only\ if\ all\ of:}}
\DoxyCodeLine{00480\ \ \ \textcolor{comment}{//\ \ \ \ -\/\ in\ debug\ mode}}
\DoxyCodeLine{00481\ \ \ \textcolor{comment}{//\ \ \ \ -\/\ SetMutexDeadlockDetectionMode()\ has\ been\ set\ to\ kReport\ or\ kAbort}}
\DoxyCodeLine{00482\ \ \ \textcolor{comment}{//\ \ \ \ -\/\ number\ of\ locks\ concurrently\ held\ by\ this\ thread\ is\ not\ large.}}
\DoxyCodeLine{00483\ \ \ \textcolor{comment}{//\ are\ true.}}
\DoxyCodeLine{00484\ \ \ \textcolor{keywordtype}{void}\ AssertNotHeld()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \textcolor{comment}{//\ Special\ cases.}}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ \ \ \textcolor{comment}{//\ A\ \`{}MuHow`\ is\ a\ constant\ that\ indicates\ how\ a\ lock\ should\ be\ acquired.}}
\DoxyCodeLine{00489\ \ \ \textcolor{comment}{//\ Internal\ implementation\ detail.\ \ Clients\ should\ ignore.}}
\DoxyCodeLine{00490\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{const}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1MuHowS}{MuHowS}}*\ \mbox{\hyperlink{classabsl_1_1Mutex_ab7d46395c4627b4dd71ddb5c89fc70ad}{MuHow}};}
\DoxyCodeLine{00491\ }
\DoxyCodeLine{00492\ \ \ \textcolor{comment}{//\ Mutex::InternalAttemptToUseMutexInFatalSignalHandler()}}
\DoxyCodeLine{00493\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00494\ \ \ \textcolor{comment}{//\ Causes\ the\ \`{}Mutex`\ implementation\ to\ prepare\ itself\ for\ re-\/entry\ caused\ by}}
\DoxyCodeLine{00495\ \ \ \textcolor{comment}{//\ future\ use\ of\ \`{}Mutex`\ within\ a\ fatal\ signal\ handler.\ This\ method\ is}}
\DoxyCodeLine{00496\ \ \ \textcolor{comment}{//\ intended\ for\ use\ only\ for\ last-\/ditch\ attempts\ to\ log\ crash\ information.}}
\DoxyCodeLine{00497\ \ \ \textcolor{comment}{//\ It\ does\ not\ guarantee\ that\ attempts\ to\ use\ Mutexes\ within\ the\ handler\ will}}
\DoxyCodeLine{00498\ \ \ \textcolor{comment}{//\ not\ deadlock;\ it\ merely\ makes\ other\ faults\ less\ likely.}}
\DoxyCodeLine{00499\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00500\ \ \ \textcolor{comment}{//\ WARNING:\ \ This\ routine\ must\ be\ invoked\ from\ a\ signal\ handler,\ and\ the}}
\DoxyCodeLine{00501\ \ \ \textcolor{comment}{//\ signal\ handler\ must\ either\ loop\ forever\ or\ terminate\ the\ process.}}
\DoxyCodeLine{00502\ \ \ \textcolor{comment}{//\ Attempts\ to\ return\ from\ (or\ \`{}longjmp`\ out\ of)\ the\ signal\ handler\ once\ this}}
\DoxyCodeLine{00503\ \ \ \textcolor{comment}{//\ call\ has\ been\ made\ may\ cause\ arbitrary\ program\ behaviour\ including}}
\DoxyCodeLine{00504\ \ \ \textcolor{comment}{//\ crashes\ and\ deadlocks.}}
\DoxyCodeLine{00505\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ InternalAttemptToUseMutexInFatalSignalHandler();}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00507\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00508\ \ \ std::atomic<intptr\_t>\ mu\_;\ \ \textcolor{comment}{//\ The\ Mutex\ state.}}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \ \ \textcolor{comment}{//\ Post()/Wait()\ versus\ associated\ PerThreadSem;\ in\ class\ for\ required}}
\DoxyCodeLine{00511\ \ \ \textcolor{comment}{//\ friendship\ with\ PerThreadSem.}}
\DoxyCodeLine{00512\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ IncrementSynchSem(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \mbox{\hyperlink{structabsl_1_1base__internal_1_1PerThreadSynch}{base\_internal::PerThreadSynch}}*\ w);}
\DoxyCodeLine{00513\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ DecrementSynchSem(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \mbox{\hyperlink{structabsl_1_1base__internal_1_1PerThreadSynch}{base\_internal::PerThreadSynch}}*\ w,}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\ t);}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \textcolor{comment}{//\ slow\ path\ acquire}}
\DoxyCodeLine{00517\ \ \ \textcolor{keywordtype}{void}\ LockSlowLoop(\mbox{\hyperlink{structabsl_1_1SynchWaitParams}{SynchWaitParams}}*\ waitp,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_1_1flags__internal}{flags}});}
\DoxyCodeLine{00518\ \ \ \textcolor{comment}{//\ wrappers\ around\ LockSlowLoop()}}
\DoxyCodeLine{00519\ \ \ \textcolor{keywordtype}{bool}\ LockSlowWithDeadline(\mbox{\hyperlink{structabsl_1_1MuHowS}{MuHow}}\ how,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}*\ cond,}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\ t,}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_1_1flags__internal}{flags}});}
\DoxyCodeLine{00522\ \ \ \textcolor{keywordtype}{void}\ LockSlow(\mbox{\hyperlink{structabsl_1_1MuHowS}{MuHow}}\ how,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}*\ cond,}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_1_1flags__internal}{flags}})\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_a493ad398cfa0b13d1d6e8dfca61e3d97}{ABSL\_ATTRIBUTE\_COLD}};}
\DoxyCodeLine{00524\ \ \ \textcolor{comment}{//\ slow\ path\ release}}
\DoxyCodeLine{00525\ \ \ \textcolor{keywordtype}{void}\ UnlockSlow(\mbox{\hyperlink{structabsl_1_1SynchWaitParams}{SynchWaitParams}}*\ waitp)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_a493ad398cfa0b13d1d6e8dfca61e3d97}{ABSL\_ATTRIBUTE\_COLD}};}
\DoxyCodeLine{00526\ \ \ \textcolor{comment}{//\ TryLock\ slow\ path.}}
\DoxyCodeLine{00527\ \ \ \textcolor{keywordtype}{bool}\ TryLockSlow();}
\DoxyCodeLine{00528\ \ \ \textcolor{comment}{//\ ReaderTryLock\ slow\ path.}}
\DoxyCodeLine{00529\ \ \ \textcolor{keywordtype}{bool}\ ReaderTryLockSlow();}
\DoxyCodeLine{00530\ \ \ \textcolor{comment}{//\ Common\ code\ between\ Await()\ and\ AwaitWithTimeout/Deadline()}}
\DoxyCodeLine{00531\ \ \ \textcolor{keywordtype}{bool}\ AwaitCommon(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\ t);}
\DoxyCodeLine{00533\ \ \ \textcolor{keywordtype}{bool}\ LockWhenCommon(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond,}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\ t,\ \textcolor{keywordtype}{bool}\ write);}
\DoxyCodeLine{00535\ \ \ \textcolor{comment}{//\ Attempt\ to\ remove\ thread\ s\ from\ queue.}}
\DoxyCodeLine{00536\ \ \ \textcolor{keywordtype}{void}\ TryRemove(\mbox{\hyperlink{structabsl_1_1base__internal_1_1PerThreadSynch}{base\_internal::PerThreadSynch}}*\ s);}
\DoxyCodeLine{00537\ \ \ \textcolor{comment}{//\ Block\ a\ thread\ on\ mutex.}}
\DoxyCodeLine{00538\ \ \ \textcolor{keywordtype}{void}\ Block(\mbox{\hyperlink{structabsl_1_1base__internal_1_1PerThreadSynch}{base\_internal::PerThreadSynch}}*\ s);}
\DoxyCodeLine{00539\ \ \ \textcolor{comment}{//\ Wake\ a\ thread;\ return\ successor.}}
\DoxyCodeLine{00540\ \ \ \mbox{\hyperlink{structabsl_1_1base__internal_1_1PerThreadSynch}{base\_internal::PerThreadSynch}}*\ Wakeup(\mbox{\hyperlink{structabsl_1_1base__internal_1_1PerThreadSynch}{base\_internal::PerThreadSynch}}*\ w);}
\DoxyCodeLine{00541\ \ \ \textcolor{keywordtype}{void}\ Dtor();}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00543\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classabsl_1_1CondVar}{CondVar}};\ \ \ \textcolor{comment}{//\ for\ access\ to\ Trans()/Fer().}}
\DoxyCodeLine{00544\ \ \ \textcolor{keywordtype}{void}\ Trans(\mbox{\hyperlink{structabsl_1_1MuHowS}{MuHow}}\ how);\ \ \textcolor{comment}{//\ used\ for\ CondVar-\/>Mutex\ transfer}}
\DoxyCodeLine{00545\ \ \ \textcolor{keywordtype}{void}\ Fer(}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \mbox{\hyperlink{structabsl_1_1base__internal_1_1PerThreadSynch}{base\_internal::PerThreadSynch}}*\ w);\ \ \textcolor{comment}{//\ used\ for\ CondVar-\/>Mutex\ transfer}}
\DoxyCodeLine{00547\ }
\DoxyCodeLine{00548\ \ \ \textcolor{comment}{//\ Catch\ the\ error\ of\ writing\ Mutex\ when\ intending\ MutexLock.}}
\DoxyCodeLine{00549\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}(\textcolor{keyword}{const}\ \textcolor{keyword}{volatile}\ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ \textcolor{comment}{/*ignored*/})\ \{\}}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00552\ \ \ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00553\ \};}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00555\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00556\ \textcolor{comment}{//\ Mutex\ RAII\ Wrappers}}
\DoxyCodeLine{00557\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00558\ }
\DoxyCodeLine{00559\ \textcolor{comment}{//\ MutexLock}}
\DoxyCodeLine{00560\ \textcolor{comment}{//}}
\DoxyCodeLine{00561\ \textcolor{comment}{//\ \`{}MutexLock`\ is\ a\ helper\ class,\ which\ acquires\ and\ releases\ a\ \`{}Mutex`\ via}}
\DoxyCodeLine{00562\ \textcolor{comment}{//\ RAII.}}
\DoxyCodeLine{00563\ \textcolor{comment}{//}}
\DoxyCodeLine{00564\ \textcolor{comment}{//\ Example:}}
\DoxyCodeLine{00565\ \textcolor{comment}{//}}
\DoxyCodeLine{00566\ \textcolor{comment}{//\ Class\ Foo\ \{}}
\DoxyCodeLine{00567\ \textcolor{comment}{//\ \ public:}}
\DoxyCodeLine{00568\ \textcolor{comment}{//\ \ \ Foo::Bar*\ Baz()\ \{}}
\DoxyCodeLine{00569\ \textcolor{comment}{//\ \ \ \ \ MutexLock\ lock(\&mu\_);}}
\DoxyCodeLine{00570\ \textcolor{comment}{//\ \ \ \ \ ...}}
\DoxyCodeLine{00571\ \textcolor{comment}{//\ \ \ \ \ return\ bar;}}
\DoxyCodeLine{00572\ \textcolor{comment}{//\ \ \ \}}}
\DoxyCodeLine{00573\ \textcolor{comment}{//}}
\DoxyCodeLine{00574\ \textcolor{comment}{//\ private:}}
\DoxyCodeLine{00575\ \textcolor{comment}{//\ \ \ Mutex\ mu\_;}}
\DoxyCodeLine{00576\ \textcolor{comment}{//\ \};}}
\DoxyCodeLine{00577\ \textcolor{keyword}{class\ }\mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a0502f5f517fd77335dd2d5616e760475}{ABSL\_SCOPED\_LOCKABLE}}\ MutexLock\ \{}
\DoxyCodeLine{00578\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00579\ \ \ \textcolor{comment}{//\ Constructors}}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00581\ \ \ \textcolor{comment}{//\ Calls\ \`{}mu-\/>Lock()`\ and\ returns\ when\ that\ call\ returns.\ That\ is,\ \`{}*mu`\ is}}
\DoxyCodeLine{00582\ \ \ \textcolor{comment}{//\ guaranteed\ to\ be\ locked\ when\ this\ object\ is\ constructed.\ Requires\ that}}
\DoxyCodeLine{00583\ \ \ \textcolor{comment}{//\ \`{}mu`\ be\ dereferenceable.}}
\DoxyCodeLine{00584\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1MutexLock_a8ec3ab49e3cbb5ec67bf6061aee22e5f}{MutexLock}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}(mu)\ :\ mu\_(mu)\ \{}
\DoxyCodeLine{00585\ \ \ \ \ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_ac61c9eb605e6cf06c2a0cb7bd1429278}{Lock}}();}
\DoxyCodeLine{00586\ \ \ \}}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00588\ \ \ \textcolor{comment}{//\ Like\ above,\ but\ calls\ \`{}mu-\/>LockWhen(cond)`\ instead.\ That\ is,\ in\ addition\ to}}
\DoxyCodeLine{00589\ \ \ \textcolor{comment}{//\ the\ above,\ the\ condition\ given\ by\ \`{}cond`\ is\ also\ guaranteed\ to\ hold\ when}}
\DoxyCodeLine{00590\ \ \ \textcolor{comment}{//\ this\ object\ is\ constructed.}}
\DoxyCodeLine{00591\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1MutexLock_a503b86ae25aa43a81afa9d414f39a34f}{MutexLock}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}(mu)}
\DoxyCodeLine{00593\ \ \ \ \ \ \ :\ mu\_(mu)\ \{}
\DoxyCodeLine{00594\ \ \ \ \ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_a54c8cd01a55337006a4116d6e9cd7739}{LockWhen}}(cond);}
\DoxyCodeLine{00595\ \ \ \}}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLock_a25a8ad77ef8b27505701f238a3241442}{MutexLock}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1MutexLock}{MutexLock}}\&)\ =\ \textcolor{keyword}{delete};\ \ \textcolor{comment}{//\ NOLINT(runtime/mutex)}}
\DoxyCodeLine{00598\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLock_aba07644f5eec84eda96aed8218c1c6b0}{MutexLock}}(\mbox{\hyperlink{classabsl_1_1MutexLock}{MutexLock}}\&\&)\ =\ \textcolor{keyword}{delete};\ \ \ \ \ \ \ \textcolor{comment}{//\ NOLINT(runtime/mutex)}}
\DoxyCodeLine{00599\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLock}{MutexLock}}\&\ \mbox{\hyperlink{classabsl_1_1MutexLock_ad233d68936bc659bb9a779bb7d1f9197}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1MutexLock}{MutexLock}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00600\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLock}{MutexLock}}\&\ \mbox{\hyperlink{classabsl_1_1MutexLock_aac179d585899bfbc382eac9d910e20f0}{operator=}}(\mbox{\hyperlink{classabsl_1_1MutexLock}{MutexLock}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLock_aafe54459aa285221916487c5f55a2a5f}{\string~MutexLock}}()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}()\ \{\ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_af9ac5514cf5fc3e9d2870ff4762bca6d}{Unlock}}();\ \}}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00604\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00605\ \ \ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ \textcolor{keyword}{const}\ mu\_;}
\DoxyCodeLine{00606\ \};}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \textcolor{comment}{//\ ReaderMutexLock}}
\DoxyCodeLine{00609\ \textcolor{comment}{//}}
\DoxyCodeLine{00610\ \textcolor{comment}{//\ The\ \`{}ReaderMutexLock`\ is\ a\ helper\ class,\ like\ \`{}MutexLock`,\ which\ acquires\ and}}
\DoxyCodeLine{00611\ \textcolor{comment}{//\ releases\ a\ shared\ lock\ on\ a\ \`{}Mutex`\ via\ RAII.}}
\DoxyCodeLine{00612\ \textcolor{keyword}{class\ }\mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a0502f5f517fd77335dd2d5616e760475}{ABSL\_SCOPED\_LOCKABLE}}\ ReaderMutexLock\ \{}
\DoxyCodeLine{00613\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00614\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock_a67e7ffa77c485252b818154dc342778d}{ReaderMutexLock}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a2c93b9327ba1d82edc819ad018ed7c10}{ABSL\_SHARED\_LOCK\_FUNCTION}}(mu)\ :\ mu\_(mu)\ \{}
\DoxyCodeLine{00615\ \ \ \ \ mu-\/>\mbox{\hyperlink{classabsl_1_1Mutex_ada5f923e5f9de8acb5dbfd613719390c}{ReaderLock}}();}
\DoxyCodeLine{00616\ \ \ \}}
\DoxyCodeLine{00617\ }
\DoxyCodeLine{00618\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock_a00a2e63be45043000544dae4ea8f9942}{ReaderMutexLock}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a2c93b9327ba1d82edc819ad018ed7c10}{ABSL\_SHARED\_LOCK\_FUNCTION}}(mu)}
\DoxyCodeLine{00620\ \ \ \ \ \ \ :\ mu\_(mu)\ \{}
\DoxyCodeLine{00621\ \ \ \ \ mu-\/>\mbox{\hyperlink{classabsl_1_1Mutex_ac563adf9d0c1cac38c65d47cea27eb7a}{ReaderLockWhen}}(cond);}
\DoxyCodeLine{00622\ \ \ \}}
\DoxyCodeLine{00623\ }
\DoxyCodeLine{00624\ \ \ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock_a18a76439728488741a922baf02008d05}{ReaderMutexLock}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock}{ReaderMutexLock}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00625\ \ \ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock_ada43fc686135277bf1c561b3978a9301}{ReaderMutexLock}}(\mbox{\hyperlink{classabsl_1_1ReaderMutexLock}{ReaderMutexLock}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00626\ \ \ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock}{ReaderMutexLock}}\&\ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock_aa09efb6005b9f4da448c63e33c015e41}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock}{ReaderMutexLock}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00627\ \ \ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock}{ReaderMutexLock}}\&\ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock_a76438efb8bdb91cf8c55e932d234cf54}{operator=}}(\mbox{\hyperlink{classabsl_1_1ReaderMutexLock}{ReaderMutexLock}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \ \ \mbox{\hyperlink{classabsl_1_1ReaderMutexLock_a8fee311e3c720e8c70d61e299b937b6f}{\string~ReaderMutexLock}}()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}()\ \{\ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_ad176039b03fdf9ab3d673e4271ea2a3d}{ReaderUnlock}}();\ \}}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00631\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00632\ \ \ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ \textcolor{keyword}{const}\ mu\_;}
\DoxyCodeLine{00633\ \};}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \textcolor{comment}{//\ WriterMutexLock}}
\DoxyCodeLine{00636\ \textcolor{comment}{//}}
\DoxyCodeLine{00637\ \textcolor{comment}{//\ The\ \`{}WriterMutexLock`\ is\ a\ helper\ class,\ like\ \`{}MutexLock`,\ which\ acquires\ and}}
\DoxyCodeLine{00638\ \textcolor{comment}{//\ releases\ a\ write\ (exclusive)\ lock\ on\ a\ \`{}Mutex`\ via\ RAII.}}
\DoxyCodeLine{00639\ \textcolor{keyword}{class\ }\mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a0502f5f517fd77335dd2d5616e760475}{ABSL\_SCOPED\_LOCKABLE}}\ WriterMutexLock\ \{}
\DoxyCodeLine{00640\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00641\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1WriterMutexLock_abf28c297438706525f8a1677322bf33d}{WriterMutexLock}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}(mu)}
\DoxyCodeLine{00642\ \ \ \ \ \ \ :\ mu\_(mu)\ \{}
\DoxyCodeLine{00643\ \ \ \ \ mu-\/>\mbox{\hyperlink{classabsl_1_1Mutex_adf9a55d986dc6b0c1e1a5139ae41124a}{WriterLock}}();}
\DoxyCodeLine{00644\ \ \ \}}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00646\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1WriterMutexLock_accafec6eb16fde519334fd61d8895239}{WriterMutexLock}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}(mu)}
\DoxyCodeLine{00648\ \ \ \ \ \ \ :\ mu\_(mu)\ \{}
\DoxyCodeLine{00649\ \ \ \ \ mu-\/>\mbox{\hyperlink{classabsl_1_1Mutex_ad14737b99f7d275929547a8ee558c0af}{WriterLockWhen}}(cond);}
\DoxyCodeLine{00650\ \ \ \}}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \ \ \mbox{\hyperlink{classabsl_1_1WriterMutexLock_aaf13d00032020516edbc98ca5c5a7667}{WriterMutexLock}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1WriterMutexLock}{WriterMutexLock}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00653\ \ \ \mbox{\hyperlink{classabsl_1_1WriterMutexLock_a8703c7b3789f2ad2992fbdf90a5b5ef4}{WriterMutexLock}}(\mbox{\hyperlink{classabsl_1_1WriterMutexLock}{WriterMutexLock}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00654\ \ \ \mbox{\hyperlink{classabsl_1_1WriterMutexLock}{WriterMutexLock}}\&\ \mbox{\hyperlink{classabsl_1_1WriterMutexLock_ae6b8499e7d768f7ef2bf385d31b8c198}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1WriterMutexLock}{WriterMutexLock}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00655\ \ \ \mbox{\hyperlink{classabsl_1_1WriterMutexLock}{WriterMutexLock}}\&\ \mbox{\hyperlink{classabsl_1_1WriterMutexLock_a9330b9e710dfbc111f7ac30c52134e1b}{operator=}}(\mbox{\hyperlink{classabsl_1_1WriterMutexLock}{WriterMutexLock}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \ \ \mbox{\hyperlink{classabsl_1_1WriterMutexLock_ad9d90e4be3a1a51a0c2f8866f00076f5}{\string~WriterMutexLock}}()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}()\ \{\ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_ad1699cd06c68c1b311279cdaf294284b}{WriterUnlock}}();\ \}}
\DoxyCodeLine{00658\ }
\DoxyCodeLine{00659\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00660\ \ \ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ \textcolor{keyword}{const}\ mu\_;}
\DoxyCodeLine{00661\ \};}
\DoxyCodeLine{00662\ }
\DoxyCodeLine{00663\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00664\ \textcolor{comment}{//\ Condition}}
\DoxyCodeLine{00665\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00666\ \textcolor{comment}{//}}
\DoxyCodeLine{00667\ \textcolor{comment}{//\ \`{}Mutex`\ contains\ a\ number\ of\ member\ functions\ which\ take\ a\ \`{}Condition`\ as\ an}}
\DoxyCodeLine{00668\ \textcolor{comment}{//\ argument;\ clients\ can\ wait\ for\ conditions\ to\ become\ \`{}true`\ before\ attempting}}
\DoxyCodeLine{00669\ \textcolor{comment}{//\ to\ acquire\ the\ mutex.\ These\ sections\ are\ known\ as\ "{}condition\ critical"{}}}
\DoxyCodeLine{00670\ \textcolor{comment}{//\ sections.\ To\ use\ a\ \`{}Condition`,\ you\ simply\ need\ to\ construct\ it,\ and\ use}}
\DoxyCodeLine{00671\ \textcolor{comment}{//\ within\ an\ appropriate\ \`{}Mutex`\ member\ function;\ everything\ else\ in\ the}}
\DoxyCodeLine{00672\ \textcolor{comment}{//\ \`{}Condition`\ class\ is\ an\ implementation\ detail.}}
\DoxyCodeLine{00673\ \textcolor{comment}{//}}
\DoxyCodeLine{00674\ \textcolor{comment}{//\ A\ \`{}Condition`\ is\ specified\ as\ a\ function\ pointer\ which\ returns\ a\ boolean.}}
\DoxyCodeLine{00675\ \textcolor{comment}{//\ \`{}Condition`\ functions\ should\ be\ pure\ functions\ -\/-\/\ their\ results\ should\ depend}}
\DoxyCodeLine{00676\ \textcolor{comment}{//\ only\ on\ passed\ arguments,\ should\ not\ consult\ any\ external\ state\ (such\ as}}
\DoxyCodeLine{00677\ \textcolor{comment}{//\ clocks),\ and\ should\ have\ no\ side-\/effects,\ aside\ from\ debug\ logging.\ Any}}
\DoxyCodeLine{00678\ \textcolor{comment}{//\ objects\ that\ the\ function\ may\ access\ should\ be\ limited\ to\ those\ which\ are}}
\DoxyCodeLine{00679\ \textcolor{comment}{//\ constant\ while\ the\ mutex\ is\ blocked\ on\ the\ condition\ (e.g.\ a\ stack\ variable),}}
\DoxyCodeLine{00680\ \textcolor{comment}{//\ or\ objects\ of\ state\ protected\ explicitly\ by\ the\ mutex.}}
\DoxyCodeLine{00681\ \textcolor{comment}{//}}
\DoxyCodeLine{00682\ \textcolor{comment}{//\ No\ matter\ which\ construction\ is\ used\ for\ \`{}Condition`,\ the\ underlying}}
\DoxyCodeLine{00683\ \textcolor{comment}{//\ function\ pointer\ /\ functor\ /\ callable\ must\ not\ throw\ any}}
\DoxyCodeLine{00684\ \textcolor{comment}{//\ exceptions.\ Correctness\ of\ \`{}Mutex`\ /\ \`{}Condition`\ is\ not\ guaranteed\ in}}
\DoxyCodeLine{00685\ \textcolor{comment}{//\ the\ face\ of\ a\ throwing\ \`{}Condition`.\ (When\ Abseil\ is\ allowed\ to\ depend}}
\DoxyCodeLine{00686\ \textcolor{comment}{//\ on\ C++17,\ these\ function\ pointers\ will\ be\ explicitly\ marked}}
\DoxyCodeLine{00687\ \textcolor{comment}{//\ \`{}noexcept`;\ until\ then\ this\ requirement\ cannot\ be\ enforced\ in\ the}}
\DoxyCodeLine{00688\ \textcolor{comment}{//\ type\ system.)}}
\DoxyCodeLine{00689\ \textcolor{comment}{//}}
\DoxyCodeLine{00690\ \textcolor{comment}{//\ Note:\ to\ use\ a\ \`{}Condition`,\ you\ need\ only\ construct\ it\ and\ pass\ it\ to\ a}}
\DoxyCodeLine{00691\ \textcolor{comment}{//\ suitable\ \`{}Mutex'\ member\ function,\ such\ as\ \`{}Mutex::Await()`,\ or\ to\ the}}
\DoxyCodeLine{00692\ \textcolor{comment}{//\ constructor\ of\ one\ of\ the\ scope\ guard\ classes.}}
\DoxyCodeLine{00693\ \textcolor{comment}{//}}
\DoxyCodeLine{00694\ \textcolor{comment}{//\ Example\ using\ LockWhen/Unlock:}}
\DoxyCodeLine{00695\ \textcolor{comment}{//}}
\DoxyCodeLine{00696\ \textcolor{comment}{//\ \ \ //\ assume\ count\_\ is\ not\ internal\ reference\ count}}
\DoxyCodeLine{00697\ \textcolor{comment}{//\ \ \ int\ count\_\ ABSL\_GUARDED\_BY(mu\_);}}
\DoxyCodeLine{00698\ \textcolor{comment}{//\ \ \ Condition\ count\_is\_zero(+[](int\ *count)\ \{\ return\ *count\ ==\ 0;\ \},\ \&count\_);}}
\DoxyCodeLine{00699\ \textcolor{comment}{//}}
\DoxyCodeLine{00700\ \textcolor{comment}{//\ \ \ mu\_.LockWhen(count\_is\_zero);}}
\DoxyCodeLine{00701\ \textcolor{comment}{//\ \ \ //\ ...}}
\DoxyCodeLine{00702\ \textcolor{comment}{//\ \ \ mu\_.Unlock();}}
\DoxyCodeLine{00703\ \textcolor{comment}{//}}
\DoxyCodeLine{00704\ \textcolor{comment}{//\ Example\ using\ a\ scope\ guard:}}
\DoxyCodeLine{00705\ \textcolor{comment}{//}}
\DoxyCodeLine{00706\ \textcolor{comment}{//\ \ \ \{}}
\DoxyCodeLine{00707\ \textcolor{comment}{//\ \ \ \ \ MutexLock\ lock(\&mu\_,\ count\_is\_zero);}}
\DoxyCodeLine{00708\ \textcolor{comment}{//\ \ \ \ \ //\ ...}}
\DoxyCodeLine{00709\ \textcolor{comment}{//\ \ \ \}}}
\DoxyCodeLine{00710\ \textcolor{comment}{//}}
\DoxyCodeLine{00711\ \textcolor{comment}{//\ When\ multiple\ threads\ are\ waiting\ on\ exactly\ the\ same\ condition,\ make\ sure}}
\DoxyCodeLine{00712\ \textcolor{comment}{//\ that\ they\ are\ constructed\ with\ the\ same\ parameters\ (same\ pointer\ to\ function}}
\DoxyCodeLine{00713\ \textcolor{comment}{//\ +\ arg,\ or\ same\ pointer\ to\ object\ +\ method),\ so\ that\ the\ mutex\ implementation}}
\DoxyCodeLine{00714\ \textcolor{comment}{//\ can\ avoid\ redundantly\ evaluating\ the\ same\ condition\ for\ each\ thread.}}
\DoxyCodeLine{00715\ \textcolor{keyword}{class\ }Condition\ \{}
\DoxyCodeLine{00716\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00717\ \ \ \textcolor{comment}{//\ A\ Condition\ that\ returns\ the\ result\ of\ "{}(*func)(arg)"{}}}
\DoxyCodeLine{00718\ \ \ Condition(\textcolor{keywordtype}{bool}\ (*func)(\textcolor{keywordtype}{void}*),\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}});}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \ \ \textcolor{comment}{//\ Templated\ version\ for\ people\ who\ are\ averse\ to\ casts.}}
\DoxyCodeLine{00721\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00722\ \ \ \textcolor{comment}{//\ To\ use\ a\ lambda,\ prepend\ it\ with\ unary\ plus,\ which\ converts\ the\ lambda}}
\DoxyCodeLine{00723\ \ \ \textcolor{comment}{//\ into\ a\ function\ pointer:}}
\DoxyCodeLine{00724\ \ \ \textcolor{comment}{//\ \ \ \ \ Condition(+[](T*\ t)\ \{\ return\ ...;\ \},\ arg).}}
\DoxyCodeLine{00725\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00726\ \ \ \textcolor{comment}{//\ Note:\ lambdas\ in\ this\ case\ must\ contain\ no\ bound\ variables.}}
\DoxyCodeLine{00727\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00728\ \ \ \textcolor{comment}{//\ See\ class\ comment\ for\ performance\ advice.}}
\DoxyCodeLine{00729\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00730\ \ \ Condition(\textcolor{keywordtype}{bool}\ (*func)(T*),\ T*\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}});}
\DoxyCodeLine{00731\ }
\DoxyCodeLine{00732\ \ \ \textcolor{comment}{//\ Same\ as\ above,\ but\ allows\ for\ cases\ where\ \`{}arg`\ comes\ from\ a\ pointer\ that}}
\DoxyCodeLine{00733\ \ \ \textcolor{comment}{//\ is\ convertible\ to\ the\ function\ parameter\ type\ \`{}T*`\ but\ not\ an\ exact\ match.}}
\DoxyCodeLine{00734\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00735\ \ \ \textcolor{comment}{//\ For\ example,\ the\ argument\ might\ be\ \`{}X*`\ but\ the\ function\ takes\ \`{}const\ X*`,}}
\DoxyCodeLine{00736\ \ \ \textcolor{comment}{//\ or\ the\ argument\ might\ be\ \`{}Derived*`\ while\ the\ function\ takes\ \`{}Base*`,\ and}}
\DoxyCodeLine{00737\ \ \ \textcolor{comment}{//\ so\ on\ for\ cases\ where\ the\ argument\ pointer\ can\ be\ implicitly\ converted.}}
\DoxyCodeLine{00738\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00739\ \ \ \textcolor{comment}{//\ Implementation\ notes:\ This\ constructor\ overload\ is\ required\ in\ addition\ to}}
\DoxyCodeLine{00740\ \ \ \textcolor{comment}{//\ the\ one\ above\ to\ allow\ deduction\ of\ \`{}T`\ from\ \`{}arg`\ for\ cases\ such\ as\ where}}
\DoxyCodeLine{00741\ \ \ \textcolor{comment}{//\ a\ function\ template\ is\ passed\ as\ \`{}func`.\ Also,\ the\ dummy\ \`{}typename\ =\ void`}}
\DoxyCodeLine{00742\ \ \ \textcolor{comment}{//\ template\ parameter\ exists\ just\ to\ work\ around\ a\ MSVC\ mangling\ bug.}}
\DoxyCodeLine{00743\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ =\ \textcolor{keywordtype}{void}>}
\DoxyCodeLine{00744\ \ \ Condition(\textcolor{keywordtype}{bool}\ (*func)(T*),}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structabsl_1_1internal_1_1type__identity_aa2411dd75a81d84f04ac1d82155336b7}{absl::internal::type\_identity<T>::type}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}});}
\DoxyCodeLine{00746\ }
\DoxyCodeLine{00747\ \ \ \textcolor{comment}{//\ Templated\ version\ for\ invoking\ a\ method\ that\ returns\ a\ \`{}bool`.}}
\DoxyCodeLine{00748\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00749\ \ \ \textcolor{comment}{//\ \`{}Condition(object,\ \&Class::Method)`\ constructs\ a\ \`{}Condition`\ that\ evaluates}}
\DoxyCodeLine{00750\ \ \ \textcolor{comment}{//\ \`{}object-\/>Method()`.}}
\DoxyCodeLine{00751\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00752\ \ \ \textcolor{comment}{//\ Implementation\ Note:\ \`{}absl::internal::type\_identity`\ is\ used\ to\ allow}}
\DoxyCodeLine{00753\ \ \ \textcolor{comment}{//\ methods\ to\ come\ from\ base\ classes.\ A\ simpler\ signature\ like}}
\DoxyCodeLine{00754\ \ \ \textcolor{comment}{//\ \`{}Condition(T*,\ bool\ (T::*)())`\ does\ not\ suffice.}}
\DoxyCodeLine{00755\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00756\ \ \ Condition(T*\ \textcolor{keywordtype}{object},}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ (\mbox{\hyperlink{structabsl_1_1internal_1_1type__identity_aa2411dd75a81d84f04ac1d82155336b7}{absl::internal::type\_identity<T>::type}}::*method)());}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00759\ \ \ \textcolor{comment}{//\ Same\ as\ above,\ for\ const\ members}}
\DoxyCodeLine{00760\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00761\ \ \ Condition(\textcolor{keyword}{const}\ T*\ \textcolor{keywordtype}{object},}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ (\mbox{\hyperlink{structabsl_1_1internal_1_1type__identity_aa2411dd75a81d84f04ac1d82155336b7}{absl::internal::type\_identity<T>::type}}::*method)()\ \textcolor{keyword}{const});}
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00764\ \ \ \textcolor{comment}{//\ A\ Condition\ that\ returns\ the\ value\ of\ \`{}*cond`}}
\DoxyCodeLine{00765\ \ \ \textcolor{keyword}{explicit}\ Condition(\textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}*\ cond);}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00767\ \ \ \textcolor{comment}{//\ Templated\ version\ for\ invoking\ a\ functor\ that\ returns\ a\ \`{}bool`.}}
\DoxyCodeLine{00768\ \ \ \textcolor{comment}{//\ This\ approach\ accepts\ pointers\ to\ non-\/mutable\ lambdas,\ \`{}std::function`,}}
\DoxyCodeLine{00769\ \ \ \textcolor{comment}{//\ the\ result\ of`\ std::bind`\ and\ user-\/defined\ functors\ that\ define}}
\DoxyCodeLine{00770\ \ \ \textcolor{comment}{//\ \`{}bool\ F::operator()()\ const`.}}
\DoxyCodeLine{00771\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00772\ \ \ \textcolor{comment}{//\ Example:}}
\DoxyCodeLine{00773\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00774\ \ \ \textcolor{comment}{//\ \ \ auto\ reached\ =\ [this,\ current]()\ \{}}
\DoxyCodeLine{00775\ \ \ \textcolor{comment}{//\ \ \ \ \ mu\_.AssertReaderHeld();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ For\ annotalysis.}}
\DoxyCodeLine{00776\ \ \ \textcolor{comment}{//\ \ \ \ \ return\ processed\_\ >=\ current;}}
\DoxyCodeLine{00777\ \ \ \textcolor{comment}{//\ \ \ \};}}
\DoxyCodeLine{00778\ \ \ \textcolor{comment}{//\ \ \ mu\_.Await(Condition(\&reached));}}
\DoxyCodeLine{00779\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00780\ \ \ \textcolor{comment}{//\ NOTE:\ never\ use\ "{}mu\_.AssertHeld()"{}\ instead\ of\ "{}mu\_.AssertReaderHeld()"{}\ in}}
\DoxyCodeLine{00781\ \ \ \textcolor{comment}{//\ the\ lambda\ as\ it\ may\ be\ called\ when\ the\ mutex\ is\ being\ unlocked\ from\ a}}
\DoxyCodeLine{00782\ \ \ \textcolor{comment}{//\ scope\ holding\ only\ a\ reader\ lock,\ which\ will\ make\ the\ assertion\ not}}
\DoxyCodeLine{00783\ \ \ \textcolor{comment}{//\ fulfilled\ and\ crash\ the\ binary.}}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00785\ \ \ \textcolor{comment}{//\ See\ class\ comment\ for\ performance\ advice.\ In\ particular,\ if\ there}}
\DoxyCodeLine{00786\ \ \ \textcolor{comment}{//\ might\ be\ more\ than\ one\ waiter\ for\ the\ same\ condition,\ make\ sure}}
\DoxyCodeLine{00787\ \ \ \textcolor{comment}{//\ that\ all\ waiters\ construct\ the\ condition\ with\ the\ same\ pointers.}}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \ \ \textcolor{comment}{//\ Implementation\ note:\ The\ second\ template\ parameter\ ensures\ that\ this}}
\DoxyCodeLine{00790\ \ \ \textcolor{comment}{//\ constructor\ doesn't\ participate\ in\ overload\ resolution\ if\ T\ doesn't\ have}}
\DoxyCodeLine{00791\ \ \ \textcolor{comment}{//\ \`{}bool\ operator()\ const`.}}
\DoxyCodeLine{00792\ \ \ template\ <typename\ T,\ typename\ E\ =\ decltype(static\_cast<bool\ (T::*)()\ const>(}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&T::operator()))>}
\DoxyCodeLine{00794\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1Condition_a194e8f1d77142b5cc1088a67f573e20b}{Condition}}(\textcolor{keyword}{const}\ T*\ obj)}
\DoxyCodeLine{00795\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}(obj,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{bool}\ (T::*)()\ const\textcolor{keyword}{>}(\&T::operator()))\ \{\}}
\DoxyCodeLine{00796\ }
\DoxyCodeLine{00797\ \ \ \textcolor{comment}{//\ A\ Condition\ that\ always\ returns\ \`{}true`.}}
\DoxyCodeLine{00798\ \ \ \textcolor{comment}{//\ kTrue\ is\ only\ useful\ in\ a\ narrow\ set\ of\ circumstances,\ mostly\ when}}
\DoxyCodeLine{00799\ \ \ \textcolor{comment}{//\ it's\ passed\ conditionally.\ For\ example:}}
\DoxyCodeLine{00800\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00801\ \ \ \textcolor{comment}{//\ \ \ mu.LockWhen(some\_flag\ ?\ kTrue\ :\ SomeOtherCondition);}}
\DoxyCodeLine{00802\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00803\ \ \ \textcolor{comment}{//\ Note:\ \{LockWhen,Await\}With\{Deadline,Timeout\}\ methods\ with\ kTrue\ condition}}
\DoxyCodeLine{00804\ \ \ \textcolor{comment}{//\ don't\ return\ immediately\ when\ the\ timeout\ happens,\ they\ still\ block\ until}}
\DoxyCodeLine{00805\ \ \ \textcolor{comment}{//\ the\ Mutex\ becomes\ available.\ The\ return\ value\ of\ these\ methods\ does}}
\DoxyCodeLine{00806\ \ \ \textcolor{comment}{//\ not\ indicate\ if\ the\ timeout\ was\ reached;\ rather\ it\ indicates\ whether\ or}}
\DoxyCodeLine{00807\ \ \ \textcolor{comment}{//\ not\ the\ condition\ is\ true.}}
\DoxyCodeLine{00808\ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_a0960184d4a72f445953241f1c5a30bb2}{ABSL\_CONST\_INIT}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\ \mbox{\hyperlink{classabsl_1_1Condition_ad76841aff0c0986c92e1cacbef4132d3}{kTrue}};}
\DoxyCodeLine{00809\ }
\DoxyCodeLine{00810\ \ \ \textcolor{comment}{//\ Evaluates\ the\ condition.}}
\DoxyCodeLine{00811\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Condition_ad991fc6f2775407f452358e80c82bcdd}{Eval}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00813\ \ \ \textcolor{comment}{//\ Returns\ \`{}true`\ if\ the\ two\ conditions\ are\ guaranteed\ to\ return\ the\ same}}
\DoxyCodeLine{00814\ \ \ \textcolor{comment}{//\ value\ if\ evaluated\ at\ the\ same\ time,\ \`{}false`\ if\ the\ evaluation\ *may*\ return}}
\DoxyCodeLine{00815\ \ \ \textcolor{comment}{//\ different\ results.}}
\DoxyCodeLine{00816\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00817\ \ \ \textcolor{comment}{//\ Two\ \`{}Condition`\ values\ are\ guaranteed\ equal\ if\ both\ their\ \`{}func`\ and\ \`{}arg`}}
\DoxyCodeLine{00818\ \ \ \textcolor{comment}{//\ components\ are\ the\ same.\ A\ null\ pointer\ is\ equivalent\ to\ a\ \`{}true`}}
\DoxyCodeLine{00819\ \ \ \textcolor{comment}{//\ condition.}}
\DoxyCodeLine{00820\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1Condition_a968b50df7f27c6764f6b9978ef0c3959}{GuaranteedEqual}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}*\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca0cc175b9c0f1b6a831c399e269772661}{a}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2layout__test_8cc_ad66453096871179e6c6effe0df4b483b}{b}});}
\DoxyCodeLine{00821\ }
\DoxyCodeLine{00822\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00823\ \ \ \textcolor{comment}{//\ Sizing\ an\ allocation\ for\ a\ method\ pointer\ can\ be\ subtle.\ In\ the\ Itanium}}
\DoxyCodeLine{00824\ \ \ \textcolor{comment}{//\ specifications,\ a\ method\ pointer\ has\ a\ predictable,\ uniform\ size.\ On\ the}}
\DoxyCodeLine{00825\ \ \ \textcolor{comment}{//\ other\ hand,\ MSVC\ ABI,\ method\ pointer\ sizes\ vary\ based\ on\ the}}
\DoxyCodeLine{00826\ \ \ \textcolor{comment}{//\ inheritance\ of\ the\ class.\ Specifically,\ method\ pointers\ from\ classes\ with}}
\DoxyCodeLine{00827\ \ \ \textcolor{comment}{//\ multiple\ inheritance\ are\ bigger\ than\ those\ of\ classes\ with\ single}}
\DoxyCodeLine{00828\ \ \ \textcolor{comment}{//\ inheritance.\ Other\ variations\ also\ exist.}}
\DoxyCodeLine{00829\ }
\DoxyCodeLine{00830\ \textcolor{preprocessor}{\#ifndef\ \_MSC\_VER}}
\DoxyCodeLine{00831\ \ \ \textcolor{comment}{//\ Allocation\ for\ a\ function\ pointer\ or\ method\ pointer.}}
\DoxyCodeLine{00832\ \ \ \textcolor{comment}{//\ The\ \{0\}\ initializer\ ensures\ that\ all\ unused\ bytes\ of\ this\ buffer\ are}}
\DoxyCodeLine{00833\ \ \ \textcolor{comment}{//\ always\ zeroed\ out.\ \ This\ is\ necessary,\ because\ GuaranteedEqual()\ compares}}
\DoxyCodeLine{00834\ \ \ \textcolor{comment}{//\ all\ of\ the\ bytes,\ unaware\ of\ which\ bytes\ are\ relevant\ to\ a\ given\ \`{}eval\_`.}}
\DoxyCodeLine{00835\ \ \ \textcolor{keyword}{using\ }MethodPtr\ =\ bool\ (\mbox{\hyperlink{classabsl_1_1Condition}{Condition}}::*)();}
\DoxyCodeLine{00836\ \ \ \textcolor{keywordtype}{char}\ callback\_[\textcolor{keyword}{sizeof}(MethodPtr)]\ =\ \{0\};}
\DoxyCodeLine{00837\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00838\ \ \ \textcolor{comment}{//\ It\ is\ well\ known\ that\ the\ larget\ MSVC\ pointer-\/to-\/member\ is\ 24\ bytes.\ This}}
\DoxyCodeLine{00839\ \ \ \textcolor{comment}{//\ may\ be\ the\ largest\ known\ pointer-\/to-\/member\ of\ any\ platform.\ For\ this}}
\DoxyCodeLine{00840\ \ \ \textcolor{comment}{//\ reason\ we\ will\ allocate\ 24\ bytes\ for\ MSVC\ platform\ toolchains.}}
\DoxyCodeLine{00841\ \ \ \textcolor{keywordtype}{char}\ callback\_[24]\ =\ \{0\};}
\DoxyCodeLine{00842\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00843\ }
\DoxyCodeLine{00844\ \ \ \textcolor{comment}{//\ Function\ with\ which\ to\ evaluate\ callbacks\ and/or\ arguments.}}
\DoxyCodeLine{00845\ \ \ bool\ (*eval\_)(\textcolor{keyword}{const}\ Condition*)\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00846\ }
\DoxyCodeLine{00847\ \ \ \textcolor{comment}{//\ Either\ an\ argument\ for\ a\ function\ call\ or\ an\ object\ for\ a\ method\ call.}}
\DoxyCodeLine{00848\ \ \ \textcolor{keywordtype}{void}*\ arg\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00849\ }
\DoxyCodeLine{00850\ \ \ \textcolor{comment}{//\ Various\ functions\ eval\_\ can\ point\ to:}}
\DoxyCodeLine{00851\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ CallVoidPtrFunction(\textcolor{keyword}{const}\ Condition*);}
\DoxyCodeLine{00852\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00853\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ CastAndCallFunction(\textcolor{keyword}{const}\ Condition*\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca4a8a08f09d37b73795649038408b5f33}{c}});}
\DoxyCodeLine{00854\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ ConditionMethodPtr>}
\DoxyCodeLine{00855\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ CastAndCallMethod(\textcolor{keyword}{const}\ Condition*\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca4a8a08f09d37b73795649038408b5f33}{c}});}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \ \ \textcolor{comment}{//\ Helper\ methods\ for\ storing,\ validating,\ and\ reading\ callback\ arguments.}}
\DoxyCodeLine{00858\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00859\ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ StoreCallback(T\ callback)\ \{}
\DoxyCodeLine{00860\ \ \ \ \ \textcolor{keyword}{static\_assert}(}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(callback)\ <=\ \textcolor{keyword}{sizeof}(callback\_),}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}An\ overlarge\ pointer\ was\ passed\ as\ a\ callback\ to\ Condition."{}});}
\DoxyCodeLine{00863\ \ \ \ \ std::memcpy(callback\_,\ \&callback,\ \textcolor{keyword}{sizeof}(callback));}
\DoxyCodeLine{00864\ \ \ \}}
\DoxyCodeLine{00865\ }
\DoxyCodeLine{00866\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00867\ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ ReadCallback(T*\ callback)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00868\ \ \ \ \ std::memcpy(callback,\ callback\_,\ \textcolor{keyword}{sizeof}(*callback));}
\DoxyCodeLine{00869\ \ \ \}}
\DoxyCodeLine{00870\ }
\DoxyCodeLine{00871\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ AlwaysTrue(\textcolor{keyword}{const}\ Condition*)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00872\ }
\DoxyCodeLine{00873\ \ \ \textcolor{comment}{//\ Used\ only\ to\ create\ kTrue.}}
\DoxyCodeLine{00874\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classabsl_1_1Condition_a7eb18e3892d35e293febae9571ec46e5}{Condition}}()\ :\ eval\_(AlwaysTrue),\ arg\_(nullptr)\ \{\}}
\DoxyCodeLine{00875\ \};}
\DoxyCodeLine{00876\ }
\DoxyCodeLine{00877\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00878\ \textcolor{comment}{//\ CondVar}}
\DoxyCodeLine{00879\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00880\ \textcolor{comment}{//}}
\DoxyCodeLine{00881\ \textcolor{comment}{//\ A\ condition\ variable,\ reflecting\ state\ evaluated\ separately\ outside\ of\ the}}
\DoxyCodeLine{00882\ \textcolor{comment}{//\ \`{}Mutex`\ object,\ which\ can\ be\ signaled\ to\ wake\ callers.}}
\DoxyCodeLine{00883\ \textcolor{comment}{//\ This\ class\ is\ not\ normally\ needed;\ use\ \`{}Mutex`\ member\ functions\ such\ as}}
\DoxyCodeLine{00884\ \textcolor{comment}{//\ \`{}Mutex::Await()`\ and\ intrinsic\ \`{}Condition`\ abstractions.\ In\ rare\ cases}}
\DoxyCodeLine{00885\ \textcolor{comment}{//\ with\ many\ threads\ and\ many\ conditions,\ \`{}CondVar`\ may\ be\ faster.}}
\DoxyCodeLine{00886\ \textcolor{comment}{//}}
\DoxyCodeLine{00887\ \textcolor{comment}{//\ The\ implementation\ may\ deliver\ signals\ to\ any\ condition\ variable\ at}}
\DoxyCodeLine{00888\ \textcolor{comment}{//\ any\ time,\ even\ when\ no\ call\ to\ \`{}Signal()`\ or\ \`{}SignalAll()`\ is\ made;\ as\ a}}
\DoxyCodeLine{00889\ \textcolor{comment}{//\ result,\ upon\ being\ awoken,\ you\ must\ check\ the\ logical\ condition\ you\ have}}
\DoxyCodeLine{00890\ \textcolor{comment}{//\ been\ waiting\ upon.}}
\DoxyCodeLine{00891\ \textcolor{comment}{//}}
\DoxyCodeLine{00892\ \textcolor{comment}{//\ Examples:}}
\DoxyCodeLine{00893\ \textcolor{comment}{//}}
\DoxyCodeLine{00894\ \textcolor{comment}{//\ Usage\ for\ a\ thread\ waiting\ for\ some\ condition\ C\ protected\ by\ mutex\ mu:}}
\DoxyCodeLine{00895\ \textcolor{comment}{//\ \ \ \ \ \ \ mu.Lock();}}
\DoxyCodeLine{00896\ \textcolor{comment}{//\ \ \ \ \ \ \ while\ (!C)\ \{\ cv-\/>Wait(\&mu);\ \}\ \ \ \ \ \ \ \ //\ releases\ and\ reacquires\ mu}}
\DoxyCodeLine{00897\ \textcolor{comment}{//\ \ \ \ \ \ \ //\ \ C\ holds;\ process\ data}}
\DoxyCodeLine{00898\ \textcolor{comment}{//\ \ \ \ \ \ \ mu.Unlock();}}
\DoxyCodeLine{00899\ \textcolor{comment}{//}}
\DoxyCodeLine{00900\ \textcolor{comment}{//\ Usage\ to\ wake\ T\ is:}}
\DoxyCodeLine{00901\ \textcolor{comment}{//\ \ \ \ \ \ \ mu.Lock();}}
\DoxyCodeLine{00902\ \textcolor{comment}{//\ \ \ \ \ \ \ //\ process\ data,\ possibly\ establishing\ C}}
\DoxyCodeLine{00903\ \textcolor{comment}{//\ \ \ \ \ \ \ if\ (C)\ \{\ cv-\/>Signal();\ \}}}
\DoxyCodeLine{00904\ \textcolor{comment}{//\ \ \ \ \ \ \ mu.Unlock();}}
\DoxyCodeLine{00905\ \textcolor{comment}{//}}
\DoxyCodeLine{00906\ \textcolor{comment}{//\ If\ C\ may\ be\ useful\ to\ more\ than\ one\ waiter,\ use\ \`{}SignalAll()`\ instead\ of}}
\DoxyCodeLine{00907\ \textcolor{comment}{//\ \`{}Signal()`.}}
\DoxyCodeLine{00908\ \textcolor{comment}{//}}
\DoxyCodeLine{00909\ \textcolor{comment}{//\ With\ this\ implementation\ it\ is\ efficient\ to\ use\ \`{}Signal()/SignalAll()`\ inside}}
\DoxyCodeLine{00910\ \textcolor{comment}{//\ the\ locked\ region;\ this\ usage\ can\ make\ reasoning\ about\ your\ program\ easier.}}
\DoxyCodeLine{00911\ \textcolor{comment}{//}}
\DoxyCodeLine{00912\ \textcolor{keyword}{class\ }CondVar\ \{}
\DoxyCodeLine{00913\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00914\ \ \ \textcolor{comment}{//\ A\ \`{}CondVar`\ allocated\ on\ the\ heap\ or\ on\ the\ stack\ can\ use\ the\ this}}
\DoxyCodeLine{00915\ \ \ \textcolor{comment}{//\ constructor.}}
\DoxyCodeLine{00916\ \ \ \mbox{\hyperlink{classabsl_1_1CondVar_ab684070acf8815084b13a0a670b9a4c6}{CondVar}}();}
\DoxyCodeLine{00917\ }
\DoxyCodeLine{00918\ \ \ \textcolor{comment}{//\ CondVar::Wait()}}
\DoxyCodeLine{00919\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00920\ \ \ \textcolor{comment}{//\ Atomically\ releases\ a\ \`{}Mutex`\ and\ blocks\ on\ this\ condition\ variable.}}
\DoxyCodeLine{00921\ \ \ \textcolor{comment}{//\ Waits\ until\ awakened\ by\ a\ call\ to\ \`{}Signal()`\ or\ \`{}SignalAll()`\ (or\ a}}
\DoxyCodeLine{00922\ \ \ \textcolor{comment}{//\ spurious\ wakeup),\ then\ reacquires\ the\ \`{}Mutex`\ and\ returns.}}
\DoxyCodeLine{00923\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00924\ \ \ \textcolor{comment}{//\ Requires\ and\ ensures\ that\ the\ current\ thread\ holds\ the\ \`{}Mutex`.}}
\DoxyCodeLine{00925\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1CondVar_abca9598ea9842c3b482c0dd2aa552665}{Wait}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu)\ \{}
\DoxyCodeLine{00926\ \ \ \ \ WaitCommon(mu,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout_af3b55c70a385668499cc2b22afe3303d}{synchronization\_internal::KernelTimeout::Never}}());}
\DoxyCodeLine{00927\ \ \ \}}
\DoxyCodeLine{00928\ }
\DoxyCodeLine{00929\ \ \ \textcolor{comment}{//\ CondVar::WaitWithTimeout()}}
\DoxyCodeLine{00930\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00931\ \ \ \textcolor{comment}{//\ Atomically\ releases\ a\ \`{}Mutex`\ and\ blocks\ on\ this\ condition\ variable.}}
\DoxyCodeLine{00932\ \ \ \textcolor{comment}{//\ Waits\ until\ awakened\ by\ a\ call\ to\ \`{}Signal()`\ or\ \`{}SignalAll()`\ (or\ a}}
\DoxyCodeLine{00933\ \ \ \textcolor{comment}{//\ spurious\ wakeup),\ or\ until\ the\ timeout\ has\ expired,\ then\ reacquires}}
\DoxyCodeLine{00934\ \ \ \textcolor{comment}{//\ the\ \`{}Mutex`\ and\ returns.}}
\DoxyCodeLine{00935\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00936\ \ \ \textcolor{comment}{//\ Returns\ true\ if\ the\ timeout\ has\ expired\ without\ this\ \`{}CondVar`}}
\DoxyCodeLine{00937\ \ \ \textcolor{comment}{//\ being\ signalled\ in\ any\ manner.\ If\ both\ the\ timeout\ has\ expired}}
\DoxyCodeLine{00938\ \ \ \textcolor{comment}{//\ and\ this\ \`{}CondVar`\ has\ been\ signalled,\ the\ implementation\ is\ free}}
\DoxyCodeLine{00939\ \ \ \textcolor{comment}{//\ to\ return\ \`{}true`\ or\ \`{}false`.}}
\DoxyCodeLine{00940\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00941\ \ \ \textcolor{comment}{//\ Requires\ and\ ensures\ that\ the\ current\ thread\ holds\ the\ \`{}Mutex`.}}
\DoxyCodeLine{00942\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1CondVar_a6fb0cbe675daee09c3749f71b70560a2}{WaitWithTimeout}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \mbox{\hyperlink{classabsl_1_1Duration}{absl::Duration}}\ timeout)\ \{}
\DoxyCodeLine{00943\ \ \ \ \ \textcolor{keywordflow}{return}\ WaitCommon(mu,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}(timeout));}
\DoxyCodeLine{00944\ \ \ \}}
\DoxyCodeLine{00945\ }
\DoxyCodeLine{00946\ \ \ \textcolor{comment}{//\ CondVar::WaitWithDeadline()}}
\DoxyCodeLine{00947\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00948\ \ \ \textcolor{comment}{//\ Atomically\ releases\ a\ \`{}Mutex`\ and\ blocks\ on\ this\ condition\ variable.}}
\DoxyCodeLine{00949\ \ \ \textcolor{comment}{//\ Waits\ until\ awakened\ by\ a\ call\ to\ \`{}Signal()`\ or\ \`{}SignalAll()`\ (or\ a}}
\DoxyCodeLine{00950\ \ \ \textcolor{comment}{//\ spurious\ wakeup),\ or\ until\ the\ deadline\ has\ passed,\ then\ reacquires}}
\DoxyCodeLine{00951\ \ \ \textcolor{comment}{//\ the\ \`{}Mutex`\ and\ returns.}}
\DoxyCodeLine{00952\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00953\ \ \ \textcolor{comment}{//\ Deadlines\ in\ the\ past\ are\ equivalent\ to\ an\ immediate\ deadline.}}
\DoxyCodeLine{00954\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00955\ \ \ \textcolor{comment}{//\ Returns\ true\ if\ the\ deadline\ has\ passed\ without\ this\ \`{}CondVar`}}
\DoxyCodeLine{00956\ \ \ \textcolor{comment}{//\ being\ signalled\ in\ any\ manner.\ If\ both\ the\ deadline\ has\ passed}}
\DoxyCodeLine{00957\ \ \ \textcolor{comment}{//\ and\ this\ \`{}CondVar`\ has\ been\ signalled,\ the\ implementation\ is\ free}}
\DoxyCodeLine{00958\ \ \ \textcolor{comment}{//\ to\ return\ \`{}true`\ or\ \`{}false`.}}
\DoxyCodeLine{00959\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00960\ \ \ \textcolor{comment}{//\ Requires\ and\ ensures\ that\ the\ current\ thread\ holds\ the\ \`{}Mutex`.}}
\DoxyCodeLine{00961\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1CondVar_ad4632dd394a6f28452371df6cc366c30}{WaitWithDeadline}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \mbox{\hyperlink{classabsl_1_1Time}{absl::Time}}\ deadline)\ \{}
\DoxyCodeLine{00962\ \ \ \ \ \textcolor{keywordflow}{return}\ WaitCommon(mu,\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}(deadline));}
\DoxyCodeLine{00963\ \ \ \}}
\DoxyCodeLine{00964\ }
\DoxyCodeLine{00965\ \ \ \textcolor{comment}{//\ CondVar::Signal()}}
\DoxyCodeLine{00966\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00967\ \ \ \textcolor{comment}{//\ Signal\ this\ \`{}CondVar`;\ wake\ at\ least\ one\ waiter\ if\ one\ exists.}}
\DoxyCodeLine{00968\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1CondVar_aef94799e220bcd770657dc8d3eced871}{Signal}}();}
\DoxyCodeLine{00969\ }
\DoxyCodeLine{00970\ \ \ \textcolor{comment}{//\ CondVar::SignalAll()}}
\DoxyCodeLine{00971\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00972\ \ \ \textcolor{comment}{//\ Signal\ this\ \`{}CondVar`;\ wake\ all\ waiters.}}
\DoxyCodeLine{00973\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1CondVar_a223a93405caf0047a7516b2b0309712d}{SignalAll}}();}
\DoxyCodeLine{00974\ }
\DoxyCodeLine{00975\ \ \ \textcolor{comment}{//\ CondVar::EnableDebugLog()}}
\DoxyCodeLine{00976\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00977\ \ \ \textcolor{comment}{//\ Causes\ all\ subsequent\ uses\ of\ this\ \`{}CondVar`\ to\ be\ logged\ via}}
\DoxyCodeLine{00978\ \ \ \textcolor{comment}{//\ \`{}ABSL\_RAW\_LOG(INFO)`.\ Log\ entries\ are\ tagged\ with\ \`{}name`\ if\ \`{}name\ !=\ 0`.}}
\DoxyCodeLine{00979\ \ \ \textcolor{comment}{//\ Note:\ this\ method\ substantially\ reduces\ \`{}CondVar`\ performance.}}
\DoxyCodeLine{00980\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1CondVar_ace0e707776b3c0df8b488a8596ffabdf}{EnableDebugLog}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_ac8b44a387cf3da062c4a32316b43962c}{name}});}
\DoxyCodeLine{00981\ }
\DoxyCodeLine{00982\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00983\ \ \ \textcolor{keywordtype}{bool}\ WaitCommon(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2cordz__handle_8cc_ade5ed16648cf9ca35a2425963b9e3a98}{mutex}},\ \mbox{\hyperlink{classabsl_1_1synchronization__internal_1_1KernelTimeout}{synchronization\_internal::KernelTimeout}}\ \mbox{\hyperlink{namespaceabsl_adb6bd4a9012b471ac01613aff8d4d81bae358efa489f58062f10dd7316b65649e}{t}});}
\DoxyCodeLine{00984\ \ \ \textcolor{keywordtype}{void}\ Remove(\mbox{\hyperlink{structabsl_1_1base__internal_1_1PerThreadSynch}{base\_internal::PerThreadSynch}}*\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}});}
\DoxyCodeLine{00985\ \ \ std::atomic<intptr\_t>\ cv\_;\ \ \textcolor{comment}{//\ Condition\ variable\ state.}}
\DoxyCodeLine{00986\ \ \ \mbox{\hyperlink{classabsl_1_1CondVar_ab684070acf8815084b13a0a670b9a4c6}{CondVar}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1CondVar}{CondVar}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00987\ \ \ \mbox{\hyperlink{classabsl_1_1CondVar}{CondVar}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1CondVar}{CondVar}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00988\ \};}
\DoxyCodeLine{00989\ }
\DoxyCodeLine{00990\ \textcolor{comment}{//\ Variants\ of\ MutexLock.}}
\DoxyCodeLine{00991\ \textcolor{comment}{//}}
\DoxyCodeLine{00992\ \textcolor{comment}{//\ If\ you\ find\ yourself\ using\ one\ of\ these,\ consider\ instead\ using}}
\DoxyCodeLine{00993\ \textcolor{comment}{//\ Mutex::Unlock()\ and/or\ if-\/statements\ for\ clarity.}}
\DoxyCodeLine{00994\ }
\DoxyCodeLine{00995\ \textcolor{comment}{//\ MutexLockMaybe}}
\DoxyCodeLine{00996\ \textcolor{comment}{//}}
\DoxyCodeLine{00997\ \textcolor{comment}{//\ MutexLockMaybe\ is\ like\ MutexLock,\ but\ is\ a\ no-\/op\ when\ mu\ is\ null.}}
\DoxyCodeLine{00998\ \textcolor{keyword}{class\ }\mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a0502f5f517fd77335dd2d5616e760475}{ABSL\_SCOPED\_LOCKABLE}}\ MutexLockMaybe\ \{}
\DoxyCodeLine{00999\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01000\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe_a9916420ed38f836e416789e08b1f908f}{MutexLockMaybe}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}(mu)}
\DoxyCodeLine{01001\ \ \ \ \ \ \ :\ mu\_(mu)\ \{}
\DoxyCodeLine{01002\ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>mu\_\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{01003\ \ \ \ \ \ \ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_ac61c9eb605e6cf06c2a0cb7bd1429278}{Lock}}();}
\DoxyCodeLine{01004\ \ \ \ \ \}}
\DoxyCodeLine{01005\ \ \ \}}
\DoxyCodeLine{01006\ }
\DoxyCodeLine{01007\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe_a6502017ab3097fe1afb5d62967c992d0}{MutexLockMaybe}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}(mu)}
\DoxyCodeLine{01009\ \ \ \ \ \ \ :\ mu\_(mu)\ \{}
\DoxyCodeLine{01010\ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>mu\_\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{01011\ \ \ \ \ \ \ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_a54c8cd01a55337006a4116d6e9cd7739}{LockWhen}}(cond);}
\DoxyCodeLine{01012\ \ \ \ \ \}}
\DoxyCodeLine{01013\ \ \ \}}
\DoxyCodeLine{01014\ }
\DoxyCodeLine{01015\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe_a15aa9b47f7ed37c052456e89c2705456}{\string~MutexLockMaybe}}()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{01016\ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>mu\_\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{01017\ \ \ \ \ \ \ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_af9ac5514cf5fc3e9d2870ff4762bca6d}{Unlock}}();}
\DoxyCodeLine{01018\ \ \ \ \ \}}
\DoxyCodeLine{01019\ \ \ \}}
\DoxyCodeLine{01020\ }
\DoxyCodeLine{01021\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{01022\ \ \ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ \textcolor{keyword}{const}\ mu\_;}
\DoxyCodeLine{01023\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe}{MutexLockMaybe}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe}{MutexLockMaybe}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{01024\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe}{MutexLockMaybe}}(\mbox{\hyperlink{classabsl_1_1MutexLockMaybe}{MutexLockMaybe}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{01025\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe}{MutexLockMaybe}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe}{MutexLockMaybe}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{01026\ \ \ \mbox{\hyperlink{classabsl_1_1MutexLockMaybe}{MutexLockMaybe}}\&\ operator=(\mbox{\hyperlink{classabsl_1_1MutexLockMaybe}{MutexLockMaybe}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{01027\ \};}
\DoxyCodeLine{01028\ }
\DoxyCodeLine{01029\ \textcolor{comment}{//\ ReleasableMutexLock}}
\DoxyCodeLine{01030\ \textcolor{comment}{//}}
\DoxyCodeLine{01031\ \textcolor{comment}{//\ ReleasableMutexLock\ is\ like\ MutexLock,\ but\ permits\ \`{}Release()`\ of\ its}}
\DoxyCodeLine{01032\ \textcolor{comment}{//\ mutex\ before\ destruction.\ \`{}Release()`\ may\ be\ called\ at\ most\ once.}}
\DoxyCodeLine{01033\ \textcolor{keyword}{class\ }\mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a0502f5f517fd77335dd2d5616e760475}{ABSL\_SCOPED\_LOCKABLE}}\ ReleasableMutexLock\ \{}
\DoxyCodeLine{01034\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{01035\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock_a79a9b479b3b687b29172711ce6c46d44}{ReleasableMutexLock}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu)\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}(mu)}
\DoxyCodeLine{01036\ \ \ \ \ \ \ :\ mu\_(mu)\ \{}
\DoxyCodeLine{01037\ \ \ \ \ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_ac61c9eb605e6cf06c2a0cb7bd1429278}{Lock}}();}
\DoxyCodeLine{01038\ \ \ \}}
\DoxyCodeLine{01039\ }
\DoxyCodeLine{01040\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock_a3da97e458e23faa5e5c4cbc2c45d1f50}{ReleasableMutexLock}}(\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}\&\ cond)}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_a5ef3265435b3866ea5028bb5d01ffab2}{ABSL\_EXCLUSIVE\_LOCK\_FUNCTION}}(mu)}
\DoxyCodeLine{01042\ \ \ \ \ \ \ :\ mu\_(mu)\ \{}
\DoxyCodeLine{01043\ \ \ \ \ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_a54c8cd01a55337006a4116d6e9cd7739}{LockWhen}}(cond);}
\DoxyCodeLine{01044\ \ \ \}}
\DoxyCodeLine{01045\ }
\DoxyCodeLine{01046\ \ \ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock_a5afa7fc549d7643d9977289272ade8e4}{\string~ReleasableMutexLock}}()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}()\ \{}
\DoxyCodeLine{01047\ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>mu\_\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{01048\ \ \ \ \ \ \ this-\/>mu\_-\/>\mbox{\hyperlink{classabsl_1_1Mutex_af9ac5514cf5fc3e9d2870ff4762bca6d}{Unlock}}();}
\DoxyCodeLine{01049\ \ \ \ \ \}}
\DoxyCodeLine{01050\ \ \ \}}
\DoxyCodeLine{01051\ }
\DoxyCodeLine{01052\ \ \ \textcolor{keywordtype}{void}\ Release()\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2thread__annotations_8h_af11c78a6616064e59a8938d4ff1f9d53}{ABSL\_UNLOCK\_FUNCTION}}();}
\DoxyCodeLine{01053\ }
\DoxyCodeLine{01054\ \ private:}
\DoxyCodeLine{01055\ \ \ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}*\ mu\_;}
\DoxyCodeLine{01056\ \ \ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock}{ReleasableMutexLock}}(const\ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock}{ReleasableMutexLock}}\&)\ =\ delete;}
\DoxyCodeLine{01057\ \ \ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock}{ReleasableMutexLock}}(\mbox{\hyperlink{classabsl_1_1ReleasableMutexLock}{ReleasableMutexLock}}\&\&)\ =\ delete;}
\DoxyCodeLine{01058\ \ \ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock}{ReleasableMutexLock}}\&\ operator=(const\ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock}{ReleasableMutexLock}}\&)\ =\ delete;}
\DoxyCodeLine{01059\ \ \ \mbox{\hyperlink{classabsl_1_1ReleasableMutexLock}{ReleasableMutexLock}}\&\ operator=(\mbox{\hyperlink{classabsl_1_1ReleasableMutexLock}{ReleasableMutexLock}}\&\&)\ =\ delete;}
\DoxyCodeLine{01060\ \};}
\DoxyCodeLine{01061\ }
\DoxyCodeLine{01062\ inline\ \mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}::\mbox{\hyperlink{classabsl_1_1Mutex}{Mutex}}()\ :\ mu\_(0)\ \{}
\DoxyCodeLine{01063\ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2tsan__mutex__interface_8h_a499e37087989ad3dc690e3d95797ae47}{ABSL\_TSAN\_MUTEX\_CREATE}}(\textcolor{keyword}{this},\ \_\_tsan\_mutex\_not\_static);}
\DoxyCodeLine{01064\ \}}
\DoxyCodeLine{01065\ }
\DoxyCodeLine{01066\ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ Mutex::Mutex(\mbox{\hyperlink{namespaceabsl_aa7e9ebe5aa2498d9d5d26823c49d0bfc}{absl::ConstInitType}})\ :\ mu\_(0)\ \{\}}
\DoxyCodeLine{01067\ }
\DoxyCodeLine{01068\ \textcolor{preprocessor}{\#if\ !defined(\_\_APPLE\_\_)\ \&\&\ !defined(ABSL\_BUILD\_DLL)}}
\DoxyCodeLine{01069\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_a7ec7df4fc698a3c4a0057f08d6fe6ca4}{ABSL\_ATTRIBUTE\_ALWAYS\_INLINE}}}
\DoxyCodeLine{01070\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1Mutex_a94cdf7e7aa216e463f8f1d45b57b9204}{Mutex::\string~Mutex}}()\ \{\ Dtor();\ \}}
\DoxyCodeLine{01071\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01072\ }
\DoxyCodeLine{01073\ \textcolor{preprocessor}{\#if\ defined(NDEBUG)\ \&\&\ !defined(ABSL\_HAVE\_THREAD\_SANITIZER)}}
\DoxyCodeLine{01074\ \textcolor{comment}{//\ Use\ default\ (empty)\ destructor\ in\ release\ build\ for\ performance\ reasons.}}
\DoxyCodeLine{01075\ \textcolor{comment}{//\ We\ need\ to\ mark\ both\ Dtor\ and\ \string~Mutex\ as\ always\ inline\ for\ inconsistent}}
\DoxyCodeLine{01076\ \textcolor{comment}{//\ builds\ that\ use\ both\ NDEBUG\ and\ !NDEBUG\ with\ dynamic\ libraries.\ In\ these}}
\DoxyCodeLine{01077\ \textcolor{comment}{//\ cases\ we\ want\ the\ empty\ functions\ to\ dissolve\ entirely\ rather\ than\ being}}
\DoxyCodeLine{01078\ \textcolor{comment}{//\ exported\ from\ dynamic\ libraries\ and\ potentially\ override\ the\ non-\/empty\ ones.}}
\DoxyCodeLine{01079\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_a7ec7df4fc698a3c4a0057f08d6fe6ca4}{ABSL\_ATTRIBUTE\_ALWAYS\_INLINE}}}
\DoxyCodeLine{01080\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ Mutex::Dtor()\ \{\}}
\DoxyCodeLine{01081\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01082\ }
\DoxyCodeLine{01083\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1CondVar_ab684070acf8815084b13a0a670b9a4c6}{CondVar::CondVar}}()\ :\ cv\_(0)\ \{\}}
\DoxyCodeLine{01084\ }
\DoxyCodeLine{01085\ \textcolor{comment}{//\ static}}
\DoxyCodeLine{01086\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ ConditionMethodPtr>}
\DoxyCodeLine{01087\ \textcolor{keywordtype}{bool}\ Condition::CastAndCallMethod(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}*\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca4a8a08f09d37b73795649038408b5f33}{c}})\ \{}
\DoxyCodeLine{01088\ \ \ T*\ \textcolor{keywordtype}{object}\ =\ \textcolor{keyword}{static\_cast<}T*\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca4a8a08f09d37b73795649038408b5f33}{c}}-\/>arg\_);}
\DoxyCodeLine{01089\ \ \ ConditionMethodPtr\ condition\_method\_pointer;}
\DoxyCodeLine{01090\ \ \ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca4a8a08f09d37b73795649038408b5f33}{c}}-\/>ReadCallback(\&condition\_method\_pointer);}
\DoxyCodeLine{01091\ \ \ \textcolor{keywordflow}{return}\ (object-\/>*condition\_method\_pointer)();}
\DoxyCodeLine{01092\ \}}
\DoxyCodeLine{01093\ }
\DoxyCodeLine{01094\ \textcolor{comment}{//\ static}}
\DoxyCodeLine{01095\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01096\ \textcolor{keywordtype}{bool}\ Condition::CastAndCallFunction(\textcolor{keyword}{const}\ Condition*\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca4a8a08f09d37b73795649038408b5f33}{c}})\ \{}
\DoxyCodeLine{01097\ \ \ bool\ (*function)(T*);}
\DoxyCodeLine{01098\ \ \ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca4a8a08f09d37b73795649038408b5f33}{c}}-\/>ReadCallback(\&function);}
\DoxyCodeLine{01099\ \ \ T*\ argument\ =\ \textcolor{keyword}{static\_cast<}T*\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca4a8a08f09d37b73795649038408b5f33}{c}}-\/>arg\_);}
\DoxyCodeLine{01100\ \ \ \textcolor{keywordflow}{return}\ (*function)(argument);}
\DoxyCodeLine{01101\ \}}
\DoxyCodeLine{01102\ }
\DoxyCodeLine{01103\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01104\ \textcolor{keyword}{inline}\ Condition::Condition(\textcolor{keywordtype}{bool}\ (*func)(T*),\ T*\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}})}
\DoxyCodeLine{01105\ \ \ \ \ :\ eval\_(\&CastAndCallFunction<T>),}
\DoxyCodeLine{01106\ \ \ \ \ \ \ arg\_(const\_cast<void*>(static\_cast<const\ void*>(\mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}})))\ \{}
\DoxyCodeLine{01107\ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(\&func)\ <=\ \textcolor{keyword}{sizeof}(callback\_),}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}An\ overlarge\ function\ pointer\ was\ passed\ to\ Condition."{}});}
\DoxyCodeLine{01109\ \ \ StoreCallback(func);}
\DoxyCodeLine{01110\ \}}
\DoxyCodeLine{01111\ }
\DoxyCodeLine{01112\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}>}
\DoxyCodeLine{01113\ \textcolor{keyword}{inline}\ Condition::Condition(}
\DoxyCodeLine{01114\ \ \ \ \ \textcolor{keywordtype}{bool}\ (*func)(T*),\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structabsl_1_1internal_1_1type__identity_aa2411dd75a81d84f04ac1d82155336b7}{absl::internal::type\_identity<T>::type}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}})}
\DoxyCodeLine{01115\ \ \ \ \ \textcolor{comment}{//\ Just\ delegate\ to\ the\ overload\ above.}}
\DoxyCodeLine{01116\ \ \ \ \ :\ \mbox{\hyperlink{classabsl_1_1Condition}{Condition}}(func,\ \mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}})\ \{\}}
\DoxyCodeLine{01117\ }
\DoxyCodeLine{01118\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01119\ \textcolor{keyword}{inline}\ Condition::Condition(}
\DoxyCodeLine{01120\ \ \ \ \ T*\ \textcolor{keywordtype}{object},\ \textcolor{keywordtype}{bool}\ (\mbox{\hyperlink{structabsl_1_1internal_1_1type__identity_aa2411dd75a81d84f04ac1d82155336b7}{absl::internal::type\_identity<T>::type}}::*method)())}
\DoxyCodeLine{01121\ \ \ \ \ :\ eval\_(\&CastAndCallMethod<T,\ decltype(method)>),\ arg\_(object)\ \{}
\DoxyCodeLine{01122\ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(\&method)\ <=\ \textcolor{keyword}{sizeof}(callback\_),}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}An\ overlarge\ method\ pointer\ was\ passed\ to\ Condition."{}});}
\DoxyCodeLine{01124\ \ \ StoreCallback(method);}
\DoxyCodeLine{01125\ \}}
\DoxyCodeLine{01126\ }
\DoxyCodeLine{01127\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{01128\ \textcolor{keyword}{inline}\ Condition::Condition(}
\DoxyCodeLine{01129\ \ \ \ \ \textcolor{keyword}{const}\ T*\ \textcolor{keywordtype}{object},}
\DoxyCodeLine{01130\ \ \ \ \ \textcolor{keywordtype}{bool}\ (\mbox{\hyperlink{structabsl_1_1internal_1_1type__identity_aa2411dd75a81d84f04ac1d82155336b7}{absl::internal::type\_identity<T>::type}}::*method)()\ \textcolor{keyword}{const})}
\DoxyCodeLine{01131\ \ \ \ \ :\ eval\_(\&CastAndCallMethod<const\ T,\ decltype(method)>),}
\DoxyCodeLine{01132\ \ \ \ \ \ \ arg\_(reinterpret\_cast<void*>(const\_cast<T*>(object)))\ \{}
\DoxyCodeLine{01133\ \ \ StoreCallback(method);}
\DoxyCodeLine{01134\ \}}
\DoxyCodeLine{01135\ }
\DoxyCodeLine{01136\ \textcolor{comment}{//\ Register\ hooks\ for\ profiling\ support.}}
\DoxyCodeLine{01137\ \textcolor{comment}{//}}
\DoxyCodeLine{01138\ \textcolor{comment}{//\ The\ function\ pointer\ registered\ here\ will\ be\ called\ whenever\ a\ mutex\ is}}
\DoxyCodeLine{01139\ \textcolor{comment}{//\ contended.\ \ The\ callback\ is\ given\ the\ cycles\ for\ which\ waiting\ happened\ (as}}
\DoxyCodeLine{01140\ \textcolor{comment}{//\ measured\ by\ //absl/base/internal/cycleclock.h,\ and\ which\ may\ not}}
\DoxyCodeLine{01141\ \textcolor{comment}{//\ be\ real\ "{}cycle"{}\ counts.)}}
\DoxyCodeLine{01142\ \textcolor{comment}{//}}
\DoxyCodeLine{01143\ \textcolor{comment}{//\ There\ is\ no\ ordering\ guarantee\ between\ when\ the\ hook\ is\ registered\ and\ when}}
\DoxyCodeLine{01144\ \textcolor{comment}{//\ callbacks\ will\ begin.\ \ Only\ a\ single\ profiler\ can\ be\ installed\ in\ a\ running}}
\DoxyCodeLine{01145\ \textcolor{comment}{//\ binary;\ if\ this\ function\ is\ called\ a\ second\ time\ with\ a\ different\ function}}
\DoxyCodeLine{01146\ \textcolor{comment}{//\ pointer,\ the\ value\ is\ ignored\ (and\ will\ cause\ an\ assertion\ failure\ in\ debug}}
\DoxyCodeLine{01147\ \textcolor{comment}{//\ mode.)}}
\DoxyCodeLine{01148\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_ad6b5e374a3d7f6deca4ddf8b86dc654c}{RegisterMutexProfiler}}(\textcolor{keywordtype}{void}\ (*fn)(int64\_t\ wait\_cycles));}
\DoxyCodeLine{01149\ }
\DoxyCodeLine{01150\ \textcolor{comment}{//\ Register\ a\ hook\ for\ Mutex\ tracing.}}
\DoxyCodeLine{01151\ \textcolor{comment}{//}}
\DoxyCodeLine{01152\ \textcolor{comment}{//\ The\ function\ pointer\ registered\ here\ will\ be\ called\ whenever\ a\ mutex\ is}}
\DoxyCodeLine{01153\ \textcolor{comment}{//\ contended.\ \ The\ callback\ is\ given\ an\ opaque\ handle\ to\ the\ contended\ mutex,}}
\DoxyCodeLine{01154\ \textcolor{comment}{//\ an\ event\ name,\ and\ the\ number\ of\ wait\ cycles\ (as\ measured\ by}}
\DoxyCodeLine{01155\ \textcolor{comment}{//\ //absl/base/internal/cycleclock.h,\ and\ which\ may\ not\ be\ real}}
\DoxyCodeLine{01156\ \textcolor{comment}{//\ "{}cycle"{}\ counts.)}}
\DoxyCodeLine{01157\ \textcolor{comment}{//}}
\DoxyCodeLine{01158\ \textcolor{comment}{//\ The\ only\ event\ name\ currently\ sent\ is\ "{}slow\ release"{}.}}
\DoxyCodeLine{01159\ \textcolor{comment}{//}}
\DoxyCodeLine{01160\ \textcolor{comment}{//\ This\ has\ the\ same\ ordering\ and\ single-\/use\ limitations\ as}}
\DoxyCodeLine{01161\ \textcolor{comment}{//\ RegisterMutexProfiler()\ above.}}
\DoxyCodeLine{01162\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_a21752cddadba008676394bed736a5cd3}{RegisterMutexTracer}}(\textcolor{keywordtype}{void}\ (*fn)(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{namespaceabsl_a447da94df3ec00fdf05b8dd3c95973f3}{msg}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ obj,}
\DoxyCodeLine{01163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int64\_t\ wait\_cycles));}
\DoxyCodeLine{01164\ }
\DoxyCodeLine{01165\ \textcolor{comment}{//\ Register\ a\ hook\ for\ CondVar\ tracing.}}
\DoxyCodeLine{01166\ \textcolor{comment}{//}}
\DoxyCodeLine{01167\ \textcolor{comment}{//\ The\ function\ pointer\ registered\ here\ will\ be\ called\ here\ on\ various\ CondVar}}
\DoxyCodeLine{01168\ \textcolor{comment}{//\ events.\ \ The\ callback\ is\ given\ an\ opaque\ handle\ to\ the\ CondVar\ object\ and}}
\DoxyCodeLine{01169\ \textcolor{comment}{//\ a\ string\ identifying\ the\ event.\ \ This\ is\ thread-\/safe,\ but\ only\ a\ single}}
\DoxyCodeLine{01170\ \textcolor{comment}{//\ tracer\ can\ be\ registered.}}
\DoxyCodeLine{01171\ \textcolor{comment}{//}}
\DoxyCodeLine{01172\ \textcolor{comment}{//\ Events\ that\ can\ be\ sent\ are\ "{}Wait"{},\ "{}Unwait"{},\ "{}Signal\ wakeup"{},\ and}}
\DoxyCodeLine{01173\ \textcolor{comment}{//\ "{}SignalAll\ wakeup"{}.}}
\DoxyCodeLine{01174\ \textcolor{comment}{//}}
\DoxyCodeLine{01175\ \textcolor{comment}{//\ This\ has\ the\ same\ ordering\ and\ single-\/use\ limitations\ as}}
\DoxyCodeLine{01176\ \textcolor{comment}{//\ RegisterMutexProfiler()\ above.}}
\DoxyCodeLine{01177\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_a230a1a33496fa71b09cbbbf971538e5e}{RegisterCondVarTracer}}(\textcolor{keywordtype}{void}\ (*fn)(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{namespaceabsl_a447da94df3ec00fdf05b8dd3c95973f3}{msg}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ cv));}
\DoxyCodeLine{01178\ }
\DoxyCodeLine{01179\ \textcolor{comment}{//\ EnableMutexInvariantDebugging()}}
\DoxyCodeLine{01180\ \textcolor{comment}{//}}
\DoxyCodeLine{01181\ \textcolor{comment}{//\ Enable\ or\ disable\ global\ support\ for\ Mutex\ invariant\ debugging.\ \ If\ enabled,}}
\DoxyCodeLine{01182\ \textcolor{comment}{//\ then\ invariant\ predicates\ can\ be\ registered\ per-\/Mutex\ for\ debug\ checking.}}
\DoxyCodeLine{01183\ \textcolor{comment}{//\ See\ Mutex::EnableInvariantDebugging().}}
\DoxyCodeLine{01184\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_a40a1a11809899be681d87f1a0aaeedff}{EnableMutexInvariantDebugging}}(\textcolor{keywordtype}{bool}\ enabled);}
\DoxyCodeLine{01185\ }
\DoxyCodeLine{01186\ \textcolor{comment}{//\ When\ in\ debug\ mode,\ and\ when\ the\ feature\ has\ been\ enabled\ globally,\ the}}
\DoxyCodeLine{01187\ \textcolor{comment}{//\ implementation\ will\ keep\ track\ of\ lock\ ordering\ and\ complain\ (or\ optionally}}
\DoxyCodeLine{01188\ \textcolor{comment}{//\ crash)\ if\ a\ cycle\ is\ detected\ in\ the\ acquired-\/before\ graph.}}
\DoxyCodeLine{01189\ }
\DoxyCodeLine{01190\ \textcolor{comment}{//\ Possible\ modes\ of\ operation\ for\ the\ deadlock\ detector\ in\ debug\ mode.}}
\DoxyCodeLine{01191\ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{namespaceabsl_ace75cbec80d8fffd6bf6189e6861f9b3}{OnDeadlockCycle}}\ \{}
\DoxyCodeLine{01192\ \ \ \mbox{\hyperlink{namespaceabsl_ace75cbec80d8fffd6bf6189e6861f9b3aa7c4e68b845afc4ee4dcaf41b0b503e4}{kIgnore}},\ \ \textcolor{comment}{//\ Neither\ report\ on\ nor\ attempt\ to\ track\ cycles\ in\ lock\ ordering}}
\DoxyCodeLine{01193\ \ \ \mbox{\hyperlink{namespaceabsl_ace75cbec80d8fffd6bf6189e6861f9b3a507fb2aefff79a8534f6970f065596cf}{kReport}},\ \ \textcolor{comment}{//\ Report\ lock\ cycles\ to\ stderr\ when\ detected}}
\DoxyCodeLine{01194\ \ \ \mbox{\hyperlink{namespaceabsl_ace75cbec80d8fffd6bf6189e6861f9b3a4bd1defe370d56ac49e5719a12e25f7b}{kAbort}},\ \ \ \textcolor{comment}{//\ Report\ lock\ cycles\ to\ stderr\ when\ detected,\ then\ abort}}
\DoxyCodeLine{01195\ \};}
\DoxyCodeLine{01196\ }
\DoxyCodeLine{01197\ \textcolor{comment}{//\ SetMutexDeadlockDetectionMode()}}
\DoxyCodeLine{01198\ \textcolor{comment}{//}}
\DoxyCodeLine{01199\ \textcolor{comment}{//\ Enable\ or\ disable\ global\ support\ for\ detection\ of\ potential\ deadlocks}}
\DoxyCodeLine{01200\ \textcolor{comment}{//\ due\ to\ Mutex\ lock\ ordering\ inversions.\ \ When\ set\ to\ 'kIgnore',\ tracking\ of}}
\DoxyCodeLine{01201\ \textcolor{comment}{//\ lock\ ordering\ is\ disabled.\ \ Otherwise,\ in\ debug\ builds,\ a\ lock\ ordering\ graph}}
\DoxyCodeLine{01202\ \textcolor{comment}{//\ will\ be\ maintained\ internally,\ and\ detected\ cycles\ will\ be\ reported\ in}}
\DoxyCodeLine{01203\ \textcolor{comment}{//\ the\ manner\ chosen\ here.}}
\DoxyCodeLine{01204\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_aca9e50b511cee10b4e92a90af6245be6}{SetMutexDeadlockDetectionMode}}(\mbox{\hyperlink{namespaceabsl_ace75cbec80d8fffd6bf6189e6861f9b3}{OnDeadlockCycle}}\ mode);}
\DoxyCodeLine{01205\ }
\DoxyCodeLine{01206\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_a49c6cd9be2b7205d48557c9fa90ec5a6}{ABSL\_NAMESPACE\_END}}}
\DoxyCodeLine{01207\ \}\ \ \textcolor{comment}{//\ namespace\ absl}}
\DoxyCodeLine{01208\ }
\DoxyCodeLine{01209\ \textcolor{comment}{//\ In\ some\ build\ configurations\ we\ pass\ -\/-\/detect-\/odr-\/violations\ to\ the}}
\DoxyCodeLine{01210\ \textcolor{comment}{//\ gold\ linker.\ \ This\ causes\ it\ to\ flag\ weak\ symbol\ overrides\ as\ ODR}}
\DoxyCodeLine{01211\ \textcolor{comment}{//\ violations.\ \ Because\ ODR\ only\ applies\ to\ C++\ and\ not\ C,}}
\DoxyCodeLine{01212\ \textcolor{comment}{//\ -\/-\/detect-\/odr-\/violations\ ignores\ symbols\ not\ mangled\ with\ C++\ names.}}
\DoxyCodeLine{01213\ \textcolor{comment}{//\ By\ changing\ our\ extension\ points\ to\ be\ extern\ "{}C"{},\ we\ dodge\ this}}
\DoxyCodeLine{01214\ \textcolor{comment}{//\ check.}}
\DoxyCodeLine{01215\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{01216\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_aeed1805e969005d6b6b50eaed3ef1f68}{ABSL\_INTERNAL\_C\_SYMBOL}}(\mbox{\hyperlink{abseil-cpp_2absl_2synchronization_2mutex_8h_a2e7859251b698b7f36bcb7ea93993395}{AbslInternalMutexYield}})();}
\DoxyCodeLine{01217\ \}\ \ \textcolor{comment}{//\ extern\ "{}C"{}}}
\DoxyCodeLine{01218\ }
\DoxyCodeLine{01219\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ ABSL\_SYNCHRONIZATION\_MUTEX\_H\_}}

\end{DoxyCode}
