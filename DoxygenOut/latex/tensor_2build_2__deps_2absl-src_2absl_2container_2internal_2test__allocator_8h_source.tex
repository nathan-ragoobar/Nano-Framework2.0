\doxysection{test\+\_\+allocator.\+h}
\hypertarget{tensor_2build_2__deps_2absl-src_2absl_2container_2internal_2test__allocator_8h_source}{}\label{tensor_2build_2__deps_2absl-src_2absl_2container_2internal_2test__allocator_8h_source}\index{tensor/build/\_deps/absl-\/src/absl/container/internal/test\_allocator.h@{tensor/build/\_deps/absl-\/src/absl/container/internal/test\_allocator.h}}
\mbox{\hyperlink{tensor_2build_2__deps_2absl-src_2absl_2container_2internal_2test__allocator_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ 2018\ The\ Abseil\ Authors.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ \ \ \ \ \ https://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#ifndef\ ABSL\_CONTAINER\_INTERNAL\_TEST\_ALLOCATOR\_H\_}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ ABSL\_CONTAINER\_INTERNAL\_TEST\_ALLOCATOR\_H\_}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <cassert>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}gtest/gtest.h"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}absl/base/config.h"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceabsl}{absl}}\ \{}
\DoxyCodeLine{00028\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_a1426209ed359f780778edc8975b23f07}{ABSL\_NAMESPACE\_BEGIN}}}
\DoxyCodeLine{00029\ \textcolor{keyword}{namespace\ }container\_internal\ \{}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{//\ This\ is\ a\ stateful\ allocator,\ but\ the\ state\ lives\ outside\ of\ the}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ allocator\ (in\ whatever\ test\ is\ using\ the\ allocator).\ This\ is\ odd}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ but\ helps\ in\ tests\ where\ the\ allocator\ is\ propagated\ into\ nested}}
\DoxyCodeLine{00034\ \textcolor{comment}{//\ containers\ -\/\ that\ chain\ of\ allocators\ uses\ the\ same\ state\ and\ is}}
\DoxyCodeLine{00035\ \textcolor{comment}{//\ thus\ easier\ to\ query\ for\ aggregate\ allocation\ information.}}
\DoxyCodeLine{00036\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator}}\ \{}
\DoxyCodeLine{00038\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00039\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_ab223e6dfa6773404b4c662ba2b1bd5ea}{Allocator}}\ =\ std::allocator<T>;}
\DoxyCodeLine{00040\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_af0816fdf7cf590f53d06ef11dcb7b61f}{AllocatorTraits}}\ =\ std::allocator\_traits<Allocator>;}
\DoxyCodeLine{00041\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a22e3b12eafb622aec36d7bfd3c2bb81e}{value\_type}}\ =\ \textcolor{keyword}{typename}\ AllocatorTraits::value\_type;}
\DoxyCodeLine{00042\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a07358b1cb0ae09da4ba7e32ea9caa09a}{pointer}}\ =\ \textcolor{keyword}{typename}\ AllocatorTraits::pointer;}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_abda3094c4ac0352df9d105419f5a1155}{const\_pointer}}\ =\ \textcolor{keyword}{typename}\ AllocatorTraits::const\_pointer;}
\DoxyCodeLine{00044\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a252138c8c668467442d0856f2a6a17c9}{size\_type}}\ =\ \textcolor{keyword}{typename}\ AllocatorTraits::size\_type;}
\DoxyCodeLine{00045\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a59185713e144d445253a4daa6ae4624f}{difference\_type}}\ =\ \textcolor{keyword}{typename}\ AllocatorTraits::difference\_type;}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_ab50b8254bcbe0169cba1638a7ec67002}{CountingAllocator}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_ae70eee4f409af66c11c4a2d221f2072b}{CountingAllocator}}(int64\_t*\ bytes\_used)\ :\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}(bytes\_used)\ \{\}}
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_afb2f27728749f56b54b28b91e1aae761}{CountingAllocator}}(int64\_t*\ bytes\_used,\ int64\_t*\ instance\_count)}
\DoxyCodeLine{00050\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}(bytes\_used),\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}}(instance\_count)\ \{\}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00053\ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a289304d21f3acc065381d00c83f2bba5}{CountingAllocator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator<U>}}\&\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca9dd4e461268c8034f5c8564e155c67a6}{x}})}
\DoxyCodeLine{00054\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca9dd4e461268c8034f5c8564e155c67a6}{x}}.\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}),\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}}(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca9dd4e461268c8034f5c8564e155c67a6}{x}}.\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}})\ \{\}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a07358b1cb0ae09da4ba7e32ea9caa09a}{pointer}}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_acebb926fce61eb28e4a9f3ad3758aa45}{allocate}}(}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a252138c8c668467442d0856f2a6a17c9}{size\_type}}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}},}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \textcolor{keyword}{typename}\ AllocatorTraits::const\_void\_pointer\ hint\ =\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_ab223e6dfa6773404b4c662ba2b1bd5ea}{Allocator}}\ allocator;}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a07358b1cb0ae09da4ba7e32ea9caa09a}{pointer}}\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_a935adc2e417a61d7eb6f04efb18ba031}{ptr}}\ =\ AllocatorTraits::allocate(allocator,\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}},\ hint);}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ *\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}\ +=\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}}\ *\ \textcolor{keyword}{sizeof}(T);}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_a935adc2e417a61d7eb6f04efb18ba031}{ptr}};}
\DoxyCodeLine{00065\ \ \ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a37eff5c05ae3489e4cb023aa243b9e70}{deallocate}}(\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a07358b1cb0ae09da4ba7e32ea9caa09a}{pointer}}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca83878c91171338902e0fe0fb97a8c47a}{p}},\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a252138c8c668467442d0856f2a6a17c9}{size\_type}}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}})\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_ab223e6dfa6773404b4c662ba2b1bd5ea}{Allocator}}\ allocator;}
\DoxyCodeLine{00069\ \ \ \ \ AllocatorTraits::deallocate(allocator,\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca83878c91171338902e0fe0fb97a8c47a}{p}},\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}});}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ *\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}\ -\/=\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}}\ *\ \textcolor{keyword}{sizeof}(T);}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00076\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_adb5cc093b17d4405719c0ed9d9d98bb3}{construct}}(U*\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca83878c91171338902e0fe0fb97a8c47a}{p}},\ Args\&\&...\ args)\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_ab223e6dfa6773404b4c662ba2b1bd5ea}{Allocator}}\ allocator;}
\DoxyCodeLine{00078\ \ \ \ \ AllocatorTraits::construct(allocator,\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca83878c91171338902e0fe0fb97a8c47a}{p}},\ std::forward<Args>(args)...);}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}}\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ *\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}}\ +=\ 1;}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a4e84cb9ec6b4434d88206e23d5806e0c}{destroy}}(U*\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca83878c91171338902e0fe0fb97a8c47a}{p}})\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_ab223e6dfa6773404b4c662ba2b1bd5ea}{Allocator}}\ allocator;}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//\ Ignore\ GCC\ warning\ bug.}}
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#if\ ABSL\_INTERNAL\_HAVE\_MIN\_GNUC\_VERSION(12,\ 0)}}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wuse-\/after-\/free"{}}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00092\ \ \ \ \ AllocatorTraits::destroy(allocator,\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca83878c91171338902e0fe0fb97a8c47a}{p}});}
\DoxyCodeLine{00093\ \textcolor{preprocessor}{\#if\ ABSL\_INTERNAL\_HAVE\_MIN\_GNUC\_VERSION(12,\ 0)}}
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}}\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ *\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}}\ -\/=\ 1;}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00102\ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_1_1rebind}{rebind}}\ \{}
\DoxyCodeLine{00103\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{other}}\ =\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator<U>}};}
\DoxyCodeLine{00105\ \ \ \};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a2cc982815fac17be908b7917e96379ed}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator}}\&\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca0cc175b9c0f1b6a831c399e269772661}{a}},}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator}}\&\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2layout__test_8cc_ad66453096871179e6c6effe0df4b483b}{b}})\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca0cc175b9c0f1b6a831c399e269772661}{a}}.bytes\_used\_\ ==\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2layout__test_8cc_ad66453096871179e6c6effe0df4b483b}{b}}.bytes\_used\_\ \&\&}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca0cc175b9c0f1b6a831c399e269772661}{a}}.instance\_count\_\ ==\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2layout__test_8cc_ad66453096871179e6c6effe0df4b483b}{b}}.instance\_count\_;}
\DoxyCodeLine{00111\ \ \ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_ad5ffe43943e59e0f8dfed9b6f61868bc}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator}}\&\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca0cc175b9c0f1b6a831c399e269772661}{a}},}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator}}\&\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2layout__test_8cc_ad66453096871179e6c6effe0df4b483b}{b}})\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{return}\ !(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca0cc175b9c0f1b6a831c399e269772661}{a}}\ ==\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2layout__test_8cc_ad66453096871179e6c6effe0df4b483b}{b}});}
\DoxyCodeLine{00116\ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ int64\_t*\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00119\ \ \ int64\_t*\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00120\ \};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00123\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1CopyAssignPropagatingCountingAlloc}{CopyAssignPropagatingCountingAlloc}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator}}<T>\ \{}
\DoxyCodeLine{00124\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1CopyAssignPropagatingCountingAlloc_a0e7ab81b3ce97d9b2c9624814f8b9e9c}{propagate\_on\_container\_copy\_assignment}}\ =\ std::true\_type;}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{Base}}\ =\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator<T>}};}
\DoxyCodeLine{00127\ \ \ \textcolor{keyword}{using\ }Base::Base;}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00130\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1CopyAssignPropagatingCountingAlloc_a37719fe061f31a2c1fabf0362a71a91e}{CopyAssignPropagatingCountingAlloc}}(}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1CopyAssignPropagatingCountingAlloc}{CopyAssignPropagatingCountingAlloc<U>}}\&\ other)}
\DoxyCodeLine{00132\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{Base}}(other.\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}},\ other.\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}})\ \{\}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00135\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1CopyAssignPropagatingCountingAlloc_1_1rebind}{rebind}}\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1CopyAssignPropagatingCountingAlloc}{other}}\ =\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1CopyAssignPropagatingCountingAlloc}{CopyAssignPropagatingCountingAlloc<U>}};}
\DoxyCodeLine{00137\ \ \ \};}
\DoxyCodeLine{00138\ \};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00141\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1MoveAssignPropagatingCountingAlloc}{MoveAssignPropagatingCountingAlloc}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator}}<T>\ \{}
\DoxyCodeLine{00142\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1MoveAssignPropagatingCountingAlloc_a16c68a2f5404531da28ff7bbb2c1a255}{propagate\_on\_container\_move\_assignment}}\ =\ std::true\_type;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{Base}}\ =\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator<T>}};}
\DoxyCodeLine{00145\ \ \ \textcolor{keyword}{using\ }Base::Base;}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00148\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MoveAssignPropagatingCountingAlloc_ae9dedca02dec24a0a4c10f283f774d80}{MoveAssignPropagatingCountingAlloc}}(}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MoveAssignPropagatingCountingAlloc}{MoveAssignPropagatingCountingAlloc<U>}}\&\ other)}
\DoxyCodeLine{00150\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{Base}}(other.\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}},\ other.\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}})\ \{\}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00153\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1MoveAssignPropagatingCountingAlloc_1_1rebind}{rebind}}\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1MoveAssignPropagatingCountingAlloc}{other}}\ =\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MoveAssignPropagatingCountingAlloc}{MoveAssignPropagatingCountingAlloc<U>}};}
\DoxyCodeLine{00155\ \ \ \};}
\DoxyCodeLine{00156\ \};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00159\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1SwapPropagatingCountingAlloc}{SwapPropagatingCountingAlloc}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator}}<T>\ \{}
\DoxyCodeLine{00160\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1SwapPropagatingCountingAlloc_aae03677c6f04e29a084c89f77025d2d7}{propagate\_on\_container\_swap}}\ =\ std::true\_type;}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{Base}}\ =\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{CountingAllocator<T>}};}
\DoxyCodeLine{00163\ \ \ \textcolor{keyword}{using\ }Base::Base;}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00166\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1SwapPropagatingCountingAlloc_ac37bb98c4c89e8d0149cea1874439e86}{SwapPropagatingCountingAlloc}}(}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1SwapPropagatingCountingAlloc}{SwapPropagatingCountingAlloc<U>}}\&\ other)}
\DoxyCodeLine{00168\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator}{Base}}(other.\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a1256716d3f966fe1b43a33ffd45862b1}{bytes\_used\_}},\ other.\mbox{\hyperlink{classabsl_1_1container__internal_1_1CountingAllocator_a8490e0dbc8d0ed2f79a70294b8916ecf}{instance\_count\_}})\ \{\}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00171\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1SwapPropagatingCountingAlloc_1_1rebind}{rebind}}\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1SwapPropagatingCountingAlloc}{other}}\ =\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1SwapPropagatingCountingAlloc}{SwapPropagatingCountingAlloc<U>}};}
\DoxyCodeLine{00173\ \ \ \};}
\DoxyCodeLine{00174\ \};}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \textcolor{comment}{//\ Tries\ to\ allocate\ memory\ at\ the\ minimum\ alignment\ even\ when\ the\ default}}
\DoxyCodeLine{00177\ \textcolor{comment}{//\ allocator\ uses\ a\ higher\ alignment.}}
\DoxyCodeLine{00178\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00179\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc}{MinimumAlignmentAlloc}}\ :\ std::allocator<T>\ \{}
\DoxyCodeLine{00180\ \ \ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc_ac3c1118da3b6c709084284bdb54687ea}{MinimumAlignmentAlloc}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00183\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc_aa0e7468e21db8c1a22ca773e338b8181}{MinimumAlignmentAlloc}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc}{MinimumAlignmentAlloc<U>}}\&\ \textcolor{comment}{/*other*/})\ \{\}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ U>}
\DoxyCodeLine{00186\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc_1_1rebind}{rebind}}\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc}{other}}\ =\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc}{MinimumAlignmentAlloc<U>}};}
\DoxyCodeLine{00188\ \ \ \};}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ T*\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc_af75ddf3c26a4de40ab9e7219922fcbc4}{allocate}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}})\ \{}
\DoxyCodeLine{00191\ \ \ \ \ T*\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_a935adc2e417a61d7eb6f04efb18ba031}{ptr}}\ =\ std::allocator<T>::allocate(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}}\ +\ 1);}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordtype}{char}*\ cptr\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_a935adc2e417a61d7eb6f04efb18ba031}{ptr}});}
\DoxyCodeLine{00193\ \ \ \ \ cptr\ +=\ \textcolor{keyword}{alignof}(T);}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}T*\textcolor{keyword}{>}(cptr);}
\DoxyCodeLine{00195\ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structabsl_1_1container__internal_1_1MinimumAlignmentAlloc_a3d451abf3960e1ca1e7254140fe48a28}{deallocate}}(T*\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_a935adc2e417a61d7eb6f04efb18ba031}{ptr}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}})\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordtype}{char}*\ cptr\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_a935adc2e417a61d7eb6f04efb18ba031}{ptr}});}
\DoxyCodeLine{00199\ \ \ \ \ cptr\ -\/=\ \textcolor{keyword}{alignof}(T);}
\DoxyCodeLine{00200\ \ \ \ \ std::allocator<T>::deallocate(\textcolor{keyword}{reinterpret\_cast<}T*\textcolor{keyword}{>}(cptr),\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}}\ +\ 1);}
\DoxyCodeLine{00201\ \ \ \}}
\DoxyCodeLine{00202\ \};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceabsl_1_1container__internal_a6f53ef0e48bfa1179aa4841d28ed8ce0}{IsAssertEnabled}}()\ \{}
\DoxyCodeLine{00205\ \ \ \textcolor{comment}{//\ Use\ an\ assert\ with\ side-\/effects\ to\ figure\ out\ if\ they\ are\ actually\ enabled.}}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordtype}{bool}\ assert\_enabled\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00207\ \ \ assert([\&]()\ \{\ \ \textcolor{comment}{//\ NOLINT}}
\DoxyCodeLine{00208\ \ \ \ \ assert\_enabled\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00210\ \ \ \}());}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{return}\ assert\_enabled;}
\DoxyCodeLine{00212\ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \textcolor{keyword}{template}\ <\textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Alloc>\ \textcolor{keyword}{class\ }Container>}
\DoxyCodeLine{00215\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_1_1container__internal_af8cf254a8c7d82047f83db9c7e01f1af}{TestCopyAssignAllocPropagation}}()\ \{}
\DoxyCodeLine{00216\ \ \ \mbox{\hyperlink{namespaceEigen_1_1numext_a518baced025fde474407c95f9a84d6e1}{int64\_t}}\ bytes1\ =\ 0,\ instances1\ =\ 0,\ bytes2\ =\ 0,\ instances2\ =\ 0;}
\DoxyCodeLine{00217\ \ \ CopyAssignPropagatingCountingAlloc<int>\ allocator1(\&bytes1,\ \&instances1);}
\DoxyCodeLine{00218\ \ \ CopyAssignPropagatingCountingAlloc<int>\ allocator2(\&bytes2,\ \&instances2);}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \textcolor{comment}{//\ Test\ propagating\ allocator\_type.}}
\DoxyCodeLine{00221\ \ \ \{}
\DoxyCodeLine{00222\ \ \ \ \ Container<CopyAssignPropagatingCountingAlloc<int>>\ c1(allocator1);}
\DoxyCodeLine{00223\ \ \ \ \ Container<CopyAssignPropagatingCountingAlloc<int>>\ c2(allocator2);}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 100;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ c1.insert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}});}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ EXPECT\_NE(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00228\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00229\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ c2\ =\ c1;}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00234\ \ \ \ \ EXPECT\_EQ(instances1,\ 200);}
\DoxyCodeLine{00235\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00236\ \ \ \}}
\DoxyCodeLine{00237\ \ \ \textcolor{comment}{//\ Test\ non-\/propagating\ allocator\_type\ with\ different\ allocators.}}
\DoxyCodeLine{00238\ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ Container<CountingAllocator<int>>\ c1(allocator1),\ c2(allocator2);}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 100;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ c1.insert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}});}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator2);}
\DoxyCodeLine{00244\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00245\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ c2\ =\ c1;}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator2);}
\DoxyCodeLine{00250\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00251\ \ \ \ \ EXPECT\_EQ(instances2,\ 100);}
\DoxyCodeLine{00252\ \ \ \}}
\DoxyCodeLine{00253\ \ \ EXPECT\_EQ(bytes1,\ 0);}
\DoxyCodeLine{00254\ \ \ EXPECT\_EQ(instances1,\ 0);}
\DoxyCodeLine{00255\ \ \ EXPECT\_EQ(bytes2,\ 0);}
\DoxyCodeLine{00256\ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00257\ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \textcolor{keyword}{template}\ <\textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Alloc>\ \textcolor{keyword}{class\ }Container>}
\DoxyCodeLine{00260\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_1_1container__internal_ad1b9c245ccad36759e896949be63ec22}{TestMoveAssignAllocPropagation}}()\ \{}
\DoxyCodeLine{00261\ \ \ \mbox{\hyperlink{namespaceEigen_1_1numext_a518baced025fde474407c95f9a84d6e1}{int64\_t}}\ bytes1\ =\ 0,\ instances1\ =\ 0,\ bytes2\ =\ 0,\ instances2\ =\ 0;}
\DoxyCodeLine{00262\ \ \ MoveAssignPropagatingCountingAlloc<int>\ allocator1(\&bytes1,\ \&instances1);}
\DoxyCodeLine{00263\ \ \ MoveAssignPropagatingCountingAlloc<int>\ allocator2(\&bytes2,\ \&instances2);}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \textcolor{comment}{//\ Test\ propagating\ allocator\_type.}}
\DoxyCodeLine{00266\ \ \ \{}
\DoxyCodeLine{00267\ \ \ \ \ Container<MoveAssignPropagatingCountingAlloc<int>>\ c1(allocator1);}
\DoxyCodeLine{00268\ \ \ \ \ Container<MoveAssignPropagatingCountingAlloc<int>>\ c2(allocator2);}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 100;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ c1.insert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}});}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ EXPECT\_NE(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00273\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00274\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \ \ c2\ =\ std::move(c1);}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00279\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00280\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00281\ \ \ \}}
\DoxyCodeLine{00282\ \ \ \textcolor{comment}{//\ Test\ non-\/propagating\ allocator\_type\ with\ equal\ allocators.}}
\DoxyCodeLine{00283\ \ \ \{}
\DoxyCodeLine{00284\ \ \ \ \ Container<CountingAllocator<int>>\ c1(allocator1),\ c2(allocator1);}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 100;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ c1.insert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}});}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00289\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00290\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ c2\ =\ std::move(c1);}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00295\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00296\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00297\ \ \ \}}
\DoxyCodeLine{00298\ \ \ \textcolor{comment}{//\ Test\ non-\/propagating\ allocator\_type\ with\ different\ allocators.}}
\DoxyCodeLine{00299\ \ \ \{}
\DoxyCodeLine{00300\ \ \ \ \ Container<CountingAllocator<int>>\ c1(allocator1),\ c2(allocator2);}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 100;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ c1.insert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}});}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ EXPECT\_NE(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00305\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00306\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ c2\ =\ std::move(c1);}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator2);}
\DoxyCodeLine{00311\ \ \ \ \ EXPECT\_LE(instances1,\ 100);\ \ \textcolor{comment}{//\ The\ values\ in\ c1\ may\ or\ may\ not\ have\ been}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ destroyed\ at\ this\ point.}}
\DoxyCodeLine{00313\ \ \ \ \ EXPECT\_EQ(instances2,\ 100);}
\DoxyCodeLine{00314\ \ \ \}}
\DoxyCodeLine{00315\ \ \ EXPECT\_EQ(bytes1,\ 0);}
\DoxyCodeLine{00316\ \ \ EXPECT\_EQ(instances1,\ 0);}
\DoxyCodeLine{00317\ \ \ EXPECT\_EQ(bytes2,\ 0);}
\DoxyCodeLine{00318\ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00319\ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \textcolor{keyword}{template}\ <\textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Alloc>\ \textcolor{keyword}{class\ }Container>}
\DoxyCodeLine{00322\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_1_1container__internal_a9e15c776968897b5a6743e747676358b}{TestSwapAllocPropagation}}()\ \{}
\DoxyCodeLine{00323\ \ \ \mbox{\hyperlink{namespaceEigen_1_1numext_a518baced025fde474407c95f9a84d6e1}{int64\_t}}\ bytes1\ =\ 0,\ instances1\ =\ 0,\ bytes2\ =\ 0,\ instances2\ =\ 0;}
\DoxyCodeLine{00324\ \ \ SwapPropagatingCountingAlloc<int>\ allocator1(\&bytes1,\ \&instances1);}
\DoxyCodeLine{00325\ \ \ SwapPropagatingCountingAlloc<int>\ allocator2(\&bytes2,\ \&instances2);}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \textcolor{comment}{//\ Test\ propagating\ allocator\_type.}}
\DoxyCodeLine{00328\ \ \ \{}
\DoxyCodeLine{00329\ \ \ \ \ Container<SwapPropagatingCountingAlloc<int>>\ c1(allocator1),\ c2(allocator2);}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 100;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ c1.insert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}});}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ EXPECT\_NE(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00334\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00335\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \ \ \ \ c2.swap(c1);}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00340\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00341\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00342\ \ \ \}}
\DoxyCodeLine{00343\ \ \ \textcolor{comment}{//\ Test\ non-\/propagating\ allocator\_type\ with\ equal\ allocators.}}
\DoxyCodeLine{00344\ \ \ \{}
\DoxyCodeLine{00345\ \ \ \ \ Container<CountingAllocator<int>>\ c1(allocator1),\ c2(allocator1);}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 100;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ c1.insert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}});}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00350\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00351\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \ \ c2.swap(c1);}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \ \ EXPECT\_EQ(c2.get\_allocator(),\ allocator1);}
\DoxyCodeLine{00356\ \ \ \ \ EXPECT\_EQ(instances1,\ 100);}
\DoxyCodeLine{00357\ \ \ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00358\ \ \ \}}
\DoxyCodeLine{00359\ \ \ \textcolor{comment}{//\ Test\ non-\/propagating\ allocator\_type\ with\ different\ allocators.}}
\DoxyCodeLine{00360\ \ \ \{}
\DoxyCodeLine{00361\ \ \ \ \ Container<CountingAllocator<int>>\ c1(allocator1),\ c2(allocator2);}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ 100;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ c1.insert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}});}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \ \ EXPECT\_NE(c1.get\_allocator(),\ c2.get\_allocator());}
\DoxyCodeLine{00366\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceabsl_1_1container__internal_a6f53ef0e48bfa1179aa4841d28ed8ce0}{IsAssertEnabled}}())\ \{}
\DoxyCodeLine{00367\ \ \ \ \ \ \ EXPECT\_DEATH\_IF\_SUPPORTED(c2.swap(c1),\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00368\ \ \ \ \ \}}
\DoxyCodeLine{00369\ \ \ \}}
\DoxyCodeLine{00370\ \ \ EXPECT\_EQ(bytes1,\ 0);}
\DoxyCodeLine{00371\ \ \ EXPECT\_EQ(instances1,\ 0);}
\DoxyCodeLine{00372\ \ \ EXPECT\_EQ(bytes2,\ 0);}
\DoxyCodeLine{00373\ \ \ EXPECT\_EQ(instances2,\ 0);}
\DoxyCodeLine{00374\ \}}
\DoxyCodeLine{00375\ }
\DoxyCodeLine{00376\ \textcolor{keyword}{template}\ <\textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Alloc>\ \textcolor{keyword}{class\ }Container>}
\DoxyCodeLine{00377\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_1_1container__internal_a64ff02ba075b93f305d1411626127f25}{TestAllocPropagation}}()\ \{}
\DoxyCodeLine{00378\ \ \ \mbox{\hyperlink{namespaceabsl_1_1container__internal_af8cf254a8c7d82047f83db9c7e01f1af}{TestCopyAssignAllocPropagation<Container>}}();}
\DoxyCodeLine{00379\ \ \ \mbox{\hyperlink{namespaceabsl_1_1container__internal_ad1b9c245ccad36759e896949be63ec22}{TestMoveAssignAllocPropagation<Container>}}();}
\DoxyCodeLine{00380\ \ \ \mbox{\hyperlink{namespaceabsl_1_1container__internal_a9e15c776968897b5a6743e747676358b}{TestSwapAllocPropagation<Container>}}();}
\DoxyCodeLine{00381\ \}}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00383\ \}\ \ \textcolor{comment}{//\ namespace\ container\_internal}}
\DoxyCodeLine{00384\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_a49c6cd9be2b7205d48557c9fa90ec5a6}{ABSL\_NAMESPACE\_END}}}
\DoxyCodeLine{00385\ \}\ \ \textcolor{comment}{//\ namespace\ absl}}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ ABSL\_CONTAINER\_INTERNAL\_TEST\_ALLOCATOR\_H\_}}

\end{DoxyCode}
