\doxysection{cord\+\_\+rep\+\_\+test\+\_\+util.\+h}
\hypertarget{abseil-cpp_2absl_2strings_2internal_2cord__rep__test__util_8h_source}{}\label{abseil-cpp_2absl_2strings_2internal_2cord__rep__test__util_8h_source}\index{abseil-\/cpp/absl/strings/internal/cord\_rep\_test\_util.h@{abseil-\/cpp/absl/strings/internal/cord\_rep\_test\_util.h}}
\mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2cord__rep__test__util_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ 2021\ The\ Abseil\ Authors}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ \ \ \ \ https://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#ifndef\ ABSL\_STRINGS\_INTERNAL\_CORD\_REP\_TEST\_UTIL\_H\_}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ ABSL\_STRINGS\_INTERNAL\_CORD\_REP\_TEST\_UTIL\_H\_}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <cassert>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <random>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}absl/base/config.h"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}absl/base/internal/raw\_logging.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}absl/strings/internal/cord\_internal.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}absl/strings/internal/cord\_rep\_btree.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}absl/strings/internal/cord\_rep\_flat.h"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}absl/strings/string\_view.h"{}}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceabsl}{absl}}\ \{}
\DoxyCodeLine{00032\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_a1426209ed359f780778edc8975b23f07}{ABSL\_NAMESPACE\_BEGIN}}}
\DoxyCodeLine{00033\ \textcolor{keyword}{namespace\ }cordrep\_testing\ \{}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepSubstring}{cord\_internal::CordRepSubstring}}*\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_ac05f1155c42e64e7df30c1f41ac4d42b}{MakeSubstring}}(}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ start,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_afed088663f8704004425cdae2120b9b3}{len}},\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{auto}*\ sub\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepSubstring}{cord\_internal::CordRepSubstring}};}
\DoxyCodeLine{00038\ \ \ sub-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a179f49019ae42fc01bdf54b6093a5c33}{tag}}\ =\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695aa63fc85866516bf96cbac7b8d6394e29}{cord\_internal::SUBSTRING}};}
\DoxyCodeLine{00039\ \ \ sub-\/>start\ =\ start;}
\DoxyCodeLine{00040\ \ \ sub-\/>length\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_afed088663f8704004425cdae2120b9b3}{len}}\ <=\ 0\ ?\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>length\ -\/\ start\ +\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_afed088663f8704004425cdae2120b9b3}{len}}\ :\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc__test_8cc_afed088663f8704004425cdae2120b9b3}{len}};}
\DoxyCodeLine{00041\ \ \ sub-\/>child\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}};}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordflow}{return}\ sub;}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepFlat}{cord\_internal::CordRepFlat}}*\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a6ad9eb6e49ee289812484fa88ac4a949}{MakeFlat}}(\mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}})\ \{}
\DoxyCodeLine{00046\ \ \ assert(\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}.length()\ <=\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_aedf9f500de916405dd2c11c611506d89}{cord\_internal::kMaxFlatLength}});}
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{auto}*\ flat\ =\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepFlat_aae59059839c1febf4716c2d7fc865962}{cord\_internal::CordRepFlat::New}}(\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}.length());}
\DoxyCodeLine{00048\ \ \ flat-\/>length\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}.length();}
\DoxyCodeLine{00049\ \ \ memcpy(flat-\/>Data(),\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}.data(),\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}.length());}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordflow}{return}\ flat;}
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{comment}{//\ Creates\ an\ external\ node\ for\ testing}}
\DoxyCodeLine{00054\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepExternal}{cord\_internal::CordRepExternal}}*\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a57887177b64cfd06ceb4771c6f52f981}{MakeExternal}}(\mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}})\ \{}
\DoxyCodeLine{00055\ \ \ \textcolor{keyword}{struct\ }Rep\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepExternal}{cord\_internal::CordRepExternal}}\ \{}
\DoxyCodeLine{00056\ \ \ \ \ std::string\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}};}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{explicit}\ Rep(\mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ sv)\ :\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}(sv)\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ this-\/>tag\ =\ cord\_internal::EXTERNAL;}
\DoxyCodeLine{00059\ \ \ \ \ \ \ this-\/>base\ =\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}.data();}
\DoxyCodeLine{00060\ \ \ \ \ \ \ this-\/>length\ =\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}.length();}
\DoxyCodeLine{00061\ \ \ \ \ \ \ this-\/>releaser\_invoker\ =\ [](\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepExternal}{cord\_internal::CordRepExternal}}*\ self)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \textcolor{keyword}{static\_cast<}Rep*\textcolor{keyword}{>}(self);}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \};}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ \ \ \};}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ Rep(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}});}
\DoxyCodeLine{00067\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a7185a61e6d742efafff2978fe6835ed1}{CreateRandomString}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}})\ \{}
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}}\ =}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}abcdefghijklmnopqrstuvwxyz"{}}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ABCDEFGHIJKLMNOPQRSTUVWXYZ"{}}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}0123456789\string~!@\#\$\%\string^\&*()\_+=-\/<>?:\(\backslash\)"{}\{\}[]|"{}};}
\DoxyCodeLine{00074\ \ \ std::minstd\_rand\ rnd;}
\DoxyCodeLine{00075\ \ \ std::uniform\_int\_distribution<size\_t>\ dist(0,\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}}.size()\ -\/\ 1);}
\DoxyCodeLine{00076\ \ \ std::string\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}},\ \textcolor{charliteral}{'\ '});}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}};\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}[\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}]\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}}[dist(rnd)];}
\DoxyCodeLine{00079\ \ \ \}}
\DoxyCodeLine{00080\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}};}
\DoxyCodeLine{00081\ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \textcolor{comment}{//\ Creates\ an\ array\ of\ flats\ from\ the\ provided\ string,\ chopping}}
\DoxyCodeLine{00084\ \textcolor{comment}{//\ the\ provided\ string\ up\ into\ flats\ of\ size\ \`{}chunk\_size`\ characters}}
\DoxyCodeLine{00085\ \textcolor{comment}{//\ resulting\ in\ roughly\ \`{}data.size()\ /\ chunk\_size`\ total\ flats.}}
\DoxyCodeLine{00086\ \textcolor{keyword}{inline}\ std::vector<cord\_internal::CordRep*>\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a572d2bfefb23bd771d31049bcb9ad595}{CreateFlatsFromString}}(}
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}},\ \textcolor{keywordtype}{size\_t}\ chunk\_size)\ \{}
\DoxyCodeLine{00088\ \ \ assert(chunk\_size\ >\ 0);}
\DoxyCodeLine{00089\ \ \ std::vector<cord\_internal::CordRep*>\ flats;}
\DoxyCodeLine{00090\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}};\ !\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}.\mbox{\hyperlink{classabsl_1_1string__view_afd8bd29b979f1655dea7e5fd8431162d}{empty}}();\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}.remove\_prefix(chunk\_size))\ \{}
\DoxyCodeLine{00091\ \ \ \ \ flats.push\_back(\mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a6ad9eb6e49ee289812484fa88ac4a949}{MakeFlat}}(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}.substr(0,\ chunk\_size)));}
\DoxyCodeLine{00092\ \ \ \}}
\DoxyCodeLine{00093\ \ \ \textcolor{keywordflow}{return}\ flats;}
\DoxyCodeLine{00094\ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{cord\_internal::CordRepBtree}}*\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_aa0cf2480fa9e20bdae3e30a477c38325}{CordRepBtreeFromFlats}}(}
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1Span}{absl::Span<cord\_internal::CordRep*\ const>}}\ flats)\ \{}
\DoxyCodeLine{00098\ \ \ assert(!flats.\mbox{\hyperlink{classabsl_1_1Span_ae654bb698a931c9e490c2822ec77422a}{empty}}());}
\DoxyCodeLine{00099\ \ \ \textcolor{keyword}{auto}*\ node\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_afd94fa49f1842405883eff6398f63704}{cord\_internal::CordRepBtree::Create}}(flats[0]);}
\DoxyCodeLine{00100\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 1;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ flats.\mbox{\hyperlink{classabsl_1_1Span_a92186c247036e10dd12603c09f8b8797}{size}}();\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ \{}
\DoxyCodeLine{00101\ \ \ \ \ node\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a92a48d92f6c9e8c2801e8d7a22d518d1}{cord\_internal::CordRepBtree::Append}}(node,\ flats[\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}]);}
\DoxyCodeLine{00102\ \ \ \}}
\DoxyCodeLine{00103\ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Fn>}
\DoxyCodeLine{00107\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_aa01777c5671cd62f579f1940e0010640}{CordVisitReps}}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}},\ Fn\&\&\ fn)\ \{}
\DoxyCodeLine{00108\ \ \ fn(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>tag\ ==\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695aa63fc85866516bf96cbac7b8d6394e29}{cord\_internal::SUBSTRING}})\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>substring()-\/>child;}
\DoxyCodeLine{00111\ \ \ \ \ fn(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00112\ \ \ \}}
\DoxyCodeLine{00113\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>tag\ ==\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695a5fda263a28d677bc3acf1359d769ecd1}{cord\_internal::BTREE}})\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ edge\ :\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a1b0561065120a0caf211b2347e9b738b}{btree}}()-\/>\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a27bd5dce6482fc047d1fc147a5bd174b}{Edges}}())\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_aa01777c5671cd62f579f1940e0010640}{CordVisitReps}}(edge,\ fn);}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \}}
\DoxyCodeLine{00118\ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Predicate>}
\DoxyCodeLine{00121\ \textcolor{keyword}{inline}\ std::vector<cord\_internal::CordRep*>\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a5fdb7a84676f9458a6700d96e47d2a76}{CordCollectRepsIf}}(}
\DoxyCodeLine{00122\ \ \ \ \ Predicate\&\&\ predicate,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00123\ \ \ std::vector<cord\_internal::CordRep*>\ reps;}
\DoxyCodeLine{00124\ \ \ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_aa01777c5671cd62f579f1940e0010640}{CordVisitReps}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}},\ [\&reps,\ \&predicate](\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordflow}{if}\ (predicate(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}))\ reps.push\_back(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00126\ \ \ \});}
\DoxyCodeLine{00127\ \ \ \textcolor{keywordflow}{return}\ reps;}
\DoxyCodeLine{00128\ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \textcolor{keyword}{inline}\ std::vector<cord\_internal::CordRep*>\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a1e998ec0a356e821d7db169fe7e5dbf3}{CordCollectReps}}(}
\DoxyCodeLine{00131\ \ \ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00132\ \ \ std::vector<cord\_internal::CordRep*>\ reps;}
\DoxyCodeLine{00133\ \ \ \textcolor{keyword}{auto}\ fn\ =\ [\&reps](\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{\ reps.push\_back(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});\ \};}
\DoxyCodeLine{00134\ \ \ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_aa01777c5671cd62f579f1940e0010640}{CordVisitReps}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}},\ fn);}
\DoxyCodeLine{00135\ \ \ \textcolor{keywordflow}{return}\ reps;}
\DoxyCodeLine{00136\ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a4656a8dc6cfbd2b984e9f73cf4371462}{CordToString}}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}},\ std::string\&\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}})\ \{}
\DoxyCodeLine{00139\ \ \ \textcolor{keywordtype}{size\_t}\ offset\ =\ 0;}
\DoxyCodeLine{00140\ \ \ \textcolor{keywordtype}{size\_t}\ length\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>length;}
\DoxyCodeLine{00141\ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>tag\ ==\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695aa63fc85866516bf96cbac7b8d6394e29}{cord\_internal::SUBSTRING}})\ \{}
\DoxyCodeLine{00142\ \ \ \ \ offset\ +=\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>substring()-\/>start;}
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>substring()-\/>child;}
\DoxyCodeLine{00144\ \ \ \}}
\DoxyCodeLine{00145\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>tag\ ==\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695a5fda263a28d677bc3acf1359d769ecd1}{cord\_internal::BTREE}})\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ edge\ :\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a1b0561065120a0caf211b2347e9b738b}{btree}}()-\/>\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a27bd5dce6482fc047d1fc147a5bd174b}{Edges}}())\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a4656a8dc6cfbd2b984e9f73cf4371462}{CordToString}}(edge,\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}});}
\DoxyCodeLine{00148\ \ \ \ \ \}}
\DoxyCodeLine{00149\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>tag\ >=\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695ac9d7cb6a8d7380945d713291c7bf3de3}{cord\_internal::FLAT}})\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}.append(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>flat()-\/>Data()\ +\ offset,\ length);}
\DoxyCodeLine{00151\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>tag\ ==\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695a9a2381a1784f3ec5aaff9c72403df950}{cord\_internal::EXTERNAL}})\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}.append(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>external()-\/>base\ +\ offset,\ length);}
\DoxyCodeLine{00153\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2raw__logging_8h_a08c96681b0c47d4a8242c96b6db6fd99}{ABSL\_RAW\_LOG}}(FATAL,\ \textcolor{stringliteral}{"{}Unsupported\ tag\ \%d"{}},\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>tag);}
\DoxyCodeLine{00155\ \ \ \}}
\DoxyCodeLine{00156\ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a4656a8dc6cfbd2b984e9f73cf4371462}{CordToString}}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{cord\_internal::CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00159\ \ \ std::string\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}};}
\DoxyCodeLine{00160\ \ \ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}}.reserve(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>length);}
\DoxyCodeLine{00161\ \ \ \mbox{\hyperlink{namespaceabsl_1_1cordrep__testing_a4656a8dc6cfbd2b984e9f73cf4371462}{CordToString}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}},\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}});}
\DoxyCodeLine{00162\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca03c7c0ace395d80182db07ae2c30f034}{s}};}
\DoxyCodeLine{00163\ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \textcolor{comment}{//\ RAII\ Helper\ class\ to\ automatically\ unref\ reps\ on\ destruction.}}
\DoxyCodeLine{00166\ \textcolor{keyword}{class\ }AutoUnref\ \{}
\DoxyCodeLine{00167\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00168\ \ \ \mbox{\hyperlink{classabsl_1_1cordrep__testing_1_1AutoUnref_a6ca97254724f39b7a68b2f6e74305d6e}{\string~AutoUnref}}()\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}\ :\ unrefs\_)\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_acabc9fa3a9ecbdea090d5f0a299d5993}{CordRep::Unref}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00170\ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \textcolor{comment}{//\ Adds\ \`{}rep`\ to\ the\ list\ of\ reps\ to\ be\ unreffed\ at\ destruction.}}
\DoxyCodeLine{00173\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ CordRepType>}
\DoxyCodeLine{00174\ \ \ CordRepType*\ \mbox{\hyperlink{classabsl_1_1cordrep__testing_1_1AutoUnref_a4a03e495e0eb66d8b4b546d84d9a85e7}{Add}}(CordRepType*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00175\ \ \ \ \ unrefs\_.push\_back(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}};}
\DoxyCodeLine{00177\ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{comment}{//\ Increments\ the\ reference\ count\ of\ \`{}rep`\ by\ one,\ and\ adds\ it\ to}}
\DoxyCodeLine{00180\ \ \ \textcolor{comment}{//\ the\ list\ of\ reps\ to\ be\ unreffed\ at\ destruction.}}
\DoxyCodeLine{00181\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ CordRepType>}
\DoxyCodeLine{00182\ \ \ CordRepType*\ \mbox{\hyperlink{classabsl_1_1cordrep__testing_1_1AutoUnref_a9af7a8eb2cd4809abaa0d88ac1b12bae}{Ref}}(CordRepType*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00183\ \ \ \ \ unrefs\_.push\_back(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ad73d5d8140ce641920d1b3894515ed08}{CordRep::Ref}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}));}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}};}
\DoxyCodeLine{00185\ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \textcolor{comment}{//\ Increments\ the\ reference\ count\ of\ \`{}rep`\ by\ one\ if\ \`{}condition`\ is\ true,}}
\DoxyCodeLine{00188\ \ \ \textcolor{comment}{//\ and\ adds\ it\ to\ the\ list\ of\ reps\ to\ be\ unreffed\ at\ destruction.}}
\DoxyCodeLine{00189\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ CordRepType>}
\DoxyCodeLine{00190\ \ \ CordRepType*\ \mbox{\hyperlink{classabsl_1_1cordrep__testing_1_1AutoUnref_a0203c368f3a10ace6b5257319539c500}{RefIf}}(\textcolor{keywordtype}{bool}\ condition,\ CordRepType*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordflow}{if}\ (condition)\ unrefs\_.push\_back(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ad73d5d8140ce641920d1b3894515ed08}{CordRep::Ref}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}));}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}};}
\DoxyCodeLine{00193\ \ \ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00196\ \ \ \textcolor{keyword}{using\ }CordRep\ =\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{absl::cord\_internal::CordRep}};}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ std::vector<CordRep*>\ unrefs\_;}
\DoxyCodeLine{00199\ \};}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \}\ \ \textcolor{comment}{//\ namespace\ cordrep\_testing}}
\DoxyCodeLine{00202\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_a49c6cd9be2b7205d48557c9fa90ec5a6}{ABSL\_NAMESPACE\_END}}}
\DoxyCodeLine{00203\ \}\ \ \textcolor{comment}{//\ namespace\ absl}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ ABSL\_STRINGS\_INTERNAL\_CORD\_REP\_TEST\_UTIL\_H\_}}

\end{DoxyCode}
