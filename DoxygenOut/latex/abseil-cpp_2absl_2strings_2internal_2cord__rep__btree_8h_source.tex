\doxysection{cord\+\_\+rep\+\_\+btree.\+h}
\hypertarget{abseil-cpp_2absl_2strings_2internal_2cord__rep__btree_8h_source}{}\label{abseil-cpp_2absl_2strings_2internal_2cord__rep__btree_8h_source}\index{abseil-\/cpp/absl/strings/internal/cord\_rep\_btree.h@{abseil-\/cpp/absl/strings/internal/cord\_rep\_btree.h}}
\mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2cord__rep__btree_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ 2021\ The\ Abseil\ Authors}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ you\ may\ not\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ \ \ \ \ https://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ See\ the\ License\ for\ the\ specific\ language\ governing\ permissions\ and}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#ifndef\ ABSL\_STRINGS\_INTERNAL\_CORD\_REP\_BTREE\_H\_}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ ABSL\_STRINGS\_INTERNAL\_CORD\_REP\_BTREE\_H\_}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <cassert>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <iosfwd>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}absl/base/config.h"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}absl/base/internal/raw\_logging.h"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}absl/base/optimization.h"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}absl/strings/internal/cord\_data\_edge.h"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}absl/strings/internal/cord\_internal.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}absl/strings/internal/cord\_rep\_flat.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}absl/strings/string\_view.h"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}absl/types/span.h"{}}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceabsl}{absl}}\ \{}
\DoxyCodeLine{00032\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_a1426209ed359f780778edc8975b23f07}{ABSL\_NAMESPACE\_BEGIN}}}
\DoxyCodeLine{00033\ \textcolor{keyword}{namespace\ }cord\_internal\ \{}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{comment}{//\ \`{}SetCordBtreeExhaustiveValidation()`\ can\ be\ set\ to\ force\ exhaustive}}
\DoxyCodeLine{00036\ \textcolor{comment}{//\ validation\ in\ debug\ assertions,\ and\ code\ that\ calls\ \`{}IsValid()`}}
\DoxyCodeLine{00037\ \textcolor{comment}{//\ explicitly.\ By\ default,\ assertions\ should\ be\ relatively\ cheap\ and}}
\DoxyCodeLine{00038\ \textcolor{comment}{//\ AssertValid()\ can\ easily\ lead\ to\ O(n\string^2)\ complexity\ as\ recursive\ /\ full\ tree}}
\DoxyCodeLine{00039\ \textcolor{comment}{//\ validation\ is\ O(n).}}
\DoxyCodeLine{00040\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a17f309c2e2f5886ce667c95ab2582ae3}{SetCordBtreeExhaustiveValidation}}(\textcolor{keywordtype}{bool}\ do\_exaustive\_validation);}
\DoxyCodeLine{00041\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_aa78f707e2876e661610ffd689612c5dc}{IsCordBtreeExhaustiveValidationEnabled}}();}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{class\ }CordRepBtreeNavigator;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{comment}{//\ CordRepBtree\ is\ as\ the\ name\ implies\ a\ btree\ implementation\ of\ a\ Cordrep\ tree.}}
\DoxyCodeLine{00046\ \textcolor{comment}{//\ Data\ is\ stored\ at\ the\ leaf\ level\ only,\ non\ leaf\ nodes\ contain\ down\ pointers}}
\DoxyCodeLine{00047\ \textcolor{comment}{//\ only.\ Allowed\ types\ of\ data\ edges\ are\ FLAT,\ EXTERNAL\ and\ SUBSTRINGs\ of\ FLAT}}
\DoxyCodeLine{00048\ \textcolor{comment}{//\ or\ EXTERNAL\ nodes.\ The\ implementation\ allows\ for\ data\ to\ be\ added\ to\ either}}
\DoxyCodeLine{00049\ \textcolor{comment}{//\ end\ of\ the\ tree\ only,\ it\ does\ not\ provide\ any\ 'insert'\ logic.\ This\ has\ the}}
\DoxyCodeLine{00050\ \textcolor{comment}{//\ benefit\ that\ we\ can\ expect\ good\ fill\ ratios:\ all\ nodes\ except\ the\ outer}}
\DoxyCodeLine{00051\ \textcolor{comment}{//\ 'legs'\ will\ have\ 100\%\ fill\ ratios\ for\ trees\ built\ using\ Append/Prepend}}
\DoxyCodeLine{00052\ \textcolor{comment}{//\ methods.\ Merged\ trees\ will\ typically\ have\ a\ fill\ ratio\ well\ above\ 50\%\ as\ in\ a}}
\DoxyCodeLine{00053\ \textcolor{comment}{//\ similar\ fashion,\ one\ side\ of\ the\ merged\ tree\ will\ typically\ have\ a\ 100\%\ fill}}
\DoxyCodeLine{00054\ \textcolor{comment}{//\ ratio,\ and\ the\ 'open'\ end\ will\ average\ 50\%.\ All\ operations\ are\ O(log(n))\ or}}
\DoxyCodeLine{00055\ \textcolor{comment}{//\ better,\ and\ the\ tree\ never\ needs\ balancing.}}
\DoxyCodeLine{00056\ \textcolor{comment}{//}}
\DoxyCodeLine{00057\ \textcolor{comment}{//\ All\ methods\ accepting\ a\ CordRep*\ or\ CordRepBtree*\ adopt\ a\ reference\ on\ that}}
\DoxyCodeLine{00058\ \textcolor{comment}{//\ input\ unless\ explicitly\ stated\ otherwise.\ All\ functions\ returning\ a\ CordRep*}}
\DoxyCodeLine{00059\ \textcolor{comment}{//\ or\ CordRepBtree*\ instance\ transfer\ a\ reference\ back\ to\ the\ caller.}}
\DoxyCodeLine{00060\ \textcolor{comment}{//\ Simplified,\ callers\ both\ 'donate'\ and\ 'consume'\ a\ reference\ count\ on\ each}}
\DoxyCodeLine{00061\ \textcolor{comment}{//\ call,\ simplifying\ the\ API.\ An\ example\ of\ building\ a\ tree:}}
\DoxyCodeLine{00062\ \textcolor{comment}{//}}
\DoxyCodeLine{00063\ \textcolor{comment}{//\ \ \ CordRepBtree*\ tree\ =\ CordRepBtree::Create(MakeFlat("{}Hello"{}));}}
\DoxyCodeLine{00064\ \textcolor{comment}{//\ \ \ tree\ =\ CordRepBtree::Append(tree,\ MakeFlat("{}world"{}));}}
\DoxyCodeLine{00065\ \textcolor{comment}{//}}
\DoxyCodeLine{00066\ \textcolor{comment}{//\ In\ the\ above\ example,\ all\ inputs\ are\ consumed,\ making\ each\ call\ affecting}}
\DoxyCodeLine{00067\ \textcolor{comment}{//\ \`{}tree`\ reference\ count\ neutral.\ The\ returned\ \`{}tree`\ value\ can\ be\ different}}
\DoxyCodeLine{00068\ \textcolor{comment}{//\ from\ the\ input\ if\ the\ input\ is\ shared\ with\ other\ threads,\ or\ if\ the\ tree}}
\DoxyCodeLine{00069\ \textcolor{comment}{//\ grows\ in\ height,\ but\ callers\ typically\ never\ have\ to\ concern\ themselves\ with}}
\DoxyCodeLine{00070\ \textcolor{comment}{//\ that\ and\ trust\ that\ all\ methods\ DTRT\ at\ all\ times.}}
\DoxyCodeLine{00071\ \textcolor{keyword}{class\ }CordRepBtree\ :\ \textcolor{keyword}{public}\ CordRep\ \{}
\DoxyCodeLine{00072\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00073\ \ \ \textcolor{comment}{//\ EdgeType\ identifies\ \`{}front`\ and\ \`{}back`\ enum\ values.}}
\DoxyCodeLine{00074\ \ \ \textcolor{comment}{//\ Various\ implementations\ in\ CordRepBtree\ such\ as\ \`{}Add`\ and\ \`{}Edge`\ are}}
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{//\ generic\ and\ templated\ on\ operating\ on\ either\ of\ the\ boundary\ edges.}}
\DoxyCodeLine{00076\ \ \ \textcolor{comment}{//\ For\ more\ information\ on\ the\ possible\ edges\ contained\ in\ a\ CordRepBtree}}
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ instance\ see\ the\ documentation\ for\ \`{}edges\_`.}}
\DoxyCodeLine{00078\ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ab04f7ccf847e8f025ace909d9ffc74af}{EdgeType}}\ \{\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a7968b58a9b26be6fb3362eeb561dfe00}{kFront}},\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a2327c58db3531dd7b16922f99c91423a}{kBack}}\ \};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//\ Convenience\ constants\ into\ \`{}EdgeType`}}
\DoxyCodeLine{00081\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ab04f7ccf847e8f025ace909d9ffc74af}{EdgeType}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a7968b58a9b26be6fb3362eeb561dfe00}{kFront}}\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ab04f7ccf847e8f025ace909d9ffc74afa74b33dfe34e13923f9b235450de37871}{EdgeType::kFront}};}
\DoxyCodeLine{00082\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ab04f7ccf847e8f025ace909d9ffc74af}{EdgeType}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a2327c58db3531dd7b16922f99c91423a}{kBack}}\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ab04f7ccf847e8f025ace909d9ffc74afa1aa843cfb007a05d484edf751fdc905d}{EdgeType::kBack}};}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \textcolor{comment}{//\ Maximum\ number\ of\ edges:\ based\ on\ experiments\ and\ performance\ data,\ we\ can}}
\DoxyCodeLine{00085\ \ \ \textcolor{comment}{//\ pick\ suitable\ values\ resulting\ in\ optimum\ cacheline\ aligned\ values.\ The}}
\DoxyCodeLine{00086\ \ \ \textcolor{comment}{//\ preferred\ values\ are\ based\ on\ 64-\/bit\ systems\ where\ we\ aim\ to\ align\ this}}
\DoxyCodeLine{00087\ \ \ \textcolor{comment}{//\ class\ onto\ 64\ bytes,\ i.e.:\ \ 6\ =\ 64\ bytes,\ 14\ =\ 128\ bytes,\ etc.}}
\DoxyCodeLine{00088\ \ \ \textcolor{comment}{//\ TODO(b/192061034):\ experiment\ with\ alternative\ sizes.}}
\DoxyCodeLine{00089\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a70550a0c06e86a6b94e76485c6d267da}{kMaxCapacity}}\ =\ 6;}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \textcolor{comment}{//\ Reasonable\ maximum\ height\ of\ the\ btree.\ We\ can\ expect\ a\ fill\ ratio\ of\ at}}
\DoxyCodeLine{00092\ \ \ \textcolor{comment}{//\ least\ 50\%:\ trees\ are\ always\ expanded\ at\ the\ front\ or\ back.\ Concatenating}}
\DoxyCodeLine{00093\ \ \ \textcolor{comment}{//\ trees\ will\ then\ typically\ fold\ at\ the\ top\ most\ node,\ where\ the\ lower\ nodes}}
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{//\ are\ at\ least\ at\ capacity\ on\ one\ side\ of\ joined\ inputs.\ At\ a\ lower\ fill}}
\DoxyCodeLine{00095\ \ \ \textcolor{comment}{//\ rate\ of\ 4\ edges\ per\ node,\ we\ have\ capacity\ for\ \string~16\ million\ leaf\ nodes.}}
\DoxyCodeLine{00096\ \ \ \textcolor{comment}{//\ We\ will\ fail\ /\ abort\ if\ an\ application\ ever\ exceeds\ this\ height,\ which}}
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{//\ should\ be\ extremely\ rare\ (near\ impossible)\ and\ be\ an\ indication\ of\ an}}
\DoxyCodeLine{00098\ \ \ \textcolor{comment}{//\ application\ error:\ we\ do\ not\ assume\ it\ reasonable\ for\ any\ application\ to}}
\DoxyCodeLine{00099\ \ \ \textcolor{comment}{//\ operate\ correctly\ with\ such\ monster\ trees.}}
\DoxyCodeLine{00100\ \ \ \textcolor{comment}{//\ Another\ compelling\ reason\ for\ the\ number\ \`{}12`\ is\ that\ any\ contextual\ stack}}
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{//\ required\ for\ navigation\ or\ insertion\ requires\ 12\ words\ and\ 12\ bytes,\ which}}
\DoxyCodeLine{00102\ \ \ \textcolor{comment}{//\ fits\ inside\ 2\ cache\ lines\ with\ some\ room\ to\ spare,\ and\ is\ reasonable\ as\ a}}
\DoxyCodeLine{00103\ \ \ \textcolor{comment}{//\ local\ stack\ variable\ compared\ to\ Cord's\ current\ near\ 400\ bytes\ stack\ use.}}
\DoxyCodeLine{00104\ \ \ \textcolor{comment}{//\ The\ maximum\ \`{}height`\ value\ of\ a\ node\ is\ then\ \`{}kMaxDepth\ -\/\ 1`\ as\ node\ height}}
\DoxyCodeLine{00105\ \ \ \textcolor{comment}{//\ values\ start\ with\ a\ value\ of\ 0\ for\ leaf\ nodes.}}
\DoxyCodeLine{00106\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ac7158be5b7bb70bed010063bd0196729}{kMaxDepth}}\ =\ 12;}
\DoxyCodeLine{00107\ \ \ \textcolor{comment}{//\ See\ comments\ on\ height()\ for\ why\ this\ is\ an\ int\ and\ not\ a\ size\_t.}}
\DoxyCodeLine{00108\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a737251e913f614e0440e0dc31bd0a64a}{kMaxHeight}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ac7158be5b7bb70bed010063bd0196729}{kMaxDepth}}\ -\/\ 1);}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \textcolor{comment}{//\ \`{}Action`\ defines\ the\ action\ for\ unwinding\ changes\ done\ at\ the\ btree's\ leaf}}
\DoxyCodeLine{00111\ \ \ \textcolor{comment}{//\ level\ that\ need\ to\ be\ propagated\ up\ to\ the\ parent\ node(s).\ Each\ operation}}
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{//\ on\ a\ node\ has\ an\ effect\ /\ action\ defined\ as\ follows:}}
\DoxyCodeLine{00113\ \ \ \textcolor{comment}{//\ -\/\ kSelf}}
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{//\ \ \ The\ operation\ (add\ /\ update,\ etc)\ was\ performed\ directly\ on\ the\ node\ as}}
\DoxyCodeLine{00115\ \ \ \textcolor{comment}{//\ \ \ the\ node\ is\ private\ to\ the\ current\ thread\ (i.e.:\ not\ shared\ directly\ or}}
\DoxyCodeLine{00116\ \ \ \textcolor{comment}{//\ \ \ indirectly\ through\ a\ refcount\ >\ 1).\ Changes\ can\ be\ propagated\ directly\ to}}
\DoxyCodeLine{00117\ \ \ \textcolor{comment}{//\ \ \ all\ parent\ nodes\ as\ all\ parent\ nodes\ are\ also\ then\ private\ to\ the\ current}}
\DoxyCodeLine{00118\ \ \ \textcolor{comment}{//\ \ \ thread.}}
\DoxyCodeLine{00119\ \ \ \textcolor{comment}{//\ -\/\ kCopied}}
\DoxyCodeLine{00120\ \ \ \textcolor{comment}{//\ \ \ The\ operation\ (add\ /\ update,\ etc)\ was\ performed\ on\ a\ copy\ of\ the\ original}}
\DoxyCodeLine{00121\ \ \ \textcolor{comment}{//\ \ \ node,\ as\ the\ node\ is\ (potentially)\ directly\ or\ indirectly\ shared\ with}}
\DoxyCodeLine{00122\ \ \ \textcolor{comment}{//\ \ \ other\ threads.\ Changes\ need\ to\ be\ propagated\ into\ the\ parent\ nodes\ where}}
\DoxyCodeLine{00123\ \ \ \textcolor{comment}{//\ \ \ the\ old\ down\ pointer\ must\ be\ unreffed\ and\ replaced\ with\ this\ new\ copy.}}
\DoxyCodeLine{00124\ \ \ \textcolor{comment}{//\ \ \ Such\ changes\ to\ parent\ nodes\ may\ themselves\ require\ a\ copy\ if\ the\ parent}}
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{//\ \ \ node\ is\ also\ shared.\ A\ kCopied\ action\ can\ propagate\ all\ the\ way\ to\ the}}
\DoxyCodeLine{00126\ \ \ \textcolor{comment}{//\ \ \ top\ node\ where\ we\ then\ must\ unref\ the\ \`{}tree`\ input\ provided\ by\ the}}
\DoxyCodeLine{00127\ \ \ \textcolor{comment}{//\ \ \ caller,\ and\ return\ the\ new\ copy.}}
\DoxyCodeLine{00128\ \ \ \textcolor{comment}{//\ -\/\ kPopped}}
\DoxyCodeLine{00129\ \ \ \textcolor{comment}{//\ \ \ The\ operation\ (typically\ add)\ could\ not\ be\ satisfied\ due\ to\ insufficient}}
\DoxyCodeLine{00130\ \ \ \textcolor{comment}{//\ \ \ capacity\ in\ the\ targeted\ node,\ and\ a\ new\ 'leg'\ was\ created\ that\ needs\ to}}
\DoxyCodeLine{00131\ \ \ \textcolor{comment}{//\ \ \ be\ added\ into\ the\ parent\ node.\ For\ example,\ adding\ a\ FLAT\ inside\ a\ leaf}}
\DoxyCodeLine{00132\ \ \ \textcolor{comment}{//\ \ \ node\ that\ is\ at\ capacity\ will\ create\ a\ new\ leaf\ node\ containing\ that}}
\DoxyCodeLine{00133\ \ \ \textcolor{comment}{//\ \ \ FLAT,\ that\ needs\ to\ be\ 'popped'\ up\ the\ btree.\ Such\ 'pop'\ actions\ can}}
\DoxyCodeLine{00134\ \ \ \textcolor{comment}{//\ \ \ cascade\ up\ the\ tree\ if\ parent\ nodes\ are\ also\ at\ capacity.\ A\ 'Popped'}}
\DoxyCodeLine{00135\ \ \ \textcolor{comment}{//\ \ \ action\ propagating\ all\ the\ way\ to\ the\ top\ of\ the\ tree\ will\ result\ in}}
\DoxyCodeLine{00136\ \ \ \textcolor{comment}{//\ \ \ the\ tree\ becoming\ one\ level\ higher\ than\ the\ current\ tree\ through\ a\ final}}
\DoxyCodeLine{00137\ \ \ \textcolor{comment}{//\ \ \ \`{}CordRepBtree::New(tree,\ popped)`\ call,\ resulting\ in\ a\ new\ top\ node}}
\DoxyCodeLine{00138\ \ \ \textcolor{comment}{//\ \ \ referencing\ the\ old\ tree\ and\ the\ new\ (fully\ popped\ upwards)\ 'leg'.}}
\DoxyCodeLine{00139\ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a84e60848c401e0765c2dfb93f6b39abd}{Action}}\ \{\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a84e60848c401e0765c2dfb93f6b39abda0f1e38fdddd3c27c63e23a688211dccf}{kSelf}},\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a84e60848c401e0765c2dfb93f6b39abda2a9132d69165bd6d88bae09c755549f4}{kCopied}},\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a84e60848c401e0765c2dfb93f6b39abdab48abe8e9e4c50da7937bb4df7c1d17a}{kPopped}}\ \};}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \textcolor{comment}{//\ Result\ of\ an\ operation\ on\ a\ node.\ See\ the\ \`{}Action`\ enum\ for\ details.}}
\DoxyCodeLine{00142\ \ \ \textcolor{keyword}{struct\ }OpResult\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepBtree_1_1OpResult_a10a2fd8929a31f9def3b9676e017bb79}{tree}};}
\DoxyCodeLine{00144\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a84e60848c401e0765c2dfb93f6b39abd}{Action}}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepBtree_1_1OpResult_acd1d3bad56b265e901987c706169b451}{action}};}
\DoxyCodeLine{00145\ \ \ \};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{comment}{//\ Return\ value\ of\ the\ CopyPrefix\ and\ CopySuffix\ methods\ which\ can}}
\DoxyCodeLine{00148\ \ \ \textcolor{comment}{//\ return\ a\ node\ or\ data\ edge\ at\ any\ height\ inside\ the\ tree.}}
\DoxyCodeLine{00149\ \ \ \textcolor{comment}{//\ A\ height\ of\ 0\ defines\ the\ lowest\ (leaf)\ node,\ a\ height\ of\ -\/1\ identifies}}
\DoxyCodeLine{00150\ \ \ \textcolor{comment}{//\ \`{}edge`\ as\ being\ a\ plain\ data\ node:\ EXTERNAL\ /\ FLAT\ or\ SUBSTRING\ thereof.}}
\DoxyCodeLine{00151\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepBtree_1_1CopyResult}{CopyResult}}\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepBtree_1_1CopyResult_a783750f62ef89026d049a69e24bb4577}{edge}};}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepBtree_1_1CopyResult_aba3a810f0cf7f24b57b393c3504c5b53}{height}};}
\DoxyCodeLine{00154\ \ \ \};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \textcolor{comment}{//\ Logical\ position\ inside\ a\ node:}}
\DoxyCodeLine{00157\ \ \ \textcolor{comment}{//\ -\/\ index:\ index\ of\ the\ edge.}}
\DoxyCodeLine{00158\ \ \ \textcolor{comment}{//\ -\/\ n:\ size\ or\ offset\ value\ depending\ on\ context.}}
\DoxyCodeLine{00159\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepBtree_1_1Position}{Position}}\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepBtree_1_1Position_a4c89e83cbb891934894669d777a06b90}{index}};}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepBtree_1_1Position_ade557d3d9b2d3df343cd6647955c0ba8}{n}};}
\DoxyCodeLine{00162\ \ \ \};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \textcolor{comment}{//\ Creates\ a\ btree\ from\ the\ given\ input.\ Adopts\ a\ ref\ of\ \`{}rep`.}}
\DoxyCodeLine{00165\ \ \ \textcolor{comment}{//\ If\ the\ input\ \`{}rep`\ is\ itself\ a\ btree,\ i.e.,\ \`{}IsBtree()`,\ then\ this}}
\DoxyCodeLine{00166\ \ \ \textcolor{comment}{//\ function\ immediately\ returns\ \`{}rep-\/>btree()`.\ If\ the\ input\ is\ a\ valid\ data}}
\DoxyCodeLine{00167\ \ \ \textcolor{comment}{//\ edge\ (see\ IsDataEdge()),\ then\ a\ new\ leaf\ node\ is\ returned\ containing\ \`{}rep`}}
\DoxyCodeLine{00168\ \ \ \textcolor{comment}{//\ as\ the\ sole\ data\ edge.\ Else,\ the\ input\ is\ assumed\ to\ be\ a\ (legacy)\ concat}}
\DoxyCodeLine{00169\ \ \ \textcolor{comment}{//\ tree,\ and\ the\ input\ is\ consumed\ and\ transformed\ into\ a\ btree().}}
\DoxyCodeLine{00170\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_afd94fa49f1842405883eff6398f63704}{Create}}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \textcolor{comment}{//\ Destroys\ the\ provided\ tree.\ Should\ only\ be\ called\ by\ cord\ internal\ API's,}}
\DoxyCodeLine{00173\ \ \ \textcolor{comment}{//\ typically\ after\ a\ ref\_count.Decrement()\ on\ the\ last\ reference\ count.}}
\DoxyCodeLine{00174\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aec4d773ac07af6fe1cb5757a5487ef8b}{Destroy}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree);}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \textcolor{comment}{//\ Destruction}}
\DoxyCodeLine{00177\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a24579a859362623d52829dee404857b6}{Delete}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree)\ \{\ \textcolor{keyword}{delete}\ tree;\ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \textcolor{comment}{//\ Use\ CordRep::Unref()\ as\ we\ overload\ for\ absl::Span<CordRep*\ const>.}}
\DoxyCodeLine{00180\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_acabc9fa3a9ecbdea090d5f0a299d5993}{CordRep::Unref}};}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \textcolor{comment}{//\ Unrefs\ all\ edges\ in\ \`{}edges`\ which\ are\ assumed\ to\ be\ 'likely\ one'.}}
\DoxyCodeLine{00183\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a9d9cf2e3da0a151a9615d5129008f734}{Unref}}(\mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}}\ edges);}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \textcolor{comment}{//\ Appends\ /\ Prepends\ an\ existing\ CordRep\ instance\ to\ this\ tree.}}
\DoxyCodeLine{00186\ \ \ \textcolor{comment}{//\ The\ below\ methods\ accept\ three\ types\ of\ input:}}
\DoxyCodeLine{00187\ \ \ \textcolor{comment}{//\ 1)\ \`{}rep`\ is\ a\ data\ node\ (See\ \`{}IsDataNode`\ for\ valid\ data\ edges).}}
\DoxyCodeLine{00188\ \ \ \textcolor{comment}{//\ \`{}rep`\ is\ appended\ or\ prepended\ to\ this\ tree\ 'as\ is'.}}
\DoxyCodeLine{00189\ \ \ \textcolor{comment}{//\ 2)\ \`{}rep`\ is\ a\ BTREE.}}
\DoxyCodeLine{00190\ \ \ \textcolor{comment}{//\ \`{}rep`\ is\ merged\ into\ \`{}tree`\ respecting\ the\ Append/Prepend\ order.}}
\DoxyCodeLine{00191\ \ \ \textcolor{comment}{//\ 3)\ \`{}rep`\ is\ some\ other\ (legacy)\ type.}}
\DoxyCodeLine{00192\ \ \ \textcolor{comment}{//\ \`{}rep`\ is\ converted\ in\ place\ and\ added\ to\ \`{}tree`}}
\DoxyCodeLine{00193\ \ \ \textcolor{comment}{//\ Requires\ \`{}tree`\ and\ \`{}rep`\ to\ be\ not\ null.}}
\DoxyCodeLine{00194\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a92a48d92f6c9e8c2801e8d7a22d518d1}{Append}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00195\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ae309b7c98aec6846ddbbbba4abdb8e5a}{Prepend}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \textcolor{comment}{//\ Append/Prepend\ the\ data\ in\ \`{}data`\ to\ this\ tree.}}
\DoxyCodeLine{00198\ \ \ \textcolor{comment}{//\ The\ \`{}extra`\ parameter\ defines\ how\ much\ extra\ capacity\ should\ be\ allocated}}
\DoxyCodeLine{00199\ \ \ \textcolor{comment}{//\ for\ any\ additional\ FLAT\ being\ allocated.\ This\ is\ an\ optimization\ hint\ from}}
\DoxyCodeLine{00200\ \ \ \textcolor{comment}{//\ the\ caller.\ For\ example,\ a\ caller\ may\ need\ to\ add\ 2\ string\_views\ of\ data}}
\DoxyCodeLine{00201\ \ \ \textcolor{comment}{//\ "{}abc"{}\ and\ "{}defghi"{}\ which\ are\ not\ consecutive.\ The\ caller\ can\ in\ this\ case}}
\DoxyCodeLine{00202\ \ \ \textcolor{comment}{//\ invoke\ \`{}AddData(tree,\ "{}abc"{},\ 6)`,\ and\ any\ newly\ added\ flat\ is\ allocated}}
\DoxyCodeLine{00203\ \ \ \textcolor{comment}{//\ where\ possible\ with\ at\ least\ 6\ bytes\ of\ extra\ capacity\ beyond\ \`{}length`.}}
\DoxyCodeLine{00204\ \ \ \textcolor{comment}{//\ This\ helps\ avoiding\ data\ getting\ fragmented\ over\ multiple\ flats.}}
\DoxyCodeLine{00205\ \ \ \textcolor{comment}{//\ There\ is\ no\ limit\ on\ the\ size\ of\ \`{}data`.\ If\ \`{}data`\ can\ not\ be\ stored\ inside}}
\DoxyCodeLine{00206\ \ \ \textcolor{comment}{//\ a\ single\ flat,\ then\ the\ function\ will\ iteratively\ add\ flats\ until\ all\ data}}
\DoxyCodeLine{00207\ \ \ \textcolor{comment}{//\ has\ been\ consumed\ and\ appended\ or\ prepended\ to\ the\ tree.}}
\DoxyCodeLine{00208\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a92a48d92f6c9e8c2801e8d7a22d518d1}{Append}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \mbox{\hyperlink{classabsl_1_1string__view}{string\_view}}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}},}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ extra\ =\ 0);}
\DoxyCodeLine{00210\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ae309b7c98aec6846ddbbbba4abdb8e5a}{Prepend}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \mbox{\hyperlink{classabsl_1_1string__view}{string\_view}}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}},}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ extra\ =\ 0);}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \textcolor{comment}{//\ Returns\ a\ new\ tree,\ containing\ \`{}n`\ bytes\ of\ data\ from\ this\ instance}}
\DoxyCodeLine{00214\ \ \ \textcolor{comment}{//\ starting\ at\ offset\ \`{}offset`.\ Where\ possible,\ the\ returned\ tree\ shares}}
\DoxyCodeLine{00215\ \ \ \textcolor{comment}{//\ (re-\/uses)\ data\ edges\ and\ nodes\ with\ this\ instance\ to\ minimize\ the}}
\DoxyCodeLine{00216\ \ \ \textcolor{comment}{//\ combined\ memory\ footprint\ of\ both\ trees.}}
\DoxyCodeLine{00217\ \ \ \textcolor{comment}{//\ Requires\ \`{}offset\ +\ n\ <=\ length`.\ Returns\ \`{}nullptr`\ if\ \`{}n`\ is\ zero.}}
\DoxyCodeLine{00218\ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a2d319eb539b387626ae9558b512fe92a}{SubTree}}(\textcolor{keywordtype}{size\_t}\ offset,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}});}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \textcolor{comment}{//\ Removes\ \`{}n`\ trailing\ bytes\ from\ \`{}tree`,\ and\ returns\ the\ resulting\ tree}}
\DoxyCodeLine{00221\ \ \ \textcolor{comment}{//\ or\ data\ edge.\ Returns\ \`{}tree`\ if\ n\ is\ zero,\ and\ nullptr\ if\ n\ ==\ length.}}
\DoxyCodeLine{00222\ \ \ \textcolor{comment}{//\ This\ function\ is\ logically\ identical\ to:}}
\DoxyCodeLine{00223\ \ \ \textcolor{comment}{//\ \ \ result\ =\ tree-\/>SubTree(0,\ tree-\/>length\ -\/\ n);}}
\DoxyCodeLine{00224\ \ \ \textcolor{comment}{//\ \ \ Unref(tree);}}
\DoxyCodeLine{00225\ \ \ \textcolor{comment}{//\ \ \ return\ result;}}
\DoxyCodeLine{00226\ \ \ \textcolor{comment}{//\ However,\ the\ actual\ implementation\ will\ as\ much\ as\ possible\ perform\ 'in}}
\DoxyCodeLine{00227\ \ \ \textcolor{comment}{//\ place'\ modifications\ on\ the\ tree\ on\ all\ nodes\ and\ edges\ that\ are\ mutable.}}
\DoxyCodeLine{00228\ \ \ \textcolor{comment}{//\ For\ example,\ in\ a\ fully\ privately\ owned\ tree\ with\ the\ last\ edge\ being\ a}}
\DoxyCodeLine{00229\ \ \ \textcolor{comment}{//\ flat\ of\ length\ 12,\ RemoveSuffix(1)\ will\ simply\ set\ the\ length\ of\ that\ data}}
\DoxyCodeLine{00230\ \ \ \textcolor{comment}{//\ edge\ to\ 11,\ and\ reduce\ the\ length\ of\ all\ nodes\ on\ the\ edge\ path\ by\ 1.}}
\DoxyCodeLine{00231\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a612c6c7deac4dbe7cf96edf0f033af0f}{RemoveSuffix}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}});}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \textcolor{comment}{//\ Returns\ the\ character\ at\ the\ given\ offset.}}
\DoxyCodeLine{00234\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a4033408dde9087d7b6b676698ceaea7e}{GetCharacter}}(\textcolor{keywordtype}{size\_t}\ offset)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \textcolor{comment}{//\ Returns\ true\ if\ this\ node\ holds\ a\ single\ data\ edge,\ and\ if\ so,\ sets}}
\DoxyCodeLine{00237\ \ \ \textcolor{comment}{//\ \`{}fragment`\ to\ reference\ the\ contained\ data.\ \`{}fragment`\ is\ an\ optional}}
\DoxyCodeLine{00238\ \ \ \textcolor{comment}{//\ output\ parameter\ and\ allowed\ to\ be\ null.}}
\DoxyCodeLine{00239\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ac67b9409fdf760ccaacac795e92550e8}{IsFlat}}(\mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}*\ fragment)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \textcolor{comment}{//\ Returns\ true\ if\ the\ data\ of\ \`{}n`\ bytes\ starting\ at\ offset\ \`{}offset`}}
\DoxyCodeLine{00242\ \ \ \textcolor{comment}{//\ is\ contained\ in\ a\ single\ data\ edge,\ and\ if\ so,\ sets\ fragment\ to\ reference}}
\DoxyCodeLine{00243\ \ \ \textcolor{comment}{//\ the\ contained\ data.\ \`{}fragment`\ is\ an\ optional\ output\ parameter\ and\ allowed}}
\DoxyCodeLine{00244\ \ \ \textcolor{comment}{//\ to\ be\ null.}}
\DoxyCodeLine{00245\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ac67b9409fdf760ccaacac795e92550e8}{IsFlat}}(\textcolor{keywordtype}{size\_t}\ offset,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}},\ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}*\ fragment)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \textcolor{comment}{//\ Returns\ a\ span\ (mutable\ range\ of\ bytes)\ of\ up\ to\ \`{}size`\ bytes\ into\ the}}
\DoxyCodeLine{00248\ \ \ \textcolor{comment}{//\ last\ FLAT\ data\ edge\ inside\ this\ tree\ under\ the\ following\ conditions:}}
\DoxyCodeLine{00249\ \ \ \textcolor{comment}{//\ -\/\ none\ of\ the\ nodes\ down\ into\ the\ FLAT\ node\ are\ shared.}}
\DoxyCodeLine{00250\ \ \ \textcolor{comment}{//\ -\/\ the\ last\ data\ edge\ in\ this\ tree\ is\ a\ non-\/shared\ FLAT.}}
\DoxyCodeLine{00251\ \ \ \textcolor{comment}{//\ -\/\ the\ referenced\ FLAT\ has\ additional\ capacity\ available.}}
\DoxyCodeLine{00252\ \ \ \textcolor{comment}{//\ If\ all\ these\ conditions\ are\ met,\ a\ non-\/empty\ span\ is\ returned,\ and\ the}}
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//\ length\ of\ the\ flat\ node\ and\ involved\ tree\ nodes\ have\ been\ increased\ by}}
\DoxyCodeLine{00254\ \ \ \textcolor{comment}{//\ \`{}span.length()`.\ The\ caller\ is\ responsible\ for\ immediately\ assigning\ values}}
\DoxyCodeLine{00255\ \ \ \textcolor{comment}{//\ to\ all\ uninitialized\ data\ reference\ by\ the\ returned\ span.}}
\DoxyCodeLine{00256\ \ \ \textcolor{comment}{//\ Requires\ \`{}this-\/>refcount.IsOne()`:\ this\ function\ forces\ the\ caller\ to\ do}}
\DoxyCodeLine{00257\ \ \ \textcolor{comment}{//\ this\ fast\ path\ check\ on\ the\ top\ level\ node,\ as\ this\ is\ the\ most\ commonly}}
\DoxyCodeLine{00258\ \ \ \textcolor{comment}{//\ shared\ node\ of\ a\ cord\ tree.}}
\DoxyCodeLine{00259\ \ \ \mbox{\hyperlink{classabsl_1_1Span}{Span<char>}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a0faa9e4b69ad2a440ada824200b366b9}{GetAppendBuffer}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ad4a644ed6b9ef83b1fd9d98cd4755372}{size}});}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \textcolor{comment}{//\ Extracts\ the\ right-\/most\ data\ edge\ from\ this\ tree\ iff:}}
\DoxyCodeLine{00262\ \ \ \textcolor{comment}{//\ -\/\ the\ tree\ and\ all\ internal\ edges\ to\ the\ right-\/most\ node\ are\ not\ shared.}}
\DoxyCodeLine{00263\ \ \ \textcolor{comment}{//\ -\/\ the\ right-\/most\ node\ is\ a\ FLAT\ node\ and\ not\ shared.}}
\DoxyCodeLine{00264\ \ \ \textcolor{comment}{//\ -\/\ the\ right-\/most\ node\ has\ at\ least\ the\ desired\ extra\ capacity.}}
\DoxyCodeLine{00265\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00266\ \ \ \textcolor{comment}{//\ Returns\ \{tree,\ nullptr\}\ if\ any\ of\ the\ above\ conditions\ are\ not\ met.}}
\DoxyCodeLine{00267\ \ \ \textcolor{comment}{//\ This\ method\ effectively\ removes\ data\ from\ the\ tree.\ The\ intent\ of\ this}}
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{//\ method\ is\ to\ allow\ applications\ appending\ small\ string\ data\ to\ use}}
\DoxyCodeLine{00269\ \ \ \textcolor{comment}{//\ pre-\/existing\ capacity,\ and\ add\ the\ modified\ rep\ back\ to\ the\ tree.}}
\DoxyCodeLine{00270\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{//\ Simplified\ such\ code\ would\ look\ similar\ to\ this:}}
\DoxyCodeLine{00272\ \ \ \textcolor{comment}{//\ \ \ void\ MyTreeBuilder::Append(string\_view\ data)\ \{}}
\DoxyCodeLine{00273\ \ \ \textcolor{comment}{//\ \ \ \ \ ExtractResult\ result\ =\ CordRepBtree::ExtractAppendBuffer(tree\_,\ 1);}}
\DoxyCodeLine{00274\ \ \ \textcolor{comment}{//\ \ \ \ \ if\ (CordRep*\ rep\ =\ result.extracted)\ \{}}
\DoxyCodeLine{00275\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ size\_t\ available\ =\ rep-\/>Capacity()\ -\/\ rep-\/>length;}}
\DoxyCodeLine{00276\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ size\_t\ n\ =\ std::min(data.size(),\ n);}}
\DoxyCodeLine{00277\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ memcpy(rep-\/>Data(),\ data.data(),\ n);}}
\DoxyCodeLine{00278\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ rep-\/>length\ +=\ n;}}
\DoxyCodeLine{00279\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ data.remove\_prefix(n);}}
\DoxyCodeLine{00280\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ if\ (!result.tree-\/>IsBtree())\ \{}}
\DoxyCodeLine{00281\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ tree\_\ =\ CordRepBtree::Create(result.tree);}}
\DoxyCodeLine{00282\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00283\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ tree\_\ =\ CordRepBtree::Append(tree\_,\ rep);}}
\DoxyCodeLine{00284\ \ \ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{00285\ \ \ \textcolor{comment}{//\ \ \ \ \ ...}}
\DoxyCodeLine{00286\ \ \ \textcolor{comment}{//\ \ \ \ \ //\ Remaining\ edge\ in\ \`{}result.tree`.}}
\DoxyCodeLine{00287\ \ \ \textcolor{comment}{//\ \ \ \}}}
\DoxyCodeLine{00288\ \ \ \textcolor{keyword}{static}\ ExtractResult\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a455decdb928aa2249fa7a99305645a90}{ExtractAppendBuffer}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ extra\_capacity\ =\ 1);}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \textcolor{comment}{//\ Returns\ the\ \`{}height`\ of\ the\ tree.\ The\ height\ of\ a\ tree\ is\ limited\ to}}
\DoxyCodeLine{00292\ \ \ \textcolor{comment}{//\ kMaxHeight.\ \`{}height`\ is\ implemented\ as\ an\ \`{}int`\ as\ in\ some\ places\ we}}
\DoxyCodeLine{00293\ \ \ \textcolor{comment}{//\ use\ negative\ (-\/1)\ values\ for\ 'data\ edges'.}}
\DoxyCodeLine{00294\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[0]);\ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \textcolor{comment}{//\ Properties:\ begin,\ back,\ end,\ front/back\ boundary\ indexes.}}
\DoxyCodeLine{00297\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[1]);\ \}}
\DoxyCodeLine{00298\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[2])\ -\/\ 1;\ \}}
\DoxyCodeLine{00299\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[2]);\ \}}
\DoxyCodeLine{00300\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ab04f7ccf847e8f025ace909d9ffc74af}{EdgeType}}\ edge)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keywordflow}{return}\ edge\ ==\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a7968b58a9b26be6fb3362eeb561dfe00}{kFront}}\ ?\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}()\ :\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}}();}
\DoxyCodeLine{00302\ \ \ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \textcolor{comment}{//\ Properties:\ size\ and\ capacity.}}
\DoxyCodeLine{00305\ \ \ \textcolor{comment}{//\ \`{}capacity`\ contains\ the\ current\ capacity\ of\ this\ instance,\ where}}
\DoxyCodeLine{00306\ \ \ \textcolor{comment}{//\ \`{}kMaxCapacity`\ contains\ the\ maximum\ capacity\ of\ a\ btree\ node.}}
\DoxyCodeLine{00307\ \ \ \textcolor{comment}{//\ For\ now,\ \`{}capacity`\ and\ \`{}kMaxCapacity`\ return\ the\ same\ value,\ but\ this\ may}}
\DoxyCodeLine{00308\ \ \ \textcolor{comment}{//\ change\ in\ the\ future\ if\ we\ see\ benefit\ in\ dynamically\ sizing\ 'small'\ nodes}}
\DoxyCodeLine{00309\ \ \ \textcolor{comment}{//\ to\ 'large'\ nodes\ for\ large\ data\ trees.}}
\DoxyCodeLine{00310\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ad4a644ed6b9ef83b1fd9d98cd4755372}{size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}}()\ -\/\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}();\ \}}
\DoxyCodeLine{00311\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aede4ae042e998d4ec4d194d3ddadf655}{capacity}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a70550a0c06e86a6b94e76485c6d267da}{kMaxCapacity}};\ \}}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \ \ \textcolor{comment}{//\ Edge\ access}}
\DoxyCodeLine{00314\ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a4dc6e751fde1b94b259fbc01601ad384}{Edge}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00315\ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a4dc6e751fde1b94b259fbc01601ad384}{Edge}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ab04f7ccf847e8f025ace909d9ffc74af}{EdgeType}}\ edge\_type)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00316\ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a27bd5dce6482fc047d1fc147a5bd174b}{Edges}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00317\ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a27bd5dce6482fc047d1fc147a5bd174b}{Edges}}(\textcolor{keywordtype}{size\_t}\ begin,\ \textcolor{keywordtype}{size\_t}\ end)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ \ \ \textcolor{comment}{//\ Returns\ reference\ to\ the\ data\ edge\ at\ \`{}index`.}}
\DoxyCodeLine{00320\ \ \ \textcolor{comment}{//\ Requires\ this\ instance\ to\ be\ a\ leaf\ node,\ and\ \`{}index`\ to\ be\ valid\ index.}}
\DoxyCodeLine{00321\ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a34d81a3d62c523c68f3d6742b8de2823}{Data}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \textcolor{comment}{//\ Diagnostics:\ returns\ true\ if\ \`{}tree`\ is\ valid\ and\ internally\ consistent.}}
\DoxyCodeLine{00324\ \ \ \textcolor{comment}{//\ If\ \`{}shallow`\ is\ false,\ then\ the\ provided\ top\ level\ node\ and\ all\ child\ nodes}}
\DoxyCodeLine{00325\ \ \ \textcolor{comment}{//\ below\ it\ are\ recursively\ checked.\ If\ \`{}shallow`\ is\ true,\ only\ the\ provided}}
\DoxyCodeLine{00326\ \ \ \textcolor{comment}{//\ node\ in\ \`{}tree`\ and\ the\ cumulative\ length,\ type\ and\ height\ of\ the\ direct}}
\DoxyCodeLine{00327\ \ \ \textcolor{comment}{//\ child\ nodes\ of\ \`{}tree`\ are\ checked.\ The\ value\ of\ \`{}shallow`\ is\ ignored\ if\ the}}
\DoxyCodeLine{00328\ \ \ \textcolor{comment}{//\ internal\ \`{}cord\_btree\_exhaustive\_validation`\ diagnostics\ variable\ is\ true,}}
\DoxyCodeLine{00329\ \ \ \textcolor{comment}{//\ in\ which\ case\ the\ performed\ validations\ works\ as\ if\ \`{}shallow`\ were\ false.}}
\DoxyCodeLine{00330\ \ \ \textcolor{comment}{//\ This\ function\ is\ intended\ for\ debugging\ and\ testing\ purposes\ only.}}
\DoxyCodeLine{00331\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a7e752d55e0d2961f12f1317b192ac26f}{IsValid}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \textcolor{keywordtype}{bool}\ shallow\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \textcolor{comment}{//\ Diagnostics:\ asserts\ that\ the\ provided\ tree\ is\ valid.}}
\DoxyCodeLine{00334\ \ \ \textcolor{comment}{//\ \`{}AssertValid()`\ performs\ a\ shallow\ validation\ by\ default.\ \`{}shallow`\ can\ be}}
\DoxyCodeLine{00335\ \ \ \textcolor{comment}{//\ set\ to\ false\ in\ which\ case\ an\ exhaustive\ validation\ is\ performed.\ This}}
\DoxyCodeLine{00336\ \ \ \textcolor{comment}{//\ function\ is\ implemented\ in\ terms\ of\ calling\ \`{}IsValid()`\ and\ asserting\ the}}
\DoxyCodeLine{00337\ \ \ \textcolor{comment}{//\ return\ value\ to\ be\ true.\ See\ \`{}IsValid()`\ for\ more\ information.}}
\DoxyCodeLine{00338\ \ \ \textcolor{comment}{//\ This\ function\ is\ intended\ for\ debugging\ and\ testing\ purposes\ only.}}
\DoxyCodeLine{00339\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ae2af017ade3417d70a9b33c0898806ee}{AssertValid}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \textcolor{keywordtype}{bool}\ shallow\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00340\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ae2af017ade3417d70a9b33c0898806ee}{AssertValid}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ shallow\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \textcolor{comment}{//\ Diagnostics:\ dump\ the\ contents\ of\ this\ tree\ to\ \`{}stream`.}}
\DoxyCodeLine{00344\ \ \ \textcolor{comment}{//\ This\ function\ is\ intended\ for\ debugging\ and\ testing\ purposes\ only.}}
\DoxyCodeLine{00345\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a61a4e4ab479fdc73f6b5dffe3144c25e}{Dump}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}},\ std::ostream\&\ stream);}
\DoxyCodeLine{00346\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a61a4e4ab479fdc73f6b5dffe3144c25e}{Dump}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}},\ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ label,}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::ostream\&\ stream);}
\DoxyCodeLine{00348\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a61a4e4ab479fdc73f6b5dffe3144c25e}{Dump}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}},\ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ label,}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ include\_contents,\ std::ostream\&\ stream);}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \ \ \textcolor{comment}{//\ Adds\ the\ edge\ \`{}edge`\ to\ this\ node\ if\ possible.\ \`{}owned`\ indicates\ if\ the}}
\DoxyCodeLine{00352\ \ \ \textcolor{comment}{//\ current\ node\ is\ potentially\ shared\ or\ not\ with\ other\ threads.\ Returns:}}
\DoxyCodeLine{00353\ \ \ \textcolor{comment}{//\ -\/\ \{kSelf,\ <this>\}}}
\DoxyCodeLine{00354\ \ \ \textcolor{comment}{//\ \ \ The\ edge\ was\ directly\ added\ to\ this\ node.}}
\DoxyCodeLine{00355\ \ \ \textcolor{comment}{//\ -\/\ \{kCopied,\ <node>\}}}
\DoxyCodeLine{00356\ \ \ \textcolor{comment}{//\ \ \ The\ edge\ was\ added\ to\ a\ copy\ of\ this\ node.}}
\DoxyCodeLine{00357\ \ \ \textcolor{comment}{//\ -\/\ \{kPopped,\ New(edge,\ height())\}}}
\DoxyCodeLine{00358\ \ \ \textcolor{comment}{//\ \ \ A\ new\ leg\ with\ the\ edge\ was\ created\ as\ this\ node\ has\ no\ extra\ capacity.}}
\DoxyCodeLine{00359\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00360\ \ \ \textcolor{keyword}{inline}\ OpResult\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a0600690f991278381d79dedfd9cb8e18}{AddEdge}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2raw__hash__set__allocator__test_8cc_a28ae0b80b9cc17231af68c36728922d1}{owned}},\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ edge,\ \textcolor{keywordtype}{size\_t}\ delta);}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ \textcolor{comment}{//\ Replaces\ the\ front\ or\ back\ edge\ with\ the\ provided\ new\ edge.\ Returns:}}
\DoxyCodeLine{00363\ \ \ \textcolor{comment}{//\ -\/\ \{kSelf,\ <this>\}}}
\DoxyCodeLine{00364\ \ \ \textcolor{comment}{//\ \ \ The\ edge\ was\ directly\ set\ in\ this\ node.\ The\ old\ edge\ is\ unreffed.}}
\DoxyCodeLine{00365\ \ \ \textcolor{comment}{//\ -\/\ \{kCopied,\ <node>\}}}
\DoxyCodeLine{00366\ \ \ \textcolor{comment}{//\ \ \ A\ copy\ of\ this\ node\ was\ created\ with\ the\ new\ edge\ value.}}
\DoxyCodeLine{00367\ \ \ \textcolor{comment}{//\ In\ both\ cases,\ the\ function\ adopts\ a\ reference\ on\ \`{}edge`.}}
\DoxyCodeLine{00368\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00369\ \ \ OpResult\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a825f1c66afc6d85b0c0a5d1aa55acd0c}{SetEdge}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2raw__hash__set__allocator__test_8cc_a28ae0b80b9cc17231af68c36728922d1}{owned}},\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ edge,\ \textcolor{keywordtype}{size\_t}\ delta);}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \textcolor{comment}{//\ Creates\ a\ new\ empty\ node\ at\ the\ specified\ height.}}
\DoxyCodeLine{00372\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aec70e4691c43863e3072fa0accc067ab}{New}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}}\ =\ 0);}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \textcolor{comment}{//\ Creates\ a\ new\ node\ containing\ \`{}rep`,\ with\ the\ height\ being\ computed}}
\DoxyCodeLine{00375\ \ \ \textcolor{comment}{//\ automatically\ based\ on\ the\ type\ of\ \`{}rep`.}}
\DoxyCodeLine{00376\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aec70e4691c43863e3072fa0accc067ab}{New}}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \ \ \textcolor{comment}{//\ Creates\ a\ new\ node\ containing\ both\ \`{}front`\ and\ \`{}back`\ at\ height}}
\DoxyCodeLine{00379\ \ \ \textcolor{comment}{//\ \`{}front.height()\ +\ 1`.\ Requires\ \`{}back.height()\ ==\ front.height()`.}}
\DoxyCodeLine{00380\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aec70e4691c43863e3072fa0accc067ab}{New}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ front,\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}});}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00382\ \ \ \textcolor{comment}{//\ Creates\ a\ fully\ balanced\ tree\ from\ the\ provided\ tree\ by\ rebuilding\ a\ new}}
\DoxyCodeLine{00383\ \ \ \textcolor{comment}{//\ tree\ from\ all\ data\ edges\ in\ the\ input.\ This\ function\ is\ automatically}}
\DoxyCodeLine{00384\ \ \ \textcolor{comment}{//\ invoked\ internally\ when\ the\ tree\ exceeds\ the\ maximum\ height.}}
\DoxyCodeLine{00385\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a887558a2a834a607dbd9e6a4775ce971}{Rebuild}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree);}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00388\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00389\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{\string~CordRepBtree}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \textcolor{comment}{//\ Initializes\ the\ main\ properties\ \`{}tag`,\ \`{}begin`,\ \`{}end`,\ \`{}height`.}}
\DoxyCodeLine{00392\ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ InitInstance(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}},\ \textcolor{keywordtype}{size\_t}\ begin\ =\ 0,\ \textcolor{keywordtype}{size\_t}\ end\ =\ 0);}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ \textcolor{comment}{//\ Direct\ property\ access\ begin\ /\ end}}
\DoxyCodeLine{00395\ \ \ \textcolor{keywordtype}{void}\ set\_begin(\textcolor{keywordtype}{size\_t}\ begin)\ \{\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}});\ \}}
\DoxyCodeLine{00396\ \ \ \textcolor{keywordtype}{void}\ set\_end(\textcolor{keywordtype}{size\_t}\ end)\ \{\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[2]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}});\ \}}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \textcolor{comment}{//\ Decreases\ the\ value\ of\ \`{}begin`\ by\ \`{}n`,\ and\ returns\ the\ new\ value.\ Notice}}
\DoxyCodeLine{00399\ \ \ \textcolor{comment}{//\ how\ this\ returns\ the\ new\ value\ unlike\ atomic::fetch\_add\ which\ returns\ the}}
\DoxyCodeLine{00400\ \ \ \textcolor{comment}{//\ old\ value.\ This\ is\ because\ this\ is\ used\ to\ prepend\ edges\ at\ 'begin\ -\/\ 1'.}}
\DoxyCodeLine{00401\ \ \ \textcolor{keywordtype}{size\_t}\ sub\_fetch\_begin(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}})\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[1]\ -\/=\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}});}
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[1];}
\DoxyCodeLine{00404\ \ \ \}}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ \textcolor{comment}{//\ Increases\ the\ value\ of\ \`{}end`\ by\ \`{}n`,\ and\ returns\ the\ previous\ value.\ This}}
\DoxyCodeLine{00407\ \ \ \textcolor{comment}{//\ function\ is\ typically\ used\ to\ append\ edges\ at\ 'end'.}}
\DoxyCodeLine{00408\ \ \ \textcolor{keywordtype}{size\_t}\ fetch\_add\_end(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}})\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_1_1numext_aadfb7303ce6c1a8f0bdf86cb2cbad6be}{uint8\_t}}\ current\ =\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[2];}
\DoxyCodeLine{00410\ \ \ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[2]\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespaceEigen_1_1numext_aadfb7303ce6c1a8f0bdf86cb2cbad6be}{uint8\_t}}\textcolor{keyword}{>}(current\ +\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}});}
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keywordflow}{return}\ current;}
\DoxyCodeLine{00412\ \ \ \}}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \ \ \textcolor{comment}{//\ Returns\ the\ index\ of\ the\ last\ edge\ starting\ on,\ or\ before\ \`{}offset`,\ with}}
\DoxyCodeLine{00415\ \ \ \textcolor{comment}{//\ \`{}n`\ containing\ the\ relative\ offset\ of\ \`{}offset`\ inside\ that\ edge.}}
\DoxyCodeLine{00416\ \ \ \textcolor{comment}{//\ Requires\ \`{}offset`\ <\ length.}}
\DoxyCodeLine{00417\ \ \ Position\ IndexOf(\textcolor{keywordtype}{size\_t}\ offset)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \ \ \textcolor{comment}{//\ Returns\ the\ index\ of\ the\ last\ edge\ starting\ before\ \`{}offset`,\ with\ \`{}n`}}
\DoxyCodeLine{00420\ \ \ \textcolor{comment}{//\ containing\ the\ relative\ offset\ of\ \`{}offset`\ inside\ that\ edge.}}
\DoxyCodeLine{00421\ \ \ \textcolor{comment}{//\ This\ function\ is\ useful\ to\ find\ the\ edges\ for\ some\ span\ of\ bytes\ ending\ at}}
\DoxyCodeLine{00422\ \ \ \textcolor{comment}{//\ \`{}offset`\ (i.e.,\ \`{}n`\ bytes).\ For\ example:}}
\DoxyCodeLine{00423\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00424\ \ \ \textcolor{comment}{//\ \ \ Position\ pos\ =\ IndexBefore(n)}}
\DoxyCodeLine{00425\ \ \ \textcolor{comment}{//\ \ \ edges\ =\ Edges(begin(),\ pos.index)\ \ \ \ \ //\ All\ full\ edges\ (may\ be\ empty)}}
\DoxyCodeLine{00426\ \ \ \textcolor{comment}{//\ \ \ last\ =\ Sub(Edge(pos.index),\ 0,\ pos.n)\ //\ Last\ partial\ edge\ (may\ be\ empty)}}
\DoxyCodeLine{00427\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00428\ \ \ \textcolor{comment}{//\ Requires\ 0\ <\ \`{}offset`\ <=\ length.}}
\DoxyCodeLine{00429\ \ \ Position\ IndexBefore(\textcolor{keywordtype}{size\_t}\ offset)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \textcolor{comment}{//\ Returns\ the\ index\ of\ the\ edge\ ending\ at\ (or\ on)\ length\ \`{}length`,\ and\ the}}
\DoxyCodeLine{00432\ \ \ \textcolor{comment}{//\ number\ of\ bytes\ inside\ that\ edge\ up\ to\ \`{}length`.\ For\ example,\ if\ we\ have\ a}}
\DoxyCodeLine{00433\ \ \ \textcolor{comment}{//\ Node\ with\ 2\ edges,\ one\ of\ 10\ and\ one\ of\ 20\ long,\ then\ IndexOfLength(27)}}
\DoxyCodeLine{00434\ \ \ \textcolor{comment}{//\ will\ return\ \{1,\ 17\},\ and\ IndexOfLength(10)\ will\ return\ \{0,\ 10\}.}}
\DoxyCodeLine{00435\ \ \ Position\ IndexOfLength(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00437\ \ \ \textcolor{comment}{//\ Identical\ to\ the\ above\ function\ except\ starting\ from\ the\ position\ \`{}front`.}}
\DoxyCodeLine{00438\ \ \ \textcolor{comment}{//\ This\ function\ is\ equivalent\ to\ \`{}IndexBefore(front.n\ +\ offset)`,\ with}}
\DoxyCodeLine{00439\ \ \ \textcolor{comment}{//\ the\ difference\ that\ this\ function\ is\ optimized\ to\ start\ at\ \`{}front.index`.}}
\DoxyCodeLine{00440\ \ \ Position\ IndexBefore(Position\ front,\ \textcolor{keywordtype}{size\_t}\ offset)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00442\ \ \ \textcolor{comment}{//\ Returns\ the\ index\ of\ the\ edge\ directly\ beyond\ the\ edge\ containing\ offset}}
\DoxyCodeLine{00443\ \ \ \textcolor{comment}{//\ \`{}offset`,\ with\ \`{}n`\ containing\ the\ distance\ of\ that\ edge\ from\ \`{}offset`.}}
\DoxyCodeLine{00444\ \ \ \textcolor{comment}{//\ This\ function\ is\ useful\ for\ iteratively\ finding\ suffix\ nodes\ and\ remaining}}
\DoxyCodeLine{00445\ \ \ \textcolor{comment}{//\ partial\ bytes\ in\ left-\/most\ suffix\ nodes\ as\ for\ example\ in\ CopySuffix.}}
\DoxyCodeLine{00446\ \ \ \textcolor{comment}{//\ Requires\ \`{}offset`\ <\ length.}}
\DoxyCodeLine{00447\ \ \ Position\ IndexBeyond(\textcolor{keywordtype}{size\_t}\ offset)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \textcolor{comment}{//\ Creates\ a\ new\ leaf\ node\ containing\ as\ much\ data\ as\ possible\ from\ \`{}data`.}}
\DoxyCodeLine{00450\ \ \ \textcolor{comment}{//\ The\ data\ is\ added\ either\ forwards\ or\ reversed\ depending\ on\ \`{}edge\_type`.}}
\DoxyCodeLine{00451\ \ \ \textcolor{comment}{//\ Callers\ must\ check\ the\ length\ of\ the\ returned\ node\ to\ determine\ if\ all\ data}}
\DoxyCodeLine{00452\ \ \ \textcolor{comment}{//\ was\ copied\ or\ not.}}
\DoxyCodeLine{00453\ \ \ \textcolor{comment}{//\ See\ the\ \`{}Append/Prepend`\ function\ for\ the\ meaning\ and\ purpose\ of\ \`{}extra`.}}
\DoxyCodeLine{00454\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00455\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ NewLeaf(\mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}},\ \textcolor{keywordtype}{size\_t}\ extra);}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \textcolor{comment}{//\ Creates\ a\ raw\ copy\ of\ this\ Btree\ node\ with\ the\ specified\ length,\ copying}}
\DoxyCodeLine{00458\ \ \ \textcolor{comment}{//\ all\ properties,\ but\ without\ adding\ any\ references\ to\ existing\ edges.}}
\DoxyCodeLine{00459\ \ \ CordRepBtree*\ CopyRaw(\textcolor{keywordtype}{size\_t}\ new\_length)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ \textcolor{comment}{//\ Creates\ a\ full\ copy\ of\ this\ Btree\ node,\ adding\ a\ reference\ on\ all\ edges.}}
\DoxyCodeLine{00462\ \ \ CordRepBtree*\ Copy()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ \textcolor{comment}{//\ Creates\ a\ partial\ copy\ of\ this\ Btree\ node,\ copying\ all\ edges\ up\ to\ \`{}end`,}}
\DoxyCodeLine{00465\ \ \ \textcolor{comment}{//\ adding\ a\ reference\ on\ each\ copied\ edge,\ and\ sets\ the\ length\ of\ the\ newly}}
\DoxyCodeLine{00466\ \ \ \textcolor{comment}{//\ created\ copy\ to\ \`{}new\_length`.}}
\DoxyCodeLine{00467\ \ \ CordRepBtree*\ CopyBeginTo(\textcolor{keywordtype}{size\_t}\ end,\ \textcolor{keywordtype}{size\_t}\ new\_length)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00468\ }
\DoxyCodeLine{00469\ \ \ \textcolor{comment}{//\ Returns\ a\ tree\ containing\ the\ edges\ [tree-\/>begin(),\ end)\ and\ length}}
\DoxyCodeLine{00470\ \ \ \textcolor{comment}{//\ of\ \`{}new\_length`.\ This\ method\ consumes\ a\ reference\ on\ the\ provided}}
\DoxyCodeLine{00471\ \ \ \textcolor{comment}{//\ tree,\ and\ logically\ performs\ the\ following\ operation:}}
\DoxyCodeLine{00472\ \ \ \textcolor{comment}{//\ \ \ result\ =\ tree-\/>CopyBeginTo(end,\ new\_length);}}
\DoxyCodeLine{00473\ \ \ \textcolor{comment}{//\ \ \ CordRep::Unref(tree);}}
\DoxyCodeLine{00474\ \ \ \textcolor{comment}{//\ \ \ return\ result;}}
\DoxyCodeLine{00475\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ ConsumeBeginTo(CordRepBtree*\ tree,\ \textcolor{keywordtype}{size\_t}\ end,}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ new\_length);}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \ \ \textcolor{comment}{//\ Creates\ a\ partial\ copy\ of\ this\ Btree\ node,\ copying\ all\ edges\ starting\ at}}
\DoxyCodeLine{00479\ \ \ \textcolor{comment}{//\ \`{}begin`,\ adding\ a\ reference\ on\ each\ copied\ edge,\ and\ sets\ the\ length\ of}}
\DoxyCodeLine{00480\ \ \ \textcolor{comment}{//\ the\ newly\ created\ copy\ to\ \`{}new\_length`.}}
\DoxyCodeLine{00481\ \ \ CordRepBtree*\ CopyToEndFrom(\textcolor{keywordtype}{size\_t}\ begin,\ \textcolor{keywordtype}{size\_t}\ new\_length)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00483\ \ \ \textcolor{comment}{//\ Extracts\ and\ returns\ the\ front\ edge\ from\ the\ provided\ tree.}}
\DoxyCodeLine{00484\ \ \ \textcolor{comment}{//\ This\ method\ consumes\ a\ reference\ on\ the\ provided\ tree,\ and\ logically}}
\DoxyCodeLine{00485\ \ \ \textcolor{comment}{//\ performs\ the\ following\ operation:}}
\DoxyCodeLine{00486\ \ \ \textcolor{comment}{//\ \ \ edge\ =\ CordRep::Ref(tree-\/>Edge(kFront));}}
\DoxyCodeLine{00487\ \ \ \textcolor{comment}{//\ \ \ CordRep::Unref(tree);}}
\DoxyCodeLine{00488\ \ \ \textcolor{comment}{//\ \ \ return\ edge;}}
\DoxyCodeLine{00489\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ ExtractFront(CordRepBtree*\ tree);}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \textcolor{comment}{//\ Returns\ a\ tree\ containing\ the\ result\ of\ appending\ \`{}right`\ to\ \`{}left`.}}
\DoxyCodeLine{00492\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ MergeTrees(CordRepBtree*\ left,\ CordRepBtree*\ right);}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \textcolor{comment}{//\ Fallback\ functions\ for\ \`{}Create()`,\ \`{}Append()`\ and\ \`{}Prepend()`\ which}}
\DoxyCodeLine{00495\ \ \ \textcolor{comment}{//\ deal\ with\ legacy\ /\ non\ conforming\ input,\ i.e.:\ CONCAT\ trees.}}
\DoxyCodeLine{00496\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ CreateSlow(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00497\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ AppendSlow(CordRepBtree*,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00498\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ PrependSlow(CordRepBtree*,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \textcolor{comment}{//\ Recursively\ rebuilds\ \`{}tree`\ into\ \`{}stack`.\ If\ 'consume`\ is\ set\ to\ true,\ the}}
\DoxyCodeLine{00501\ \ \ \textcolor{comment}{//\ function\ will\ consume\ a\ reference\ on\ \`{}tree`.\ \`{}stack`\ is\ a\ null\ terminated}}
\DoxyCodeLine{00502\ \ \ \textcolor{comment}{//\ array\ containing\ the\ new\ tree's\ state,\ with\ the\ current\ leaf\ node\ at}}
\DoxyCodeLine{00503\ \ \ \textcolor{comment}{//\ stack[0],\ and\ parent\ nodes\ above\ that,\ or\ null\ for\ 'top\ of\ tree'.}}
\DoxyCodeLine{00504\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a887558a2a834a607dbd9e6a4775ce971}{Rebuild}}(CordRepBtree**\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2cord__rep__btree_8cc_a66e96c2dda890c63ecbff4f9719c2500}{stack}},\ CordRepBtree*\ tree,\ \textcolor{keywordtype}{bool}\ consume);}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00506\ \ \ \textcolor{comment}{//\ Aligns\ existing\ edges\ to\ start\ at\ index\ 0,\ to\ allow\ for\ a\ new\ edge\ to\ be}}
\DoxyCodeLine{00507\ \ \ \textcolor{comment}{//\ added\ to\ the\ back\ of\ the\ current\ edges.}}
\DoxyCodeLine{00508\ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ AlignBegin();}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \ \ \textcolor{comment}{//\ Aligns\ existing\ edges\ to\ end\ at\ \`{}capacity`,\ to\ allow\ for\ a\ new\ edge\ to\ be}}
\DoxyCodeLine{00511\ \ \ \textcolor{comment}{//\ added\ in\ front\ of\ the\ current\ edges.}}
\DoxyCodeLine{00512\ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ AlignEnd();}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \ \ \textcolor{comment}{//\ Adds\ the\ provided\ edge\ to\ this\ node.}}
\DoxyCodeLine{00515\ \ \ \textcolor{comment}{//\ Requires\ this\ node\ to\ have\ capacity\ for\ the\ edge.\ Realigns\ /\ moves}}
\DoxyCodeLine{00516\ \ \ \textcolor{comment}{//\ existing\ edges\ as\ needed\ to\ prepend\ or\ append\ the\ new\ edge.}}
\DoxyCodeLine{00517\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00518\ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ Add(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00519\ }
\DoxyCodeLine{00520\ \ \ \textcolor{comment}{//\ Adds\ the\ provided\ edges\ to\ this\ node.}}
\DoxyCodeLine{00521\ \ \ \textcolor{comment}{//\ Requires\ this\ node\ to\ have\ capacity\ for\ the\ edges.\ Realigns\ /\ moves}}
\DoxyCodeLine{00522\ \ \ \textcolor{comment}{//\ existing\ edges\ as\ needed\ to\ prepend\ or\ append\ the\ new\ edges.}}
\DoxyCodeLine{00523\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00524\ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ Add(\mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}});}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \textcolor{comment}{//\ Adds\ data\ from\ \`{}data`\ to\ this\ node\ until\ either\ all\ data\ has\ been\ consumed,}}
\DoxyCodeLine{00527\ \ \ \textcolor{comment}{//\ or\ there\ is\ no\ more\ capacity\ for\ additional\ flat\ nodes\ inside\ this\ node.}}
\DoxyCodeLine{00528\ \ \ \textcolor{comment}{//\ Requires\ the\ current\ node\ to\ be\ a\ leaf\ node,\ data\ to\ be\ non\ empty,\ and\ the}}
\DoxyCodeLine{00529\ \ \ \textcolor{comment}{//\ current\ node\ to\ have\ capacity\ for\ at\ least\ one\ more\ data\ edge.}}
\DoxyCodeLine{00530\ \ \ \textcolor{comment}{//\ Returns\ any\ remaining\ data\ from\ \`{}data`\ that\ was\ not\ added,\ which\ is}}
\DoxyCodeLine{00531\ \ \ \textcolor{comment}{//\ depending\ on\ the\ edge\ type\ (front\ /\ back)\ either\ the\ remaining\ prefix\ of}}
\DoxyCodeLine{00532\ \ \ \textcolor{comment}{//\ suffix\ of\ the\ input.}}
\DoxyCodeLine{00533\ \ \ \textcolor{comment}{//\ See\ the\ \`{}Append/Prepend`\ function\ for\ the\ meaning\ and\ purpose\ of\ \`{}extra`.}}
\DoxyCodeLine{00534\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00535\ \ \ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ AddData(\mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}},\ \textcolor{keywordtype}{size\_t}\ extra);}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \ \ \textcolor{comment}{//\ Replace\ the\ front\ or\ back\ edge\ with\ the\ provided\ value.}}
\DoxyCodeLine{00538\ \ \ \textcolor{comment}{//\ Adopts\ a\ reference\ on\ \`{}edge`\ and\ unrefs\ the\ old\ edge.}}
\DoxyCodeLine{00539\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00540\ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a825f1c66afc6d85b0c0a5d1aa55acd0c}{SetEdge}}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ edge);}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00542\ \ \ \textcolor{comment}{//\ Returns\ a\ partial\ copy\ of\ the\ current\ tree\ containing\ the\ first\ \`{}n`\ bytes}}
\DoxyCodeLine{00543\ \ \ \textcolor{comment}{//\ of\ data.\ \`{}CopyResult`\ contains\ both\ the\ resulting\ edge\ and\ its\ height.\ The}}
\DoxyCodeLine{00544\ \ \ \textcolor{comment}{//\ resulting\ tree\ may\ be\ less\ high\ than\ the\ current\ tree,\ or\ even\ be\ a\ single}}
\DoxyCodeLine{00545\ \ \ \textcolor{comment}{//\ matching\ data\ edge\ if\ \`{}allow\_folding`\ is\ set\ to\ true.}}
\DoxyCodeLine{00546\ \ \ \textcolor{comment}{//\ For\ example,\ if\ \`{}n\ ==\ 1`,\ then\ the\ result\ will\ be\ the\ single\ data\ edge,\ and}}
\DoxyCodeLine{00547\ \ \ \textcolor{comment}{//\ height\ will\ be\ set\ to\ -\/1\ (one\ below\ the\ owning\ leaf\ node).\ If\ n\ ==\ 0,\ this}}
\DoxyCodeLine{00548\ \ \ \textcolor{comment}{//\ function\ returns\ null.\ Requires\ \`{}n\ <=\ length`}}
\DoxyCodeLine{00549\ \ \ CopyResult\ CopyPrefix(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}},\ \textcolor{keywordtype}{bool}\ allow\_folding\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \textcolor{comment}{//\ Returns\ a\ partial\ copy\ of\ the\ current\ tree\ containing\ all\ data\ starting}}
\DoxyCodeLine{00552\ \ \ \textcolor{comment}{//\ after\ \`{}offset`.\ \`{}CopyResult`\ contains\ both\ the\ resulting\ edge\ and\ its}}
\DoxyCodeLine{00553\ \ \ \textcolor{comment}{//\ height.\ The\ resulting\ tree\ may\ be\ less\ high\ than\ the\ current\ tree,\ or\ even}}
\DoxyCodeLine{00554\ \ \ \textcolor{comment}{//\ be\ a\ single\ matching\ data\ edge.\ For\ example,\ if\ \`{}n\ ==\ length\ -\/\ 1`,\ then\ the}}
\DoxyCodeLine{00555\ \ \ \textcolor{comment}{//\ result\ will\ be\ a\ single\ data\ edge,\ and\ height\ will\ be\ set\ to\ -\/1\ (one\ below}}
\DoxyCodeLine{00556\ \ \ \textcolor{comment}{//\ the\ owning\ leaf\ node).}}
\DoxyCodeLine{00557\ \ \ \textcolor{comment}{//\ Requires\ \`{}offset\ <\ length`}}
\DoxyCodeLine{00558\ \ \ CopyResult\ CopySuffix(\textcolor{keywordtype}{size\_t}\ offset);}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \textcolor{comment}{//\ Returns\ a\ OpResult\ value\ of\ \{this,\ kSelf\}\ or\ \{Copy(),\ kCopied\}}}
\DoxyCodeLine{00561\ \ \ \textcolor{comment}{//\ depending\ on\ the\ value\ of\ \`{}owned`.}}
\DoxyCodeLine{00562\ \ \ \textcolor{keyword}{inline}\ OpResult\ ToOpResult(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2raw__hash__set__allocator__test_8cc_a28ae0b80b9cc17231af68c36728922d1}{owned}});}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ \ \ \textcolor{comment}{//\ Adds\ \`{}rep`\ to\ the\ specified\ tree,\ returning\ the\ modified\ tree.}}
\DoxyCodeLine{00565\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00566\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ AddCordRep(CordRepBtree*\ tree,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \ \ \textcolor{comment}{//\ Adds\ \`{}data`\ to\ the\ specified\ tree,\ returning\ the\ modified\ tree.}}
\DoxyCodeLine{00569\ \ \ \textcolor{comment}{//\ See\ the\ \`{}Append/Prepend`\ function\ for\ the\ meaning\ and\ purpose\ of\ \`{}extra`.}}
\DoxyCodeLine{00570\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00571\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ AddData(CordRepBtree*\ tree,\ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}},}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ extra\ =\ 0);}
\DoxyCodeLine{00573\ }
\DoxyCodeLine{00574\ \ \ \textcolor{comment}{//\ Merges\ \`{}src`\ into\ \`{}dst`\ with\ \`{}src`\ being\ added\ either\ before\ (kFront)\ or}}
\DoxyCodeLine{00575\ \ \ \textcolor{comment}{//\ after\ (kBack)\ \`{}dst`.\ Requires\ the\ height\ of\ \`{}dst`\ to\ be\ greater\ than\ or}}
\DoxyCodeLine{00576\ \ \ \textcolor{comment}{//\ equal\ to\ the\ height\ of\ \`{}src`.}}
\DoxyCodeLine{00577\ \ \ \textcolor{keyword}{template}\ <EdgeType\ edge\_type>}
\DoxyCodeLine{00578\ \ \ \textcolor{keyword}{static}\ CordRepBtree*\ Merge(CordRepBtree*\ dst,\ CordRepBtree*\ src);}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \ \ \textcolor{comment}{//\ Fallback\ version\ of\ GetAppendBuffer\ for\ large\ trees:\ GetAppendBuffer()}}
\DoxyCodeLine{00581\ \ \ \textcolor{comment}{//\ implements\ an\ inlined\ version\ for\ trees\ of\ limited\ height\ (3\ levels),}}
\DoxyCodeLine{00582\ \ \ \textcolor{comment}{//\ GetAppendBufferSlow\ implements\ the\ logic\ for\ large\ trees.}}
\DoxyCodeLine{00583\ \ \ Span<char>\ GetAppendBufferSlow(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ad4a644ed6b9ef83b1fd9d98cd4755372}{size}});}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \textcolor{comment}{//\ \`{}edges\_`\ contains\ all\ edges\ starting\ from\ this\ instance.}}
\DoxyCodeLine{00586\ \ \ \textcolor{comment}{//\ These\ are\ explicitly\ \`{}child`\ edges\ only,\ a\ cord\ btree\ (or\ any\ cord\ tree\ in}}
\DoxyCodeLine{00587\ \ \ \textcolor{comment}{//\ that\ respect)\ does\ not\ store\ \`{}parent`\ pointers\ anywhere:\ multiple\ trees\ /}}
\DoxyCodeLine{00588\ \ \ \textcolor{comment}{//\ parents\ can\ reference\ the\ same\ shared\ child\ edge.\ The\ type\ of\ these\ edges}}
\DoxyCodeLine{00589\ \ \ \textcolor{comment}{//\ depends\ on\ the\ height\ of\ the\ node.\ \`{}Leaf\ nodes`\ (height\ ==\ 0)\ contain\ \`{}data}}
\DoxyCodeLine{00590\ \ \ \textcolor{comment}{//\ edges`\ (external\ or\ flat\ nodes,\ or\ sub-\/strings\ thereof).\ All\ other\ nodes}}
\DoxyCodeLine{00591\ \ \ \textcolor{comment}{//\ (height\ >\ 0)\ contain\ pointers\ to\ BTREE\ nodes\ with\ a\ height\ of\ \`{}height\ -\/\ 1`.}}
\DoxyCodeLine{00592\ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a70550a0c06e86a6b94e76485c6d267da}{kMaxCapacity}}];}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtreeTestPeer}{CordRepBtreeTestPeer}};}
\DoxyCodeLine{00595\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtreeNavigator}{CordRepBtreeNavigator}};}
\DoxyCodeLine{00596\ \};}
\DoxyCodeLine{00597\ }
\DoxyCodeLine{00598\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a1b0561065120a0caf211b2347e9b738b}{CordRep::btree}}()\ \{}
\DoxyCodeLine{00599\ \ \ assert(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_acc67da3dfa090abfa5253509bf0763ff}{IsBtree}}());}
\DoxyCodeLine{00600\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00601\ \}}
\DoxyCodeLine{00602\ }
\DoxyCodeLine{00603\ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a1b0561065120a0caf211b2347e9b738b}{CordRep::btree}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00604\ \ \ assert(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_acc67da3dfa090abfa5253509bf0763ff}{IsBtree}}());}
\DoxyCodeLine{00605\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00606\ \}}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ CordRepBtree::InitInstance(\textcolor{keywordtype}{int}\ height,\ \textcolor{keywordtype}{size\_t}\ begin,\ \textcolor{keywordtype}{size\_t}\ end)\ \{}
\DoxyCodeLine{00609\ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a179f49019ae42fc01bdf54b6093a5c33}{tag}}\ =\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695a5fda263a28d677bc3acf1359d769ecd1}{BTREE}};}
\DoxyCodeLine{00610\ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}});}
\DoxyCodeLine{00611\ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}});}
\DoxyCodeLine{00612\ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_abc16d4e0cf6feecf8f885179a0f9780a}{storage}}[2]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}});}
\DoxyCodeLine{00613\ \}}
\DoxyCodeLine{00614\ }
\DoxyCodeLine{00615\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a4dc6e751fde1b94b259fbc01601ad384}{CordRepBtree::Edge}}(\textcolor{keywordtype}{size\_t}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00616\ \ \ assert(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}\ >=\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}());}
\DoxyCodeLine{00617\ \ \ assert(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}\ <\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}}());}
\DoxyCodeLine{00618\ \ \ \textcolor{keywordflow}{return}\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}];}
\DoxyCodeLine{00619\ \}}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a4dc6e751fde1b94b259fbc01601ad384}{CordRepBtree::Edge}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ab04f7ccf847e8f025ace909d9ffc74af}{EdgeType}}\ edge\_type)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00622\ \ \ \textcolor{keywordflow}{return}\ edges\_[edge\_type\ ==\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a7968b58a9b26be6fb3362eeb561dfe00}{kFront}}\ ?\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}()\ :\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}}()];}
\DoxyCodeLine{00623\ \}}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00625\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a27bd5dce6482fc047d1fc147a5bd174b}{CordRepBtree::Edges}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00626\ \ \ \textcolor{keywordflow}{return}\ \{edges\_\ +\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}(),\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ad4a644ed6b9ef83b1fd9d98cd4755372}{size}}()\};}
\DoxyCodeLine{00627\ \}}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a27bd5dce6482fc047d1fc147a5bd174b}{CordRepBtree::Edges}}(\textcolor{keywordtype}{size\_t}\ begin,}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ end)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00631\ \ \ assert(begin\ <=\ end);}
\DoxyCodeLine{00632\ \ \ assert(begin\ >=\ this-\/>\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}());}
\DoxyCodeLine{00633\ \ \ assert(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end\ <=\ this-\/>}}\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}}());}
\DoxyCodeLine{00634\ \ \ \textcolor{keywordflow}{return}\ \{edges\_\ +\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}},\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(end\ -\/\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}})\};}
\DoxyCodeLine{00635\ \}}
\DoxyCodeLine{00636\ }
\DoxyCodeLine{00637\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1string__view}{absl::string\_view}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a34d81a3d62c523c68f3d6742b8de2823}{CordRepBtree::Data}}(\textcolor{keywordtype}{size\_t}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00638\ \ \ assert(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}}()\ ==\ 0);}
\DoxyCodeLine{00639\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_ae66daf2fb35dc2cb5d2feba9d24e057c}{EdgeData}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a4dc6e751fde1b94b259fbc01601ad384}{Edge}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}));}
\DoxyCodeLine{00640\ \}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aec70e4691c43863e3072fa0accc067ab}{CordRepBtree::New}}(\textcolor{keywordtype}{int}\ height)\ \{}
\DoxyCodeLine{00643\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}};}
\DoxyCodeLine{00644\ \ \ tree-\/>length\ =\ 0;}
\DoxyCodeLine{00645\ \ \ tree-\/>InitInstance(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}});}
\DoxyCodeLine{00646\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00647\ \}}
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00649\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aec70e4691c43863e3072fa0accc067ab}{CordRepBtree::New}}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00650\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}};}
\DoxyCodeLine{00651\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}}\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_acc67da3dfa090abfa5253509bf0763ff}{IsBtree}}()\ ?\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>btree()-\/>height()\ +\ 1\ :\ 0;}
\DoxyCodeLine{00652\ \ \ tree-\/>length\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}-\/>length;}
\DoxyCodeLine{00653\ \ \ tree-\/>InitInstance(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}},\ \textcolor{comment}{/*begin=*/}0,\ \textcolor{comment}{/*end=*/}1);}
\DoxyCodeLine{00654\ \ \ tree-\/>edges\_[0]\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}};}
\DoxyCodeLine{00655\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00656\ \}}
\DoxyCodeLine{00657\ }
\DoxyCodeLine{00658\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aec70e4691c43863e3072fa0accc067ab}{CordRepBtree::New}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ front,}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ back)\ \{}
\DoxyCodeLine{00660\ \ \ assert(front-\/>height()\ ==\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}}-\/>height());}
\DoxyCodeLine{00661\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}};}
\DoxyCodeLine{00662\ \ \ tree-\/>length\ =\ front-\/>length\ +\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}}-\/>length;}
\DoxyCodeLine{00663\ \ \ tree-\/>InitInstance(front-\/>height()\ +\ 1,\ \textcolor{comment}{/*begin=*/}0,\ \textcolor{comment}{/*end=*/}2);}
\DoxyCodeLine{00664\ \ \ tree-\/>edges\_[0]\ =\ front;}
\DoxyCodeLine{00665\ \ \ tree-\/>edges\_[1]\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}};}
\DoxyCodeLine{00666\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00667\ \}}
\DoxyCodeLine{00668\ }
\DoxyCodeLine{00669\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a9d9cf2e3da0a151a9615d5129008f734}{CordRepBtree::Unref}}(\mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}}\ edges)\ \{}
\DoxyCodeLine{00670\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ edge\ :\ edges)\ \{}
\DoxyCodeLine{00671\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2base_2optimization_8h_a7de82b630fc76606a15c23483680a6a1}{ABSL\_PREDICT\_FALSE}}(!edge-\/>refcount.Decrement()))\ \{}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ab12d09bf31000a7345b895b47c73bf63}{CordRep::Destroy}}(edge);}
\DoxyCodeLine{00673\ \ \ \ \ \}}
\DoxyCodeLine{00674\ \ \ \}}
\DoxyCodeLine{00675\ \}}
\DoxyCodeLine{00676\ }
\DoxyCodeLine{00677\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ CordRepBtree::CopyRaw(\textcolor{keywordtype}{size\_t}\ new\_length)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00678\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}};}
\DoxyCodeLine{00679\ }
\DoxyCodeLine{00680\ \ \ \textcolor{comment}{//\ \`{}length`\ and\ \`{}refcount`\ are\ the\ first\ members\ of\ \`{}CordRepBtree`.}}
\DoxyCodeLine{00681\ \ \ \textcolor{comment}{//\ We\ initialize\ \`{}length`\ using\ the\ given\ length,\ have\ \`{}refcount`\ be\ set\ to}}
\DoxyCodeLine{00682\ \ \ \textcolor{comment}{//\ ref\ =\ 1\ through\ its\ default\ constructor,\ and\ copy\ all\ data\ beyond}}
\DoxyCodeLine{00683\ \ \ \textcolor{comment}{//\ 'refcount'\ which\ starts\ with\ \`{}tag`\ using\ a\ single\ memcpy:\ all\ contents}}
\DoxyCodeLine{00684\ \ \ \textcolor{comment}{//\ except\ \`{}refcount`\ is\ trivially\ copyable,\ and\ the\ compiler\ does\ not}}
\DoxyCodeLine{00685\ \ \ \textcolor{comment}{//\ efficiently\ coalesce\ member-\/wise\ copy\ of\ these\ members.}}
\DoxyCodeLine{00686\ \ \ \textcolor{comment}{//\ See\ https://gcc.godbolt.org/z/qY8zsca6z}}
\DoxyCodeLine{00687\ \ \ \textcolor{comment}{//\ LINT.IfChange(copy\_raw)}}
\DoxyCodeLine{00688\ \ \ tree-\/>length\ =\ new\_length;}
\DoxyCodeLine{00689\ \ \ uint8\_t*\ dst\ =\ \&tree-\/>tag;}
\DoxyCodeLine{00690\ \ \ \textcolor{keyword}{const}\ uint8\_t*\ src\ =\ \&\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a179f49019ae42fc01bdf54b6093a5c33}{tag}};}
\DoxyCodeLine{00691\ \ \ \textcolor{keyword}{const}\ ptrdiff\_t\ offset\ =\ src\ -\/\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }uint8\_t*\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00692\ \ \ memcpy(dst,\ src,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}})\ -\/\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(offset));}
\DoxyCodeLine{00693\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00694\ \ \ \textcolor{comment}{//\ LINT.ThenChange()}}
\DoxyCodeLine{00695\ \}}
\DoxyCodeLine{00696\ }
\DoxyCodeLine{00697\ \textcolor{keyword}{inline}\ CordRepBtree*\ CordRepBtree::Copy()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00698\ \ \ CordRepBtree*\ tree\ =\ CopyRaw(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}});}
\DoxyCodeLine{00699\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}\ :\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a27bd5dce6482fc047d1fc147a5bd174b}{Edges}}())\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ad73d5d8140ce641920d1b3894515ed08}{CordRep::Ref}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00700\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00701\ \}}
\DoxyCodeLine{00702\ }
\DoxyCodeLine{00703\ \textcolor{keyword}{inline}\ CordRepBtree*\ CordRepBtree::CopyToEndFrom(\textcolor{keywordtype}{size\_t}\ begin,}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ new\_length)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00705\ \ \ assert(begin\ >=\ this-\/>\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}());}
\DoxyCodeLine{00706\ \ \ assert(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin\ <=\ this-\/>}}\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}}());}
\DoxyCodeLine{00707\ \ \ CordRepBtree*\ tree\ =\ CopyRaw(new\_length);}
\DoxyCodeLine{00708\ \ \ tree-\/>set\_begin(begin);}
\DoxyCodeLine{00709\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ edge\ :\ tree-\/>Edges())\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ad73d5d8140ce641920d1b3894515ed08}{CordRep::Ref}}(edge);}
\DoxyCodeLine{00710\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00711\ \}}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ \textcolor{keyword}{inline}\ CordRepBtree*\ CordRepBtree::CopyBeginTo(\textcolor{keywordtype}{size\_t}\ end,}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ new\_length)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00715\ \ \ assert(end\ <=\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aede4ae042e998d4ec4d194d3ddadf655}{capacity}}());}
\DoxyCodeLine{00716\ \ \ assert(end\ >=\ this-\/>\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}());}
\DoxyCodeLine{00717\ \ \ CordRepBtree*\ tree\ =\ CopyRaw(new\_length);}
\DoxyCodeLine{00718\ \ \ tree-\/>set\_end(end);}
\DoxyCodeLine{00719\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a0ac13e285c6943d08218aabe9b418472}{CordRep}}*\ edge\ :\ tree-\/>Edges())\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ad73d5d8140ce641920d1b3894515ed08}{CordRep::Ref}}(edge);}
\DoxyCodeLine{00720\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00721\ \}}
\DoxyCodeLine{00722\ }
\DoxyCodeLine{00723\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ CordRepBtree::AlignBegin()\ \{}
\DoxyCodeLine{00724\ \ \ \textcolor{comment}{//\ The\ below\ code\ itself\ does\ not\ need\ to\ be\ fast\ as\ typically\ we\ have}}
\DoxyCodeLine{00725\ \ \ \textcolor{comment}{//\ mono-\/directional\ append/prepend\ calls,\ and\ \`{}begin`\ /\ \`{}end`\ are\ typically}}
\DoxyCodeLine{00726\ \ \ \textcolor{comment}{//\ adjusted\ no\ more\ than\ once.\ But\ we\ want\ to\ avoid\ potential\ register\ clobber}}
\DoxyCodeLine{00727\ \ \ \textcolor{comment}{//\ effects,\ making\ the\ compiler\ emit\ register\ save/store/spills,\ and\ minimize}}
\DoxyCodeLine{00728\ \ \ \textcolor{comment}{//\ the\ size\ of\ code.}}
\DoxyCodeLine{00729\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ delta\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}();}
\DoxyCodeLine{00730\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2base_2optimization_8h_a7de82b630fc76606a15c23483680a6a1}{ABSL\_PREDICT\_FALSE}}(delta\ !=\ 0))\ \{}
\DoxyCodeLine{00731\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ new\_end\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}}()\ -\/\ delta;}
\DoxyCodeLine{00732\ \ \ \ \ set\_begin(0);}
\DoxyCodeLine{00733\ \ \ \ \ set\_end(new\_end);}
\DoxyCodeLine{00734\ \ \ \ \ \textcolor{comment}{//\ TODO(mvels):\ we\ can\ write\ this\ using\ 2\ loads\ /\ 2\ stores\ depending\ on}}
\DoxyCodeLine{00735\ \ \ \ \ \textcolor{comment}{//\ total\ size\ for\ the\ kMaxCapacity\ =\ 6\ case.\ I.e.,\ we\ can\ branch\ (switch)\ on}}
\DoxyCodeLine{00736\ \ \ \ \ \textcolor{comment}{//\ size,\ and\ then\ do\ overlapping\ load/store\ of\ up\ to\ 4\ pointers\ (inlined\ as}}
\DoxyCodeLine{00737\ \ \ \ \ \textcolor{comment}{//\ XMM,\ YMM\ or\ ZMM\ load/store)\ and\ up\ to\ 2\ pointers\ (XMM\ /\ YMM),\ which\ is\ a)}}
\DoxyCodeLine{00738\ \ \ \ \ \textcolor{comment}{//\ compact\ and\ b)\ not\ clobbering\ any\ registers.}}
\DoxyCodeLine{00739\ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2optimization_8h_ae82b0d29c28ec653c998c43f5d5ff2dd}{ABSL\_ASSUME}}(new\_end\ <=\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a70550a0c06e86a6b94e76485c6d267da}{kMaxCapacity}});}
\DoxyCodeLine{00740\ \textcolor{preprocessor}{\#ifdef\ \_\_clang\_\_}}
\DoxyCodeLine{00741\ \textcolor{preprocessor}{\#pragma\ unroll\ 1}}
\DoxyCodeLine{00742\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00743\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ 0;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ <\ new\_end;\ ++\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ \{}
\DoxyCodeLine{00744\ \ \ \ \ \ \ edges\_[\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}]\ =\ edges\_[\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ +\ delta];}
\DoxyCodeLine{00745\ \ \ \ \ \}}
\DoxyCodeLine{00746\ \ \ \}}
\DoxyCodeLine{00747\ \}}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ CordRepBtree::AlignEnd()\ \{}
\DoxyCodeLine{00750\ \ \ \textcolor{comment}{//\ See\ comments\ in\ \`{}AlignBegin`\ for\ motivation\ on\ the\ hand-\/rolled\ for\ loops.}}
\DoxyCodeLine{00751\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ delta\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aede4ae042e998d4ec4d194d3ddadf655}{capacity}}()\ -\/\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}}();}
\DoxyCodeLine{00752\ \ \ \textcolor{keywordflow}{if}\ (delta\ !=\ 0)\ \{}
\DoxyCodeLine{00753\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ new\_begin\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}()\ +\ delta;}
\DoxyCodeLine{00754\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ new\_end\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a374bb020263a017668c4f8a036f2ba35}{end}}()\ +\ delta;}
\DoxyCodeLine{00755\ \ \ \ \ set\_begin(new\_begin);}
\DoxyCodeLine{00756\ \ \ \ \ set\_end(new\_end);}
\DoxyCodeLine{00757\ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2optimization_8h_ae82b0d29c28ec653c998c43f5d5ff2dd}{ABSL\_ASSUME}}(new\_end\ <=\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a70550a0c06e86a6b94e76485c6d267da}{kMaxCapacity}});}
\DoxyCodeLine{00758\ \textcolor{preprocessor}{\#ifdef\ \_\_clang\_\_}}
\DoxyCodeLine{00759\ \textcolor{preprocessor}{\#pragma\ unroll\ 1}}
\DoxyCodeLine{00760\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ =\ new\_end\ -\/\ 1;\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ >=\ new\_begin;\ -\/-\/\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}})\ \{}
\DoxyCodeLine{00762\ \ \ \ \ \ \ edges\_[\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}]\ =\ edges\_[\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca865c0c0b4ab0e063e5caa3387c1a8741}{i}}\ -\/\ delta];}
\DoxyCodeLine{00763\ \ \ \ \ \}}
\DoxyCodeLine{00764\ \ \ \}}
\DoxyCodeLine{00765\ \}}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00767\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00768\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ CordRepBtree::Add<CordRepBtree::kBack>(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00769\ \ \ AlignBegin();}
\DoxyCodeLine{00770\ \ \ edges\_[fetch\_add\_end(1)]\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}};}
\DoxyCodeLine{00771\ \}}
\DoxyCodeLine{00772\ }
\DoxyCodeLine{00773\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00774\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ CordRepBtree::Add<CordRepBtree::kBack>(}
\DoxyCodeLine{00775\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}}\ edges)\ \{}
\DoxyCodeLine{00776\ \ \ AlignBegin();}
\DoxyCodeLine{00777\ \ \ \textcolor{keywordtype}{size\_t}\ new\_end\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_a8fd806ad19b8f5513a4cf18cbf77532c}{end}}();}
\DoxyCodeLine{00778\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ edge\ :\ edges)\ edges\_[new\_end++]\ =\ edge;}
\DoxyCodeLine{00779\ \ \ set\_end(new\_end);}
\DoxyCodeLine{00780\ \}}
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00782\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00783\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ CordRepBtree::Add<CordRepBtree::kFront>(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00784\ \ \ AlignEnd();}
\DoxyCodeLine{00785\ \ \ edges\_[sub\_fetch\_begin(1)]\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}};}
\DoxyCodeLine{00786\ \}}
\DoxyCodeLine{00787\ }
\DoxyCodeLine{00788\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00789\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ CordRepBtree::Add<CordRepBtree::kFront>(}
\DoxyCodeLine{00790\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1Span}{absl::Span<CordRep*\ const>}}\ edges)\ \{}
\DoxyCodeLine{00791\ \ \ AlignEnd();}
\DoxyCodeLine{00792\ \ \ \textcolor{keywordtype}{size\_t}\ new\_begin\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_aa9f974458dc400bd897fe724a13dcd47}{begin}}()\ -\/\ edges.\mbox{\hyperlink{classabsl_1_1Span_a92186c247036e10dd12603c09f8b8797}{size}}();}
\DoxyCodeLine{00793\ \ \ set\_begin(new\_begin);}
\DoxyCodeLine{00794\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ edge\ :\ edges)\ edges\_[new\_begin++]\ =\ edge;}
\DoxyCodeLine{00795\ \}}
\DoxyCodeLine{00796\ }
\DoxyCodeLine{00797\ \textcolor{keyword}{template}\ <CordRepBtree::EdgeType\ edge\_type>}
\DoxyCodeLine{00798\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a825f1c66afc6d85b0c0a5d1aa55acd0c}{CordRepBtree::SetEdge}}(CordRep*\ edge)\ \{}
\DoxyCodeLine{00799\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ idx\ =\ edge\_type\ ==\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a7968b58a9b26be6fb3362eeb561dfe00}{kFront}}\ ?\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}()\ :\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}}();}
\DoxyCodeLine{00800\ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_acabc9fa3a9ecbdea090d5f0a299d5993}{CordRep::Unref}}(edges\_[idx]);}
\DoxyCodeLine{00801\ \ \ edges\_[idx]\ =\ edge;}
\DoxyCodeLine{00802\ \}}
\DoxyCodeLine{00803\ }
\DoxyCodeLine{00804\ \textcolor{keyword}{inline}\ CordRepBtree::OpResult\ CordRepBtree::ToOpResult(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2raw__hash__set__allocator__test_8cc_a28ae0b80b9cc17231af68c36728922d1}{owned}})\ \{}
\DoxyCodeLine{00805\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2raw__hash__set__allocator__test_8cc_a28ae0b80b9cc17231af68c36728922d1}{owned}}\ ?\ OpResult\{\textcolor{keyword}{this},\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a84e60848c401e0765c2dfb93f6b39abda0f1e38fdddd3c27c63e23a688211dccf}{kSelf}}\}\ :\ OpResult\{Copy(),\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a84e60848c401e0765c2dfb93f6b39abda2a9132d69165bd6d88bae09c755549f4}{kCopied}}\};}
\DoxyCodeLine{00806\ \}}
\DoxyCodeLine{00807\ }
\DoxyCodeLine{00808\ \textcolor{keyword}{inline}\ CordRepBtree::Position\ CordRepBtree::IndexOf(\textcolor{keywordtype}{size\_t}\ offset)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00809\ \ \ assert(offset\ <\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}});}
\DoxyCodeLine{00810\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}();}
\DoxyCodeLine{00811\ \ \ \textcolor{keywordflow}{while}\ (offset\ >=\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}})\ offset\ -\/=\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}++]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}};}
\DoxyCodeLine{00812\ \ \ \textcolor{keywordflow}{return}\ \{\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}},\ offset\};}
\DoxyCodeLine{00813\ \}}
\DoxyCodeLine{00814\ }
\DoxyCodeLine{00815\ \textcolor{keyword}{inline}\ CordRepBtree::Position\ CordRepBtree::IndexBefore(\textcolor{keywordtype}{size\_t}\ offset)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00816\ \ \ assert(offset\ >\ 0);}
\DoxyCodeLine{00817\ \ \ assert(offset\ <=\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}});}
\DoxyCodeLine{00818\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}();}
\DoxyCodeLine{00819\ \ \ \textcolor{keywordflow}{while}\ (offset\ >\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}})\ offset\ -\/=\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}++]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}};}
\DoxyCodeLine{00820\ \ \ \textcolor{keywordflow}{return}\ \{\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}},\ offset\};}
\DoxyCodeLine{00821\ \}}
\DoxyCodeLine{00822\ }
\DoxyCodeLine{00823\ \textcolor{keyword}{inline}\ CordRepBtree::Position\ CordRepBtree::IndexBefore(Position\ front,}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ offset)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00825\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}\ =\ front.index;}
\DoxyCodeLine{00826\ \ \ offset\ =\ offset\ +\ front.n;}
\DoxyCodeLine{00827\ \ \ \textcolor{keywordflow}{while}\ (offset\ >\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}})\ offset\ -\/=\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}++]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}};}
\DoxyCodeLine{00828\ \ \ \textcolor{keywordflow}{return}\ \{\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}},\ offset\};}
\DoxyCodeLine{00829\ \}}
\DoxyCodeLine{00830\ }
\DoxyCodeLine{00831\ \textcolor{keyword}{inline}\ CordRepBtree::Position\ CordRepBtree::IndexOfLength(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00832\ \ \ assert(\mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}}\ <=\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}});}
\DoxyCodeLine{00833\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a44c8afd2b39a0f4fcf90de2752ac2f32}{back}}();}
\DoxyCodeLine{00834\ \ \ \textcolor{keywordtype}{size\_t}\ strip\ =\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}}\ -\/\ \mbox{\hyperlink{namespaceabsl_a828e0f13fb3947cdf6406b7a4feec8aca7b8b965ad4bca0e41ab51de7b31363a1}{n}};}
\DoxyCodeLine{00835\ \ \ \textcolor{keywordflow}{while}\ (strip\ >=\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}})\ strip\ -\/=\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}-\/-\/]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}};}
\DoxyCodeLine{00836\ \ \ \textcolor{keywordflow}{return}\ \{\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}},\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}}\ -\/\ strip\};}
\DoxyCodeLine{00837\ \}}
\DoxyCodeLine{00838\ }
\DoxyCodeLine{00839\ \textcolor{keyword}{inline}\ CordRepBtree::Position\ CordRepBtree::IndexBeyond(}
\DoxyCodeLine{00840\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ offset)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00841\ \ \ \textcolor{comment}{//\ We\ need\ to\ find\ the\ edge\ which\ \`{}starting\ offset`\ is\ beyond\ (>=)`offset`.}}
\DoxyCodeLine{00842\ \ \ \textcolor{comment}{//\ For\ this\ we\ can't\ use\ the\ \`{}offset\ -\/=\ length`\ logic\ of\ IndexOf.\ Instead,\ we}}
\DoxyCodeLine{00843\ \ \ \textcolor{comment}{//\ track\ the\ offset\ of\ the\ \`{}current\ edge`\ in\ \`{}off`,\ which\ we\ increase\ as\ we}}
\DoxyCodeLine{00844\ \ \ \textcolor{comment}{//\ iterate\ over\ the\ edges\ until\ we\ find\ the\ matching\ edge.}}
\DoxyCodeLine{00845\ \ \ \textcolor{keywordtype}{size\_t}\ off\ =\ 0;}
\DoxyCodeLine{00846\ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}\ =\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a8d35bffb94e80010540d6b664da66420}{begin}}();}
\DoxyCodeLine{00847\ \ \ \textcolor{keywordflow}{while}\ (offset\ >\ off)\ off\ +=\ edges\_[\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}}++]-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}};}
\DoxyCodeLine{00848\ \ \ \textcolor{keywordflow}{return}\ \{\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a64ec3ca35e9de957e01f69a5f26b79c2}{index}},\ off\ -\/\ offset\};}
\DoxyCodeLine{00849\ \}}
\DoxyCodeLine{00850\ }
\DoxyCodeLine{00851\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_afd94fa49f1842405883eff6398f63704}{CordRepBtree::Create}}(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00852\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceabsl_1_1cord__internal_a9bf9d0904698eeba5542e3b0898f4ca9}{IsDataEdge}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}}))\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_aec70e4691c43863e3072fa0accc067ab}{New}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00853\ \ \ \textcolor{keywordflow}{return}\ CreateSlow(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00854\ \}}
\DoxyCodeLine{00855\ }
\DoxyCodeLine{00856\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1Span}{Span<char>}}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a0faa9e4b69ad2a440ada824200b366b9}{CordRepBtree::GetAppendBuffer}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc_8cc_aad9b71a31372d5c0ab9c23163efe9544}{size}})\ \{}
\DoxyCodeLine{00857\ \ \ assert(\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ad7d28b6fa504948c72197b36686942b2}{refcount}}.\mbox{\hyperlink{classabsl_1_1cord__internal_1_1RefcountAndFlags_ac137c81eae5cb008dcb1f1ecac2d25f0}{IsOne}}());}
\DoxyCodeLine{00858\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree\ =\ \textcolor{keyword}{this};}
\DoxyCodeLine{00859\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}}\ =\ this-\/>\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}}();}
\DoxyCodeLine{00860\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ n1\ =\ tree;}
\DoxyCodeLine{00861\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ n2\ =\ tree;}
\DoxyCodeLine{00862\ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ n3\ =\ tree;}
\DoxyCodeLine{00863\ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}})\ \{}
\DoxyCodeLine{00864\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{00865\ \ \ \ \ \ \ tree\ =\ tree-\/>Edge(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a2327c58db3531dd7b16922f99c91423a}{kBack}})-\/>btree();}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!tree-\/>refcount.IsOne())\ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00867\ \ \ \ \ \ \ n2\ =\ tree;}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_af9989e38f1071368c602381dbc67fa4d}{ABSL\_FALLTHROUGH\_INTENDED}};}
\DoxyCodeLine{00869\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00870\ \ \ \ \ \ \ tree\ =\ tree-\/>Edge(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a2327c58db3531dd7b16922f99c91423a}{kBack}})-\/>btree();}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!tree-\/>refcount.IsOne())\ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00872\ \ \ \ \ \ \ n1\ =\ tree;}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_af9989e38f1071368c602381dbc67fa4d}{ABSL\_FALLTHROUGH\_INTENDED}};}
\DoxyCodeLine{00874\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00875\ \ \ \ \ \ \ tree\ =\ tree-\/>Edge(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a2327c58db3531dd7b16922f99c91423a}{kBack}})-\/>btree();}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!tree-\/>refcount.IsOne())\ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_af9989e38f1071368c602381dbc67fa4d}{ABSL\_FALLTHROUGH\_INTENDED}};}
\DoxyCodeLine{00878\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ edge\ =\ tree-\/>Edge(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a2327c58db3531dd7b16922f99c91423a}{kBack}});}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!edge-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_ad7d28b6fa504948c72197b36686942b2}{refcount}}.\mbox{\hyperlink{classabsl_1_1cord__internal_1_1RefcountAndFlags_ac137c81eae5cb008dcb1f1ecac2d25f0}{IsOne}}())\ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (edge-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_a179f49019ae42fc01bdf54b6093a5c33}{tag}}\ <\ \mbox{\hyperlink{namespaceabsl_1_1cord__internal_a61ea586e32032a0c22ea05d092c2b695ac9d7cb6a8d7380945d713291c7bf3de3}{FLAT}})\ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00882\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ avail\ =\ edge-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_aa50cfbda2dbc22022c2b2a6580e6da91}{flat}}()-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepFlat_afb5f988ffdd98b1c964b5ed2c2f0344b}{Capacity}}()\ -\/\ edge-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}};}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (avail\ ==\ 0)\ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ delta\ =\ (std::min)(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ad4a644ed6b9ef83b1fd9d98cd4755372}{size}},\ avail);}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \mbox{\hyperlink{classabsl_1_1Span}{Span<char>}}\ span\ =\ \{edge-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_aa50cfbda2dbc22022c2b2a6580e6da91}{flat}}()-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRepFlat_a68bdcff4a926ba602783494d95272715}{Data}}()\ +\ edge-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}},\ delta\};}
\DoxyCodeLine{00886\ \ \ \ \ \ \ edge-\/>\mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep_af1380a03e3795f21ee242127e607261f}{length}}\ +=\ delta;}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a035592f231fdaf06fa7e5e6d9f9fe70f}{height}})\ \{}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \ \ n3-\/>length\ +=\ delta;}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_af9989e38f1071368c602381dbc67fa4d}{ABSL\_FALLTHROUGH\_INTENDED}};}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00892\ \ \ \ \ \ \ \ \ \ \ n2-\/>length\ +=\ delta;}
\DoxyCodeLine{00893\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_af9989e38f1071368c602381dbc67fa4d}{ABSL\_FALLTHROUGH\_INTENDED}};}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \ \ n1-\/>length\ +=\ delta;}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2base_2attributes_8h_af9989e38f1071368c602381dbc67fa4d}{ABSL\_FALLTHROUGH\_INTENDED}};}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ \ \ tree-\/>length\ +=\ delta;}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ span;}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00902\ \ \ \}}
\DoxyCodeLine{00903\ \ \ \textcolor{keywordflow}{return}\ GetAppendBufferSlow(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ad4a644ed6b9ef83b1fd9d98cd4755372}{size}});}
\DoxyCodeLine{00904\ \}}
\DoxyCodeLine{00905\ }
\DoxyCodeLine{00906\ \textcolor{keyword}{extern}\ \textcolor{keyword}{template}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ CordRepBtree::AddCordRep<CordRepBtree::kBack>(}
\DoxyCodeLine{00907\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00908\ }
\DoxyCodeLine{00909\ \textcolor{keyword}{extern}\ \textcolor{keyword}{template}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ CordRepBtree::AddCordRep<CordRepBtree::kFront>(}
\DoxyCodeLine{00910\ \ \ \ \ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00911\ }
\DoxyCodeLine{00912\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_a92a48d92f6c9e8c2801e8d7a22d518d1}{CordRepBtree::Append}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00913\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2base_2optimization_8h_ae4445fb0c40ea7cc8e1c30647069d1a5}{ABSL\_PREDICT\_TRUE}}(\mbox{\hyperlink{namespaceabsl_1_1cord__internal_a9bf9d0904698eeba5542e3b0898f4ca9}{IsDataEdge}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})))\ \{}
\DoxyCodeLine{00914\ \ \ \ \ \textcolor{keywordflow}{return}\ CordRepBtree::AddCordRep<kBack>(tree,\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00915\ \ \ \}}
\DoxyCodeLine{00916\ \ \ \textcolor{keywordflow}{return}\ AppendSlow(tree,\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00917\ \}}
\DoxyCodeLine{00918\ }
\DoxyCodeLine{00919\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ae309b7c98aec6846ddbbbba4abdb8e5a}{CordRepBtree::Prepend}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,\ \mbox{\hyperlink{structabsl_1_1cord__internal_1_1CordRep}{CordRep}}*\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})\ \{}
\DoxyCodeLine{00920\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2base_2optimization_8h_ae4445fb0c40ea7cc8e1c30647069d1a5}{ABSL\_PREDICT\_TRUE}}(\mbox{\hyperlink{namespaceabsl_1_1cord__internal_a9bf9d0904698eeba5542e3b0898f4ca9}{IsDataEdge}}(\mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}})))\ \{}
\DoxyCodeLine{00921\ \ \ \ \ \textcolor{keywordflow}{return}\ CordRepBtree::AddCordRep<kFront>(tree,\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00922\ \ \ \}}
\DoxyCodeLine{00923\ \ \ \textcolor{keywordflow}{return}\ PrependSlow(tree,\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2cord__analysis_8cc_a2c5f19185456bd83cc1b428c25581b9e}{rep}});}
\DoxyCodeLine{00924\ \}}
\DoxyCodeLine{00925\ }
\DoxyCodeLine{00926\ \textcolor{preprocessor}{\#ifdef\ NDEBUG}}
\DoxyCodeLine{00927\ }
\DoxyCodeLine{00928\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ae2af017ade3417d70a9b33c0898806ee}{CordRepBtree::AssertValid}}(\mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree}{CordRepBtree}}*\ tree,}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \textcolor{comment}{/*\ shallow\ */})\ \{}
\DoxyCodeLine{00930\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00931\ \}}
\DoxyCodeLine{00932\ }
\DoxyCodeLine{00933\ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ CordRepBtree*\ \mbox{\hyperlink{classabsl_1_1cord__internal_1_1CordRepBtree_ae2af017ade3417d70a9b33c0898806ee}{CordRepBtree::AssertValid}}(\textcolor{keyword}{const}\ CordRepBtree*\ tree,}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \textcolor{comment}{/*\ shallow\ */})\ \{}
\DoxyCodeLine{00935\ \ \ \textcolor{keywordflow}{return}\ tree;}
\DoxyCodeLine{00936\ \}}
\DoxyCodeLine{00937\ }
\DoxyCodeLine{00938\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00939\ }
\DoxyCodeLine{00940\ \}\ \ \textcolor{comment}{//\ namespace\ cord\_internal}}
\DoxyCodeLine{00941\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2config_8h_a49c6cd9be2b7205d48557c9fa90ec5a6}{ABSL\_NAMESPACE\_END}}}
\DoxyCodeLine{00942\ \}\ \ \textcolor{comment}{//\ namespace\ absl}}
\DoxyCodeLine{00943\ }
\DoxyCodeLine{00944\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ ABSL\_STRINGS\_INTERNAL\_CORD\_REP\_BTREE\_H\_}}

\end{DoxyCode}
