\doxysection{fixed\+\_\+point.\+hpp}
\hypertarget{fixed__point_8hpp_source}{}\label{fixed__point_8hpp_source}\index{tensor/fixed\_point.hpp@{tensor/fixed\_point.hpp}}
\mbox{\hyperlink{fixed__point_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ FIXED\_POINT\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ FIXED\_POINT\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ \{}
\DoxyCodeLine{00009\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00010\ \ \ \ \ int16\_t\ value;\ \textcolor{comment}{//\ 16-\/bit\ integer\ to\ store\ the\ fixed-\/point\ value}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ fractional\_bits\ =\ 10;}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ fractional\_mask\ =\ (1\ <<\ fractional\_bits)\ -\/\ 1;}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ max\_integer\_part\ =\ 15;\ \textcolor{comment}{//\ 2\string^4\ -\/\ 1\ (5\ bits\ for\ integer\ part,\ including\ sign\ bit)}}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ min\_integer\_part\ =\ -\/16;\ \textcolor{comment}{//\ -\/2\string^4\ (5\ bits\ for\ integer\ part,\ including\ sign\ bit)}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{comment}{//\ Constructors}}
\DoxyCodeLine{00020\ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10_a6d161a720b92d05f62fbfa5877476c86}{FixedPointQ5\_10}}()\ :\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}(0)\ \{\}}
\DoxyCodeLine{00021\ \ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10_a9469e4b938ce13c0c98bd24405ae2adc}{FixedPointQ5\_10}}(\textcolor{keywordtype}{int}\ integer\_part)\ \{}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (integer\_part\ >\ max\_integer\_part)\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \ \ \ \ integer\_part\ =\ max\_integer\_part;}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (integer\_part\ <\ min\_integer\_part)\ \{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ integer\_part\ =\ min\_integer\_part;}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}\ =\ integer\_part\ <<\ fractional\_bits;}
\DoxyCodeLine{00028\ \ \ \ \ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10_a6b4af3871838575b71f839e5e02afa18}{FixedPointQ5\_10}}(\textcolor{keywordtype}{float}\ float\_value)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ max\_value\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(max\_integer\_part\ +\ 1)\ -\/\ 1.0f\ /\ (1\ <<\ fractional\_bits);}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ min\_value\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(min\_integer\_part);}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (float\_value\ >\ max\_value)\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ float\_value\ =\ max\_value;}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (float\_value\ <\ min\_value)\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ float\_value\ =\ min\_value;}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}\ =\ \textcolor{keyword}{static\_cast<}int16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{ArrayCwiseUnaryOps_8h_ac805f9c4e64d7f48898ac876c0a541e7}{round}}(float\_value\ *\ (1\ <<\ fractional\_bits)));}
\DoxyCodeLine{00039\ \ \ \ \ \}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{//\ Conversion\ to\ float}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{classFixedPointQ5__10_a0288ce183ecf307a28cb7cbc77eb55a8}{toFloat}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}})\ /\ (1\ <<\ fractional\_bits);}
\DoxyCodeLine{00043\ \ \ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{//\ Addition}}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ \mbox{\hyperlink{classFixedPointQ5__10_acbefa5f321312c15f02f324cde02c8b7}{operator+}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\&\ other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ result;}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ result.value\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}\ +\ other.value;}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{comment}{//\ Subtraction}}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ \mbox{\hyperlink{classFixedPointQ5__10_a91754b7e4f2d8e617c50cbf18a99cdca}{operator-\/}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\&\ other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ result;}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ result.value\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}\ -\/\ other.value;}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ Multiplication}}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ \mbox{\hyperlink{classFixedPointQ5__10_ab916a2fd7b51d51f8d3d2a0eb8fb119d}{operator*}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\&\ other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ result;}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ result.value\ =\ (\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}\ *\ other.value)\ >>\ fractional\_bits;}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//\ Division}}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ \mbox{\hyperlink{classFixedPointQ5__10_a576c36f0bf012f8ca74cd904ec4e47ab}{operator/}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\&\ other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\ result;}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ result.value\ =\ (\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{value}}\ <<\ fractional\_bits)\ /\ other.value;}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00071\ \ \ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ Output\ stream\ operator}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{friend}\ std::ostream\&\ \mbox{\hyperlink{classFixedPointQ5__10_ac2a0c816027b7e778b842596896abc7a}{operator<<}}(std::ostream\&\ os,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classFixedPointQ5__10}{FixedPointQ5\_10}}\&\ fp)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ os\ <<\ fp.\mbox{\hyperlink{classFixedPointQ5__10_a0288ce183ecf307a28cb7cbc77eb55a8}{toFloat}}();}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ os;}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ \};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ FIXED\_POINT\_HPP}}

\end{DoxyCode}
