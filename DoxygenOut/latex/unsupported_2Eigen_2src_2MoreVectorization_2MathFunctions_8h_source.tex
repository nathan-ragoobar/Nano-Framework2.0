\doxysection{Math\+Functions.\+h}
\hypertarget{unsupported_2Eigen_2src_2MoreVectorization_2MathFunctions_8h_source}{}\label{unsupported_2Eigen_2src_2MoreVectorization_2MathFunctions_8h_source}\index{eigen/unsupported/Eigen/src/MoreVectorization/MathFunctions.h@{eigen/unsupported/Eigen/src/MoreVectorization/MathFunctions.h}}
\mbox{\hyperlink{unsupported_2Eigen_2src_2MoreVectorization_2MathFunctions_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 2009\ Rohit\ Garg\ <rpg.314@gmail.com>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ Copyright\ (C)\ 2009\ Benoit\ Jacob\ <jacob.benoit.1@gmail.com>}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_MOREVECTORIZATION\_MATHFUNCTIONS\_H}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ EIGEN\_MOREVECTORIZATION\_MATHFUNCTIONS\_H}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceEigen}{Eigen}}\ \{\ }
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Packet>\ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{unionEigen_1_1internal_1_1Packet}{Packet}}\ \mbox{\hyperlink{namespaceEigen_1_1internal_acee867f0d298a2ee29adaa8de889eb5b}{pasin}}(\mbox{\hyperlink{unionEigen_1_1internal_1_1Packet}{Packet}}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2common__policy__traits__test_8cc_aa4c2a5552e9bc49b1816ff532f558c74}{a}})\ \{\ \textcolor{keywordflow}{return}\ std::asin(\mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2common__policy__traits__test_8cc_aa4c2a5552e9bc49b1816ff532f558c74}{a}});\ \}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifdef\ EIGEN\_VECTORIZE\_SSE}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{template}<>\ \mbox{\hyperlink{Macros_8h_aa715c1fe854205b27e962ee7d7e06faf}{EIGEN\_DONT\_INLINE}}\ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ \mbox{\hyperlink{namespaceEigen_1_1internal_acee867f0d298a2ee29adaa8de889eb5b}{pasin}}(\mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ x)}
\DoxyCodeLine{00024\ \{}
\DoxyCodeLine{00025\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(\mbox{\hyperlink{structEigen_1_1half}{half}},\ 0.5);}
\DoxyCodeLine{00026\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(minus\_half,\ -\/0.5);}
\DoxyCodeLine{00027\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(3\mbox{\hyperlink{structEigen_1_1half}{half}},\ 1.5);}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_abecee815522b68a750e619f4cf635286}{\_EIGEN\_DECLARE\_CONST\_Packet4f\_FROM\_INT}}(sign\_mask,\ 0x80000000);}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(pi,\ 3.141592654);}
\DoxyCodeLine{00032\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(pi\_over\_2,\ 3.141592654*0.5);}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(asin1,\ 4.2163199048E-\/2);}
\DoxyCodeLine{00035\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(asin2,\ 2.4181311049E-\/2);}
\DoxyCodeLine{00036\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(asin3,\ 4.5470025998E-\/2);}
\DoxyCodeLine{00037\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(asin4,\ 7.4953002686E-\/2);}
\DoxyCodeLine{00038\ \ \ \mbox{\hyperlink{AltiVec_2PacketMath_8h_aa8bf4245a28ece6f5c5ef11b8a0caa07}{\_EIGEN\_DECLARE\_CONST\_Packet4f}}(asin5,\ 1.6666752422E-\/1);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2common__policy__traits__test_8cc_aa4c2a5552e9bc49b1816ff532f558c74}{a}}\ =\ \mbox{\hyperlink{namespaceEigen_1_1internal_a9fdd6f0bbf0e65f4b7f1d47a7b9e76c0}{pabs}}(x);\textcolor{comment}{//got\ the\ absolute\ value}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ sign\_bit=\ \_mm\_and\_ps(x,\ p4f\_sign\_mask);\textcolor{comment}{//extracted\ the\ sign\ bit}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ z1,z2;\textcolor{comment}{//will\ need\ them\ during\ computation\ \ \ \ }}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{comment}{//will\ compute\ the\ two\ branches\ for\ asin}}
\DoxyCodeLine{00048\ \textcolor{comment}{//so\ first\ compare\ with\ half}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ branch\_mask=\ \_mm\_cmpgt\_ps(\mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2common__policy__traits__test_8cc_aa4c2a5552e9bc49b1816ff532f558c74}{a}},\ p4f\_half);\textcolor{comment}{//this\ is\ to\ select\ which\ branch\ to\ take}}
\DoxyCodeLine{00051\ \textcolor{comment}{//both\ will\ be\ taken,\ and\ finally\ results\ will\ be\ merged}}
\DoxyCodeLine{00052\ \textcolor{comment}{//the\ branch\ for\ values\ >0.5}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \{}
\DoxyCodeLine{00055\ \textcolor{comment}{//the\ core\ series\ expansion\ }}
\DoxyCodeLine{00056\ \ \ \ \ z1=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(p4f\_minus\_half,\mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2common__policy__traits__test_8cc_aa4c2a5552e9bc49b1816ff532f558c74}{a}},p4f\_half);}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ x1=\mbox{\hyperlink{namespaceEigen_1_1internal_ab41a337599cdb1b9cb67c47937bbaa9f}{psqrt}}(z1);}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ s1=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(p4f\_asin1,\ z1,\ p4f\_asin2);}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ s2=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(s1,\ z1,\ p4f\_asin3);}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ s3=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(s2,z1,\ p4f\_asin4);}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ s4=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(s3,z1,\ p4f\_asin5);}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ temp=\mbox{\hyperlink{namespaceEigen_1_1internal_a776f5f4b514ecaed2a98db928b8f745f}{pmul}}(s4,z1);\textcolor{comment}{//not\ really\ a\ madd\ but\ a\ mul\ by\ z\ so\ that\ the\ next\ term\ can\ be\ a\ madd}}
\DoxyCodeLine{00063\ \ \ \ \ z1=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(temp,x1,x1);}
\DoxyCodeLine{00064\ \ \ \ \ z1=\mbox{\hyperlink{namespaceEigen_1_1internal_a0f50f3baa0dcc73cd1c0baa06e5c8c13}{padd}}(z1,z1);}
\DoxyCodeLine{00065\ \ \ \ \ z1=\mbox{\hyperlink{namespaceEigen_1_1internal_acfb1e7fe49c73d1885dea028b1745e6a}{psub}}(p4f\_pi\_over\_2,z1);}
\DoxyCodeLine{00066\ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \{}
\DoxyCodeLine{00069\ \textcolor{comment}{//the\ core\ series\ expansion\ }}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ x2=\mbox{\hyperlink{abseil-cpp_2absl_2container_2internal_2common__policy__traits__test_8cc_aa4c2a5552e9bc49b1816ff532f558c74}{a}};}
\DoxyCodeLine{00071\ \ \ \ \ z2=\mbox{\hyperlink{namespaceEigen_1_1internal_a776f5f4b514ecaed2a98db928b8f745f}{pmul}}(x2,x2);}
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ s1=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(p4f\_asin1,\ z2,\ p4f\_asin2);}
\DoxyCodeLine{00073\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ s2=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(s1,\ z2,\ p4f\_asin3);}
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ s3=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(s2,z2,\ p4f\_asin4);}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ s4=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(s3,z2,\ p4f\_asin5);}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ temp=\mbox{\hyperlink{namespaceEigen_1_1internal_a776f5f4b514ecaed2a98db928b8f745f}{pmul}}(s4,z2);\textcolor{comment}{//not\ really\ a\ madd\ but\ a\ mul\ by\ z\ so\ that\ the\ next\ term\ can\ be\ a\ madd}}
\DoxyCodeLine{00077\ \ \ \ \ z2=\mbox{\hyperlink{namespaceEigen_1_1internal_a74b4d1fb91602aebe1ae5742e8c2d566}{pmadd}}(temp,x2,x2);}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{comment}{/*\ select\ the\ correct\ result\ from\ the\ two\ branch\ evaluations\ */}}
\DoxyCodeLine{00081\ \ \ z1\ \ =\ \_mm\_and\_ps(branch\_mask,\ z1);}
\DoxyCodeLine{00082\ \ \ z2\ \ =\ \_mm\_andnot\_ps(branch\_mask,\ z2);}
\DoxyCodeLine{00083\ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_ae26c66dd0a5e5fe89ede57fe7005e2f7}{Packet4f}}\ \mbox{\hyperlink{namespaceabsl_adb6bd4a9012b471ac01613aff8d4d81bafbade9e36a3f36d3d676c1b808451dd7}{z}}\ \ =\ \_mm\_or\_ps(z1,z2);}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{comment}{/*\ update\ the\ sign\ */}}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{return}\ \_mm\_xor\_ps(z,\ sign\_bit);}
\DoxyCodeLine{00087\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_VECTORIZE\_SSE}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \}\ \textcolor{comment}{//\ end\ namespace\ internal}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \}\ \textcolor{comment}{//\ end\ namespace\ Eigen}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_MOREVECTORIZATION\_MATHFUNCTIONS\_H}}

\end{DoxyCode}
