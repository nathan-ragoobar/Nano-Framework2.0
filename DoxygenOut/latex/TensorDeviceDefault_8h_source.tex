\doxysection{Tensor\+Device\+Default.\+h}
\hypertarget{TensorDeviceDefault_8h_source}{}\label{TensorDeviceDefault_8h_source}\index{eigen/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceDefault.h@{eigen/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceDefault.h}}
\mbox{\hyperlink{TensorDeviceDefault_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 2014\ Benoit\ Steiner\ <benoit.steiner.goog@gmail.com>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_CXX11\_TENSOR\_TENSOR\_DEVICE\_DEFAULT\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ EIGEN\_CXX11\_TENSOR\_TENSOR\_DEVICE\_DEFAULT\_H}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceEigen}{Eigen}}\ \{}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{comment}{//\ Default\ device\ for\ the\ machine\ (typically\ a\ single\ cpu\ core)}}
\DoxyCodeLine{00017\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structEigen_1_1DefaultDevice}{DefaultDevice}}\ \{}
\DoxyCodeLine{00018\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_aedf2fb4553daa493545b383076b242dd}{allocate}}(\textcolor{keywordtype}{size\_t}\ num\_bytes)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceEigen_1_1internal_a085e514c677ac3bb48f3c3674a372865}{internal::aligned\_malloc}}(num\_bytes);}
\DoxyCodeLine{00020\ \ \ \}}
\DoxyCodeLine{00021\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a37161c54e19b871cdffadbbc0e4bea12}{deallocate}}(\textcolor{keywordtype}{void}*\ buffer)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1internal_adad153f95799bcc02d86235418c0a73f}{internal::aligned\_free}}(buffer);}
\DoxyCodeLine{00023\ \ \ \}}
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a4effed8661571010444d563ab36a39f7}{allocate\_temp}}(\textcolor{keywordtype}{size\_t}\ num\_bytes)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_aedf2fb4553daa493545b383076b242dd}{allocate}}(num\_bytes);}
\DoxyCodeLine{00026\ \ \ \}}
\DoxyCodeLine{00027\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a8ea295bcfc405853611c8920b24e2355}{deallocate\_temp}}(\textcolor{keywordtype}{void}*\ buffer)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a37161c54e19b871cdffadbbc0e4bea12}{deallocate}}(buffer);}
\DoxyCodeLine{00029\ \ \ \}}
\DoxyCodeLine{00030\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a61984e9d6b70218273aea25952877bef}{memcpy}}(\textcolor{keywordtype}{void}*\ dst,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ src,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a61984e9d6b70218273aea25952877bef}{::memcpy}}(dst,\ src,\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}});}
\DoxyCodeLine{00032\ \ \ \}}
\DoxyCodeLine{00033\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a978f0e67b69d1142d28c7c314c71ea9d}{memcpyHostToDevice}}(\textcolor{keywordtype}{void}*\ dst,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ src,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a61984e9d6b70218273aea25952877bef}{memcpy}}(dst,\ src,\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}});}
\DoxyCodeLine{00035\ \ \ \}}
\DoxyCodeLine{00036\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a4be26c1b7f78e27670975bafdfc75e68}{memcpyDeviceToHost}}(\textcolor{keywordtype}{void}*\ dst,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ src,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a61984e9d6b70218273aea25952877bef}{memcpy}}(dst,\ src,\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}});}
\DoxyCodeLine{00038\ \ \ \}}
\DoxyCodeLine{00039\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a2a16cec4646fdc58b2f92ed552fb391d}{memset}}(\textcolor{keywordtype}{void}*\ buffer,\ \textcolor{keywordtype}{int}\ c,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a2a16cec4646fdc58b2f92ed552fb391d}{::memset}}(buffer,\ c,\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}});}
\DoxyCodeLine{00041\ \ \ \}}
\DoxyCodeLine{00042\ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Type>}
\DoxyCodeLine{00043\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ Type\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a2a7b0c4044eb21ba0b2a15e9f20d22b8}{get}}(Type\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}})\textcolor{keyword}{\ const\ }\{\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{abseil-cpp_2absl_2strings_2internal_2str__format_2float__conversion_8cc_adafb71d8f41ef4c3e3d3ccb46fe854c8}{data}};}
\DoxyCodeLine{00045\ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a7c73e4e69f8c0ad6505104f45832a0d6}{numThreads}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#if\ !defined(EIGEN\_GPU\_COMPILE\_PHASE)}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ the\ host\ CPU}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#elif\ defined(EIGEN\_HIP\_DEVICE\_COMPILE)}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ a\ HIP\ device}}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{return}\ 64;}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ a\ CUDA\ device}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return}\ 32;}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00058\ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a7433e4c7d515d523cd81e2e93402152c}{firstLevelCacheSize}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#if\ !defined(EIGEN\_GPU\_COMPILE\_PHASE)\ \&\&\ !defined(SYCL\_DEVICE\_ONLY)}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ the\ host\ CPU}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceEigen_a2669f89ff38296a38e6d973552eb4e33}{l1CacheSize}}();}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#elif\ defined(EIGEN\_HIP\_DEVICE\_COMPILE)}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ a\ HIP\ device}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{return}\ 48*1024;\ \textcolor{comment}{//\ FIXME\ :\ update\ this\ number\ for\ HIP}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ a\ CUDA\ device,\ return\ the\ amount\ of\ shared\ memory\ available.}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{return}\ 48*1024;}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00071\ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_aa34a7449cafbe5ea56dba58f0e594410}{lastLevelCacheSize}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#if\ !defined(EIGEN\_GPU\_COMPILE\_PHASE)\ \&\&\ !defined(SYCL\_DEVICE\_ONLY)}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ Running\ single\ threaded\ on\ the\ host\ CPU}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceEigen_ae2efa4852ea90c2d47b7dcec5b40ba2b}{l3CacheSize}}();}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#elif\ defined(EIGEN\_HIP\_DEVICE\_COMPILE)}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ a\ HIP\ device}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a7433e4c7d515d523cd81e2e93402152c}{firstLevelCacheSize}}();\ \textcolor{comment}{//\ FIXME\ :\ update\ this\ number\ for\ HIP}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ a\ CUDA\ device}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a7433e4c7d515d523cd81e2e93402152c}{firstLevelCacheSize}}();}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00084\ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \mbox{\hyperlink{Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structEigen_1_1DefaultDevice_a7396ca9b92e286981441b14056cf06a2}{majorDeviceVersion}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\#if\ !defined(EIGEN\_GPU\_COMPILE\_PHASE)}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ Running\ single\ threaded\ on\ the\ host\ CPU}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ Should\ return\ an\ enum\ that\ encodes\ the\ ISA\ supported\ by\ the\ CPU}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#elif\ defined(EIGEN\_HIP\_DEVICE\_COMPILE)}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ a\ HIP\ device}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{comment}{//\ return\ 1\ as\ major\ for\ HIP}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{//\ Running\ on\ a\ CUDA\ device}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordflow}{return}\ EIGEN\_CUDA\_ARCH\ /\ 100;}
\DoxyCodeLine{00098\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00099\ \ \ \}}
\DoxyCodeLine{00100\ \};}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \}\ \ \textcolor{comment}{//\ namespace\ Eigen}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_CXX11\_TENSOR\_TENSOR\_DEVICE\_DEFAULT\_H}}

\end{DoxyCode}
