\doxysection{Tensor\+Contraction.\+h}
\hypertarget{eigen_2unsupported_2Eigen_2CXX11_2src_2Tensor_2TensorContraction_8h_source}{}\label{eigen_2unsupported_2Eigen_2CXX11_2src_2Tensor_2TensorContraction_8h_source}\index{eigen/unsupported/Eigen/CXX11/src/Tensor/TensorContraction.h@{eigen/unsupported/Eigen/CXX11/src/Tensor/TensorContraction.h}}
\mbox{\hyperlink{eigen_2unsupported_2Eigen_2CXX11_2src_2Tensor_2TensorContraction_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 2014\ Benoit\ Steiner\ <benoit.steiner.goog@gmail.com>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_CXX11\_TENSOR\_TENSOR\_CONTRACTION\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ EIGEN\_CXX11\_TENSOR\_TENSOR\_CONTRACTION\_H}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceEigen}{Eigen}}\ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceinternal}{internal}}\ \{}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Dimensions,\ \textcolor{keyword}{typename}\ LhsXprType,\ \textcolor{keyword}{typename}\ RhsXprType,\ \textcolor{keyword}{typename}\ OutputKernelType>}
\DoxyCodeLine{00025\ \textcolor{keyword}{struct\ }traits<TensorContractionOp<Dimensions,\ LhsXprType,\ RhsXprType,\ OutputKernelType>\ >}
\DoxyCodeLine{00026\ \{}
\DoxyCodeLine{00027\ \ \ \textcolor{comment}{//\ Type\ promotion\ to\ handle\ the\ case\ where\ the\ types\ of\ the\ lhs\ and\ the\ rhs\ are\ different.}}
\DoxyCodeLine{00028\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ gebp\_traits<typename\ remove\_const<typename\ LhsXprType::Scalar>::type,}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{remove\_const<typename\ RhsXprType::Scalar>::type}}>::ResScalar\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh74987a7fa258882feb089e0480f64188_a1773461f79665bbfd6024de6ffc23814}{Scalar}};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1promote__storage__type}{promote\_storage\_type<typename\ traits<LhsXprType>::StorageKind}},}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<RhsXprType>::StorageKind}}>::ret\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh74987a7fa258882feb089e0480f64188_a12e1a775bedaeb5bed46814e2ce4f802}{StorageKind}};}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1promote__index__type}{promote\_index\_type<typename\ traits<LhsXprType>::Index}},}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<RhsXprType>::Index}}>::type\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh74987a7fa258882feb089e0480f64188_a0ab77e34c43bd9540bb31ddb50418810}{Index}};}
\DoxyCodeLine{00035\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ LhsXprType::Nested\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh74987a7fa258882feb089e0480f64188_a85b014fea06e0fe7f49c2c5e6ca519d2}{LhsNested}};}
\DoxyCodeLine{00036\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ RhsXprType::Nested\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh74987a7fa258882feb089e0480f64188_a176ad1e04160ea3d244ca83e28ce36ca}{RhsNested}};}
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__reference_a48fc595958f2006d8ddea90f18833ae0}{remove\_reference<LhsNested>::type}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh74987a7fa258882feb089e0480f64188_a9b1e2a52f22582d946270d7b1b2a6f09}{\_LhsNested}};}
\DoxyCodeLine{00038\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__reference_a48fc595958f2006d8ddea90f18833ae0}{remove\_reference<RhsNested>::type}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh74987a7fa258882feb089e0480f64188_a0b8712693a010bee8f22364bf6f3358c}{\_RhsNested}};}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \textcolor{comment}{//\ From\ NumDims\ below.}}
\DoxyCodeLine{00041\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ NumDimensions\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<LhsXprType>::NumDimensions}}\ +\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<RhsXprType>::NumDimensions}}\ -\/\ 2\ *\ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{array\_size<Dimensions>::value}};}
\DoxyCodeLine{00042\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ Layout\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<LhsXprType>::Layout}};}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1conditional}{conditional<Pointer\_type\_promotion<typename\ LhsXprType::Scalar,\ Scalar>::val}},}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<LhsXprType>::PointerType}},}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<RhsXprType>::PointerType}}>::type}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh74987a7fa258882feb089e0480f64188_ab6c633ebacc1d0c3955dc357c633e7a7}{PointerType}};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00049\ \ \ \ \ Flags\ =\ 0}
\DoxyCodeLine{00050\ \ \ \};}
\DoxyCodeLine{00051\ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Dimensions,\ \textcolor{keyword}{typename}\ LhsXprType,\ \textcolor{keyword}{typename}\ RhsXprType,\ \textcolor{keyword}{typename}\ OutputKernelType>}
\DoxyCodeLine{00054\ \textcolor{keyword}{struct\ }eval<\mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp}}<Dimensions,\ LhsXprType,\ RhsXprType,\ OutputKernelType>,\ \mbox{\hyperlink{namespaceEigen}{Eigen}}::\mbox{\hyperlink{structEigen_1_1Dense}{Dense}}>}
\DoxyCodeLine{00055\ \{}
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp<Dimensions,\ LhsXprType,\ RhsXprType,\ OutputKernelType>}}\&\ \mbox{\hyperlink{structEigen_1_1internal_1_1eval_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01RhsXa22194ef81dd43cb27ee4a4f0353d97f_abd94a66a50fd0882701b7656d20408c1}{type}};}
\DoxyCodeLine{00057\ \};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Dimensions,\ \textcolor{keyword}{typename}\ LhsXprType,\ \textcolor{keyword}{typename}\ RhsXprType,\ \textcolor{keyword}{typename}\ OutputKernelType>}
\DoxyCodeLine{00060\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structEigen_1_1internal_1_1nested}{nested}}<\mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp}}<Dimensions,\ LhsXprType,\ RhsXprType,\ OutputKernelType>,\ 1,\ typename\ \mbox{\hyperlink{structEigen_1_1internal_1_1eval}{eval}}<\mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp}}<Dimensions,\ LhsXprType,\ RhsXprType,\ OutputKernelType>\ >::type>}
\DoxyCodeLine{00061\ \{}
\DoxyCodeLine{00062\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp<Dimensions,\ LhsXprType,\ RhsXprType,\ OutputKernelType>}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1nested_3_01TensorContractionOp_3_01Dimensions_00_01LhsXprType_00_01Rh1b91deabae2dd4d1292d0e61a9ea5b77_a5fb414576dc0e63c405dc343ae1e997f}{type}};}
\DoxyCodeLine{00063\ \};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Indices\_,\ \textcolor{keyword}{typename}\ LeftArgType\_,\ \textcolor{keyword}{typename}\ RightArgType\_,\ \textcolor{keyword}{typename}\ OutputKernelType\_,\ \textcolor{keyword}{typename}\ Device\_>}
\DoxyCodeLine{00066\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits}}<\mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator}}<const\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp}}<Indices\_,\ LeftArgType\_,\ RightArgType\_,\ OutputKernelType\_>,\ Device\_>\ >\ \{}
\DoxyCodeLine{00067\ \ \ \textcolor{keyword}{typedef}\ Indices\_\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorEvaluator_3_01const_01TensorContractionOp_3_01Indicede7d1fa6de5e441b4475a323f1470565_ab8bfc77ab6e8238c09896a904430eca9}{Indices}};}
\DoxyCodeLine{00068\ \ \ \textcolor{keyword}{typedef}\ LeftArgType\_\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorEvaluator_3_01const_01TensorContractionOp_3_01Indicede7d1fa6de5e441b4475a323f1470565_a95cd86292dbb319efbd3dbb0f7a4c1f6}{LeftArgType}};}
\DoxyCodeLine{00069\ \ \ \textcolor{keyword}{typedef}\ RightArgType\_\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorEvaluator_3_01const_01TensorContractionOp_3_01Indicede7d1fa6de5e441b4475a323f1470565_a764a62ad76fb2472f07d7bc6d50475e5}{RightArgType}};}
\DoxyCodeLine{00070\ \ \ \textcolor{keyword}{typedef}\ OutputKernelType\_\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorEvaluator_3_01const_01TensorContractionOp_3_01Indicede7d1fa6de5e441b4475a323f1470565_ad56f3807aae07f9749bea5e93c5cc72c}{OutputKernelType}};}
\DoxyCodeLine{00071\ \ \ \textcolor{keyword}{typedef}\ Device\_\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits_3_01TensorEvaluator_3_01const_01TensorContractionOp_3_01Indicede7d1fa6de5e441b4475a323f1470565_a296266ab02559ef86583082b0a3fe9b8}{Device}};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \textcolor{comment}{//\ From\ NumDims\ below.}}
\DoxyCodeLine{00074\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ NumDimensions\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<LeftArgType\_>::NumDimensions}}\ +\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<RightArgType\_>::NumDimensions}}\ -\/\ 2\ *\ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{array\_size<Indices\_>::value}};}
\DoxyCodeLine{00075\ \};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{comment}{//\ Helper\ class\ to\ allocate\ and\ deallocate\ temporary\ memory\ for\ packed\ buffers.}}
\DoxyCodeLine{00078\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ LhsScalar,\ \textcolor{keyword}{typename}\ RhsScalar>}
\DoxyCodeLine{00079\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator}{TensorContractionBlockMemAllocator}}\ \{}
\DoxyCodeLine{00080\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_a85b3d8a02881e06451c143a6e9ba3759}{BlockMemHandle}};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Device>}
\DoxyCodeLine{00083\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_a85b3d8a02881e06451c143a6e9ba3759}{BlockMemHandle}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_a377791c2ea97b776abe4ab0b2a963b03}{allocate}}(Device\&\ d,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bm,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bk,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bn,}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LhsScalar**\ lhs\_block,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ RhsScalar**\ rhs\_block)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(lhs\_block);}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(rhs\_block);}
\DoxyCodeLine{00090\ \ \ \ \ BlockSizes\ sz\ =\ ComputeLhsRhsBlockSizes(bm,\ bk,\ bn);}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{char}*\ block\_mem\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(d.allocate(sz.lhs\_size\ +\ sz.rhs\_size));}
\DoxyCodeLine{00092\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(block\_mem);}
\DoxyCodeLine{00093\ \ \ \ \ *lhs\_block\ =\ \textcolor{keyword}{reinterpret\_cast<}LhsScalar*\textcolor{keyword}{>}(block\_mem);}
\DoxyCodeLine{00094\ \ \ \ \ *rhs\_block\ =\ \textcolor{keyword}{reinterpret\_cast<}RhsScalar*\textcolor{keyword}{>}(block\_mem\ +\ sz.lhs\_size);}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordflow}{return}\ block\_mem;}
\DoxyCodeLine{00096\ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Device>}
\DoxyCodeLine{00099\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_a85b3d8a02881e06451c143a6e9ba3759}{BlockMemHandle}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_af3fcc271568bf1b1225e2d852bef900d}{allocateSlices}}(}
\DoxyCodeLine{00100\ \ \ \ \ \ \ Device\&\ d,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bm,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bk,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bn,}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ num\_lhs,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ num\_rhs,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ num\_slices,}
\DoxyCodeLine{00102\ \ \ \ \ \ \ std::vector<LhsScalar*>*\ lhs\_blocks,}
\DoxyCodeLine{00103\ \ \ \ \ \ \ std::vector<RhsScalar*>*\ rhs\_blocks)\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(num\_slices\ >\ 0);}
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(num\_lhs\ >=\ 0\ \&\&\ num\_rhs\ >=\ 0);}
\DoxyCodeLine{00106\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(num\_lhs\ ==\ 0\ ||\ lhs\_blocks);}
\DoxyCodeLine{00107\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(num\_rhs\ ==\ 0\ ||\ rhs\_blocks);}
\DoxyCodeLine{00108\ \ \ \ \ BlockSizes\ sz\ =\ ComputeLhsRhsBlockSizes(bm,\ bk,\ bn);}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{void}*\ block\_mem\ =\ d.allocate(}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ (num\_lhs\ *\ sz.lhs\_size\ +\ num\_rhs\ *\ sz.rhs\_size)\ *\ num\_slices);}
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(block\_mem);}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordtype}{char}*\ mem\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(block\_mem);}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ x\ =\ 0;\ x\ <\ num\_slices;\ x++)\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_lhs\ >\ 0)\ lhs\_blocks[x].resize(num\_lhs);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ m\ =\ 0;\ m\ <\ num\_lhs;\ m++)\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ lhs\_blocks[x][m]\ =\ \textcolor{keyword}{reinterpret\_cast<}LhsScalar*\textcolor{keyword}{>}(mem);}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ mem\ +=\ sz.lhs\_size;}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_rhs\ >\ 0)\ rhs\_blocks[x].resize(num\_rhs);}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}}\ <\ num\_rhs;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}}++)\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ rhs\_blocks[x][\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}}]\ =\ \textcolor{keyword}{reinterpret\_cast<}RhsScalar*\textcolor{keyword}{>}(mem);}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ mem\ +=\ sz.rhs\_size;}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00125\ \ \ \ \ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordflow}{return}\ block\_mem;}
\DoxyCodeLine{00128\ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Device>}
\DoxyCodeLine{00131\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_aa5e56583d5a2022ab04c972f309ef110}{deallocate}}(Device\&\ d,\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_a85b3d8a02881e06451c143a6e9ba3759}{BlockMemHandle}}\ handle)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ d.deallocate(handle);}
\DoxyCodeLine{00133\ \ \ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00136\ \ \ \textcolor{keyword}{struct\ }BlockSizes\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ lhs\_size;}
\DoxyCodeLine{00138\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ rhs\_size;}
\DoxyCodeLine{00139\ \ \ \};}
\DoxyCodeLine{00140\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \textcolor{keyword}{static}\ BlockSizes\ ComputeLhsRhsBlockSizes(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bm,}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bk,}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ bn)\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ align\ =\ \mbox{\hyperlink{namespaceEigen_1_1numext_a29d502349f2ec9897c808e65e0f96eb4}{numext::maxi}}(\mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2ConfigureVectorization_8h_aabf37293a258a90b1aa96a5d5ec04bfb}{EIGEN\_MAX\_ALIGN\_BYTES}},\ 1);}
\DoxyCodeLine{00144\ \ \ \ \ BlockSizes\ sz;}
\DoxyCodeLine{00145\ \ \ \ \ sz.lhs\_size\ =\ \mbox{\hyperlink{namespaceEigen_a13ec9832931270b80961236d30f6d2e3}{divup<Index>}}(bm\ *\ bk\ *\ \textcolor{keyword}{sizeof}(LhsScalar),\ align)\ *\ align;}
\DoxyCodeLine{00146\ \ \ \ \ sz.rhs\_size\ =\ \mbox{\hyperlink{namespaceEigen_a13ec9832931270b80961236d30f6d2e3}{divup<Index>}}(bn\ *\ bk\ *\ \textcolor{keyword}{sizeof}(RhsScalar),\ align)\ *\ align;}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ sz;}
\DoxyCodeLine{00148\ \ \ \}}
\DoxyCodeLine{00149\ \};}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \textcolor{comment}{//\ WARNING:\ In\ this\ code\ we\ assume\ that\ Lhs\ and\ Rhs\ tensor\ expressions\ are\ in}}
\DoxyCodeLine{00152\ \textcolor{comment}{//\ ColMajor\ storage\ order.\ This\ property\ is\ guaranteed\ by\ the}}
\DoxyCodeLine{00153\ \textcolor{comment}{//\ TensorContractionOp\ evaluator.\ TensorContractionKernel\ specifies\ how\ we\ pack}}
\DoxyCodeLine{00154\ \textcolor{comment}{//\ blocks\ of\ Lhs\ and\ Rhs\ tensor\ expressions,\ and\ how\ we\ invoke\ matrix}}
\DoxyCodeLine{00155\ \textcolor{comment}{//\ multiplication\ for\ these\ blocks.\ Default\ tensor\ contraction\ uses}}
\DoxyCodeLine{00156\ \textcolor{comment}{//\ gemm\_pack\_rhs,\ gemm\_pack\_lhs\ and\ gebp\_kernel\ from\ Eigen\ Core\ (see}}
\DoxyCodeLine{00157\ \textcolor{comment}{//\ GeneralBlocPanelKernel.h\ for\ details).}}
\DoxyCodeLine{00158\ \textcolor{comment}{//}}
\DoxyCodeLine{00159\ \textcolor{comment}{//\ By\ specializing\ contraction\ kernels\ we\ can\ use\ other\ low\ level\ libraries\ to}}
\DoxyCodeLine{00160\ \textcolor{comment}{//\ perform\ matrix\ multiplication,\ and\ still\ rely\ on\ Eigen\ contraction\ evaluator.}}
\DoxyCodeLine{00161\ \textcolor{comment}{//\ This\ also\ includes\ full\ support\ in\ TensorContractionThreadPool,\ assuming\ that}}
\DoxyCodeLine{00162\ \textcolor{comment}{//\ underlying\ gemm\ do\ not\ use\ it's\ own\ threading.}}
\DoxyCodeLine{00163\ \textcolor{comment}{//}}
\DoxyCodeLine{00164\ \textcolor{comment}{//\ -\/\ ResScalar/LhsScalar/RhsScalar\ -\/\ scalar\ type\ for\ the\ result\ of}}
\DoxyCodeLine{00165\ \textcolor{comment}{//\ \ \ multiplication,\ lhs\ tensor\ and\ rhs\ tensor\ respectively.}}
\DoxyCodeLine{00166\ \textcolor{comment}{//}}
\DoxyCodeLine{00167\ \textcolor{comment}{//\ -\/\ StorageIndex\ -\/\ index\ type\ for\ the\ tensor\ expressions.\ In\ practice\ almost}}
\DoxyCodeLine{00168\ \textcolor{comment}{//\ \ \ always\ is\ Eigen::Index.}}
\DoxyCodeLine{00169\ \textcolor{comment}{//}}
\DoxyCodeLine{00170\ \textcolor{comment}{//\ -\/\ OutputMapper\ provides\ access\ to\ the\ memory\ of\ the\ output\ matrix.\ In}}
\DoxyCodeLine{00171\ \textcolor{comment}{//\ \ \ practice\ it's\ always\ column\ major\ blas\_data\_mapper\ (it\ must\ be\ of\ ResScalar}}
\DoxyCodeLine{00172\ \textcolor{comment}{//\ \ \ type).}}
\DoxyCodeLine{00173\ \textcolor{comment}{//}}
\DoxyCodeLine{00174\ \textcolor{comment}{//\ -\/\ LhsMapper/RhsMapper\ similarly\ to\ blas\_data\_mapper\ provide\ a\ two\ dimensional}}
\DoxyCodeLine{00175\ \textcolor{comment}{//\ \ \ view\ into\ the\ Lhs/Rhs\ tensor\ expressions.\ In\ practice\ it's}}
\DoxyCodeLine{00176\ \textcolor{comment}{//\ \ \ TensorContractionInputMapper,\ or\ some\ specialization\ of\ it\ based\ on\ the}}
\DoxyCodeLine{00177\ \textcolor{comment}{//\ \ \ type\ of\ tensor\ expression\ (e.g.\ TensorImagePatchOp\ has\ optimized\ input}}
\DoxyCodeLine{00178\ \textcolor{comment}{//\ \ \ mapper).}}
\DoxyCodeLine{00179\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ ResScalar,\ \textcolor{keyword}{typename}\ LhsScalar,\ \textcolor{keyword}{typename}\ RhsScalar,}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keyword}{typename}\ StorageIndex,\ \textcolor{keyword}{typename}\ OutputMapper,\ \textcolor{keyword}{typename}\ LhsMapper,}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keyword}{typename}\ RhsMapper>}
\DoxyCodeLine{00182\ \textcolor{keyword}{struct\ }TensorContractionKernel\ \{}
\DoxyCodeLine{00183\ \ \ \textcolor{comment}{//\ True\ if\ \`{}invoke()`\ supports\ \`{}beta`\ in\ \`{}C\ <-\/\ alpha\ *\ A\ *\ B\ +\ beta\ *\ C`}}
\DoxyCodeLine{00184\ \ \ \textcolor{comment}{//\ (otherwise\ beta\ should\ be\ always\ equal\ to\ 1).}}
\DoxyCodeLine{00185\ \ \ \textcolor{keyword}{enum}\ \{\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ac0579ff64b6b5244fa66f1d555419931a25796bd5f078c6d3b3414e3d0ed828fc}{HasBeta}}\ =\ \textcolor{keyword}{false}\ \};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}}
\DoxyCodeLine{00188\ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a4f2639cc69fc0cde3531ff61fbce7d6a}{TensorContractionKernel}}(StorageIndex\ m\_,\ StorageIndex\ k\_,\ StorageIndex\ n\_,}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ StorageIndex\ bm\_,\ StorageIndex\ bk\_,\ StorageIndex\ bn\_)}
\DoxyCodeLine{00190\ \ \ \ \ \ \ :\ m(m\_),\ k(k\_),\ n(n\_),\ bm(bm\_),\ bk(bk\_),\ bn(bn\_)\ \{\}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \textcolor{comment}{//\ Pack\ blocks\ of\ Lhs\ and\ Rhs\ into\ contiguous\ blocks\ in\ memory.}}
\DoxyCodeLine{00193\ \ \ \textcolor{keyword}{typedef}\ LhsScalar*\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a870363b767f2624c731c78314aff8e49}{LhsBlock}};}
\DoxyCodeLine{00194\ \ \ \textcolor{keyword}{typedef}\ RhsScalar*\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a4b5c78c2cfedc1cdfae17dd9bdfa08bb}{RhsBlock}};}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \textcolor{comment}{//\ Packed\ Lhs/Rhs\ block\ memory\ allocator.}}
\DoxyCodeLine{00197\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator}{TensorContractionBlockMemAllocator<LhsScalar,\ RhsScalar>}}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ae9a97c403c09786424e61f6e875363db}{BlockMemAllocator}};}
\DoxyCodeLine{00199\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_a85b3d8a02881e06451c143a6e9ba3759}{BlockMemAllocator::BlockMemHandle}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ac8d414b7ef2cd7b7788ef18ca1c23ed1}{BlockMemHandle}};}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classEigen_1_1internal_1_1gebp__traits}{internal::gebp\_traits<LhsScalar,\ RhsScalar>}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a336cd63cdead1b2f4b420c4f9fbd9b31}{Traits}};}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1internal_1_1gemm__pack__lhs}{internal::gemm\_pack\_lhs}}<}
\DoxyCodeLine{00204\ \ \ \ \ \ \ LhsScalar,\ StorageIndex,\ \textcolor{keyword}{typename}\ LhsMapper::SubMapper,\ \mbox{\hyperlink{classEigen_1_1internal_1_1gebp__traits_a706f413a303c241c429a04f29b3088d6ab8bc42b26cfc9339ffb4d4dbaaf71b12}{Traits::mr}},}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \mbox{\hyperlink{classEigen_1_1internal_1_1gebp__traits_a706f413a303c241c429a04f29b3088d6abb02b8f45cb8257737ba0db1347ed9fa}{Traits::LhsProgress}},\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classEigen_1_1internal_1_1gebp__traits_a9ea6b676b89586ff7c605cd5d66fd513}{Traits::LhsPacket4Packing}},\ \mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}}>}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ad4f16a0f41b0a9553b29ce32b36167fb}{LhsPacker}};}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1internal_1_1gemm__pack__rhs}{internal::gemm\_pack\_rhs}}<RhsScalar,\ StorageIndex,}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ RhsMapper::SubMapper,\ \mbox{\hyperlink{classEigen_1_1internal_1_1gebp__traits_a706f413a303c241c429a04f29b3088d6a7c9ba1c45f150c877a59582258099312}{Traits::nr}},}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}}>}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_afe42f31c8ca6ca96788844692d534b11}{RhsPacker}};}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1internal_1_1gebp__kernel}{internal::gebp\_kernel}}<LhsScalar,\ RhsScalar,\ StorageIndex,}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OutputMapper,\ \mbox{\hyperlink{classEigen_1_1internal_1_1gebp__traits_a706f413a303c241c429a04f29b3088d6ab8bc42b26cfc9339ffb4d4dbaaf71b12}{Traits::mr}},\ \mbox{\hyperlink{classEigen_1_1internal_1_1gebp__traits_a706f413a303c241c429a04f29b3088d6a7c9ba1c45f150c877a59582258099312}{Traits::nr}},}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \textcolor{comment}{/*ConjugateLhs*/}\ \textcolor{keyword}{false},\ \textcolor{comment}{/*ConjugateRhs*/}\ \textcolor{keyword}{false}>}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_aa2f524a8593579e4692afe6c1bae9347}{GebpKernel}};}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Device>}
\DoxyCodeLine{00219\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ac8d414b7ef2cd7b7788ef18ca1c23ed1}{BlockMemHandle}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ad65f9b3208d5f78e4aa51dfeba24618a}{allocate}}(Device\&\ d,\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a870363b767f2624c731c78314aff8e49}{LhsBlock}}*\ lhs\_block,}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a4b5c78c2cfedc1cdfae17dd9bdfa08bb}{RhsBlock}}*\ rhs\_block)\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_a377791c2ea97b776abe4ab0b2a963b03}{BlockMemAllocator::allocate}}(d,\ bm,\ bk,\ bn,\ lhs\_block,\ rhs\_block);}
\DoxyCodeLine{00222\ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Device>}
\DoxyCodeLine{00225\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ac8d414b7ef2cd7b7788ef18ca1c23ed1}{BlockMemHandle}}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a470a8951a85d2187b7d8be707e06b792}{allocateSlices}}(}
\DoxyCodeLine{00226\ \ \ \ \ \ \ Device\&\ d,\ \textcolor{keyword}{const}\ StorageIndex\ num\_lhs,\ \textcolor{keyword}{const}\ StorageIndex\ num\_rhs,}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \textcolor{keyword}{const}\ StorageIndex\ num\_slices,\ std::vector<LhsBlock>*\ lhs\_blocks,}
\DoxyCodeLine{00228\ \ \ \ \ \ \ std::vector<RhsBlock>*\ rhs\_blocks)\ \{}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_af3fcc271568bf1b1225e2d852bef900d}{BlockMemAllocator::allocateSlices}}(}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ d,\ bm,\ bk,\ bn,\ num\_lhs,\ num\_rhs,\ num\_slices,\ lhs\_blocks,\ rhs\_blocks);}
\DoxyCodeLine{00231\ \ \ \}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Device>}
\DoxyCodeLine{00234\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ab16231a4e07b0b4402489c9ead26eb37}{deallocate}}(Device\&\ d,\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ac8d414b7ef2cd7b7788ef18ca1c23ed1}{BlockMemHandle}}\ handle)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionBlockMemAllocator_aa5e56583d5a2022ab04c972f309ef110}{BlockMemAllocator::deallocate}}(d,\ handle);}
\DoxyCodeLine{00236\ \ \ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_aa715c1fe854205b27e962ee7d7e06faf}{EIGEN\_DONT\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a5dc8665ce1480671406d2542cecc873e}{packLhs}}(}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a870363b767f2624c731c78314aff8e49}{LhsBlock}}*\ lhsBlock,\ \textcolor{keyword}{const}\ \textcolor{keyword}{typename}\ LhsMapper::SubMapper\&\ data\_mapper,}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \textcolor{keyword}{const}\ StorageIndex\ depth,\ \textcolor{keyword}{const}\ StorageIndex\ rows)\ \{}
\DoxyCodeLine{00241\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_ad4f16a0f41b0a9553b29ce32b36167fb}{LhsPacker}}()(*lhsBlock,\ data\_mapper,\ depth,\ rows,\ \textcolor{comment}{/*stride*/}\ 0,}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*offset*/}\ 0);}
\DoxyCodeLine{00243\ \ \ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_aa715c1fe854205b27e962ee7d7e06faf}{EIGEN\_DONT\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_af1a6c7b19173f7e521dc2d0059979bd0}{packRhs}}(}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a4b5c78c2cfedc1cdfae17dd9bdfa08bb}{RhsBlock}}*\ rhsBlock,\ \textcolor{keyword}{const}\ \textcolor{keyword}{typename}\ RhsMapper::SubMapper\&\ data\_mapper,}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \textcolor{keyword}{const}\ StorageIndex\ depth,\ \textcolor{keyword}{const}\ StorageIndex\ cols)\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_afe42f31c8ca6ca96788844692d534b11}{RhsPacker}}()(*rhsBlock,\ data\_mapper,\ depth,\ cols);}
\DoxyCodeLine{00249\ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_aa715c1fe854205b27e962ee7d7e06faf}{EIGEN\_DONT\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_aaf4c8dbc6517ab304c4c252af2fca488}{invoke}}(}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \textcolor{keyword}{const}\ OutputMapper\&\ output\_mapper,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a870363b767f2624c731c78314aff8e49}{LhsBlock}}\&\ lhsBlock,}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_a4b5c78c2cfedc1cdfae17dd9bdfa08bb}{RhsBlock}}\&\ rhsBlock,\ \textcolor{keyword}{const}\ StorageIndex\ rows,}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \textcolor{keyword}{const}\ StorageIndex\ depth,\ \textcolor{keyword}{const}\ StorageIndex\ cols,}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \textcolor{keyword}{const}\ ResScalar\ alpha,\ \textcolor{keyword}{const}\ ResScalar\ beta)\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{comment}{//\ Default\ GEBP\ kernel\ does\ not\ support\ beta.}}
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(beta\ ==\ ResScalar(1));}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ kComputeStrideFromBlockDimensions\ =\ -\/1;}
\DoxyCodeLine{00259\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel_aa2f524a8593579e4692afe6c1bae9347}{GebpKernel}}()(output\_mapper,\ lhsBlock,\ rhsBlock,\ rows,\ depth,\ cols,\ alpha,}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*strideA*/}\ kComputeStrideFromBlockDimensions,}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*strideB*/}\ kComputeStrideFromBlockDimensions,}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*offsetA*/}\ 0,\ \textcolor{comment}{/*offsetB*/}\ 0);}
\DoxyCodeLine{00263\ \ \ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00266\ \ \ \textcolor{comment}{//\ These\ are\ dimensions\ of\ the\ original\ Tensors,\ and\ selected\ block\ sizes.\ The}}
\DoxyCodeLine{00267\ \ \ \textcolor{comment}{//\ actual\ block\ sizes\ passed\ to\ all\ function\ above\ might\ be\ smaller\ because\ of}}
\DoxyCodeLine{00268\ \ \ \textcolor{comment}{//\ the\ partial\ blocks\ at\ the\ end.}}
\DoxyCodeLine{00269\ \ \ \textcolor{keyword}{const}\ StorageIndex\ m;}
\DoxyCodeLine{00270\ \ \ \textcolor{keyword}{const}\ StorageIndex\ k;}
\DoxyCodeLine{00271\ \ \ \textcolor{keyword}{const}\ StorageIndex\ n;}
\DoxyCodeLine{00272\ \ \ \textcolor{keyword}{const}\ StorageIndex\ bm;}
\DoxyCodeLine{00273\ \ \ \textcolor{keyword}{const}\ StorageIndex\ bk;}
\DoxyCodeLine{00274\ \ \ \textcolor{keyword}{const}\ StorageIndex\ bn;}
\DoxyCodeLine{00275\ \};}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \}\ \ \textcolor{comment}{//\ end\ namespace\ internal}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \textcolor{comment}{//\ Tensor\ contraction\ params\ that\ should\ enable\ to\ get\ from\ output\ matrix}}
\DoxyCodeLine{00280\ \textcolor{comment}{//\ 2-\/dimensional\ coordinates\ to\ the\ output\ tensor\ dimensions.}}
\DoxyCodeLine{00281\ \textcolor{keyword}{struct\ }TensorContractionParams\ \{}
\DoxyCodeLine{00282\ \ \ \textcolor{comment}{//\ TensorContraction\ evaluator\ assumes\ that\ both\ tensors\ are\ in\ ColMajor}}
\DoxyCodeLine{00283\ \ \ \textcolor{comment}{//\ layout,\ if\ tensors\ are\ in\ RowMajor\ evaluator\ swap\ lhs\ with\ rhs.}}
\DoxyCodeLine{00284\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structEigen_1_1TensorContractionParams_aeba06ed59eedf7675950921d2313f0f7}{swapped\_arguments}};}
\DoxyCodeLine{00285\ \};}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \textcolor{comment}{//\ Output\ kernel\ allows\ to\ fuse\ operations\ into\ the\ tensor\ contraction.}}
\DoxyCodeLine{00288\ \textcolor{comment}{//}}
\DoxyCodeLine{00289\ \textcolor{comment}{//\ Examples:}}
\DoxyCodeLine{00290\ \textcolor{comment}{//\ \ \ 1.\ Elementwise\ Relu\ transformation\ following\ Conv2D.}}
\DoxyCodeLine{00291\ \textcolor{comment}{//\ \ \ 2.\ AddBias\ to\ the\ Conv2D\ output\ channels\ dimension.}}
\DoxyCodeLine{00292\ \textcolor{comment}{//}}
\DoxyCodeLine{00293\ \textcolor{comment}{//\ The\ NoOpOutputKernel\ implements\ an\ output\ kernel\ that\ does\ absolutely\ nothing.}}
\DoxyCodeLine{00294\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structEigen_1_1NoOpOutputKernel}{NoOpOutputKernel}}\ \{}
\DoxyCodeLine{00310\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Index,\ \textcolor{keyword}{typename}\ Scalar>}
\DoxyCodeLine{00311\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a1fdc6f94f20527c7275768d82b2eb9ce}{EIGEN\_ALWAYS\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1NoOpOutputKernel_a170126f24446e6ac7eb284ea59815edf}{operator()}}(}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1internal_1_1blas__data__mapper}{internal::blas\_data\_mapper<Scalar,\ Index,\ ColMajor>}}\&\ output\_mapper,}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionParams}{TensorContractionParams}}\&\ params,\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}},}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ j,\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ num\_rows,\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ num\_cols)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00315\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a7cf6d5b460def34dc4e6acf42889b6a9}{EIGEN\_UNUSED\_VARIABLE}}(output\_mapper);}
\DoxyCodeLine{00316\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a7cf6d5b460def34dc4e6acf42889b6a9}{EIGEN\_UNUSED\_VARIABLE}}(params);}
\DoxyCodeLine{00317\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a7cf6d5b460def34dc4e6acf42889b6a9}{EIGEN\_UNUSED\_VARIABLE}}(\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}});}
\DoxyCodeLine{00318\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a7cf6d5b460def34dc4e6acf42889b6a9}{EIGEN\_UNUSED\_VARIABLE}}(j);}
\DoxyCodeLine{00319\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a7cf6d5b460def34dc4e6acf42889b6a9}{EIGEN\_UNUSED\_VARIABLE}}(num\_rows);}
\DoxyCodeLine{00320\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a7cf6d5b460def34dc4e6acf42889b6a9}{EIGEN\_UNUSED\_VARIABLE}}(num\_cols);}
\DoxyCodeLine{00321\ \ \ \}}
\DoxyCodeLine{00322\ \};}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Indices,\ \textcolor{keyword}{typename}\ LhsXprType,\ \textcolor{keyword}{typename}\ RhsXprType,\ \textcolor{keyword}{typename}\ OutputKernelType\ =\ const\ NoOpOutputKernel>}
\DoxyCodeLine{00325\ \textcolor{keyword}{class\ }TensorContractionOp\ :\ \textcolor{keyword}{public}\ TensorBase<TensorContractionOp<Indices,\ LhsXprType,\ RhsXprType,\ OutputKernelType>,\ ReadOnlyAccessors>}
\DoxyCodeLine{00326\ \{}
\DoxyCodeLine{00327\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00328\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{Eigen::internal::traits<TensorContractionOp>::Scalar}}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_ae4cc4bf9abf29b536aa1439734beb376}{Scalar}};}
\DoxyCodeLine{00329\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classEigen_1_1internal_1_1gebp__traits}{internal::gebp\_traits}}<\textcolor{keyword}{typename}\ LhsXprType::CoeffReturnType,}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ RhsXprType::CoeffReturnType>::ResScalar\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a5ec0667934f84b6fd393fc84504be236}{CoeffReturnType}};}
\DoxyCodeLine{00331\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classEigen_1_1internal_1_1TensorLazyEvaluatorWritable}{Eigen::internal::nested<TensorContractionOp>::type}}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_aa8253db070b7e15d7f13213684033b67}{Nested}};}
\DoxyCodeLine{00332\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{Eigen::internal::traits<TensorContractionOp>::StorageKind}}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_abbe9eb8d78d71f2f327c0c812afaaeb2}{StorageKind}};}
\DoxyCodeLine{00333\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{Eigen::internal::traits<TensorContractionOp>::Index}}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_af5f933c7895e092dfe920f5234d89b7e}{Index}};}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_ab68d83aee6d8010c6915591499039d8f}{TensorContractionOp}}(}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \textcolor{keyword}{const}\ LhsXprType\&\ lhs,\ \textcolor{keyword}{const}\ RhsXprType\&\ rhs,\ \textcolor{keyword}{const}\ Indices\&\ dims,}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \textcolor{keyword}{const}\ OutputKernelType\&\ output\_kernel\ =\ OutputKernelType())}
\DoxyCodeLine{00338\ \ \ \ \ \ \ :\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a15da67f801bfe72f604352138508b755}{m\_lhs\_xpr}}(lhs),\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a3ba1c775241cbb1259c495fcff078a2b}{m\_rhs\_xpr}}(rhs),\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a60570dea8d535221fa63a2832f817d7d}{m\_indices}}(dims),}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_acc1a4d8aedcd6fc5969826316ded3e63}{m\_output\_kernel}}(output\_kernel)\ \{\}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}}
\DoxyCodeLine{00342\ \ \ \textcolor{keyword}{const}\ Indices\&\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a9ba3d35ad12ea93d9b24def81c07a497}{indices}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a60570dea8d535221fa63a2832f817d7d}{m\_indices}};\ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00345\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}}
\DoxyCodeLine{00346\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__all_a5779acf852f62735a7d293d29b18e321}{internal::remove\_all<typename\ LhsXprType::Nested>::type}}\&}
\DoxyCodeLine{00347\ \ \ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a989e56ac429c454bf75b78961c507dec}{lhsExpression}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a15da67f801bfe72f604352138508b755}{m\_lhs\_xpr}};\ \}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}}
\DoxyCodeLine{00350\ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__all_a5779acf852f62735a7d293d29b18e321}{internal::remove\_all<typename\ RhsXprType::Nested>::type}}\&}
\DoxyCodeLine{00351\ \ \ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a9e9a7cc61b46c4e11870f2b3ddde62d0}{rhsExpression}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a3ba1c775241cbb1259c495fcff078a2b}{m\_rhs\_xpr}};\ \}}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}}
\DoxyCodeLine{00354\ \ \ \textcolor{keyword}{const}\ OutputKernelType\&\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a0e63ef6ff102a4516dca5b492a3151eb}{outputKernel}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_acc1a4d8aedcd6fc5969826316ded3e63}{m\_output\_kernel}};\ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keyword}{typename}\ LhsXprType::Nested\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a15da67f801bfe72f604352138508b755}{m\_lhs\_xpr}};}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keyword}{typename}\ RhsXprType::Nested\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a3ba1c775241cbb1259c495fcff078a2b}{m\_rhs\_xpr}};}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keyword}{const}\ Indices\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a60570dea8d535221fa63a2832f817d7d}{m\_indices}};}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keyword}{const}\ OutputKernelType\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_acc1a4d8aedcd6fc5969826316ded3e63}{m\_output\_kernel}};}
\DoxyCodeLine{00361\ \};}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00364\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Derived>}
\DoxyCodeLine{00365\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase}{TensorContractionEvaluatorBase}}\ :\ \mbox{\hyperlink{classEigen_1_1internal_1_1no__assignment__operator}{internal::no\_assignment\_operator}}}
\DoxyCodeLine{00366\ \{}
\DoxyCodeLine{00367\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{internal::traits<Derived>::Indices}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a71b5df51f300752a7d1c6f0ab6a13afd}{Indices}};}
\DoxyCodeLine{00368\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{internal::traits<Derived>::LeftArgType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aac321c7a2dd37af50cd8aa119eeb74a8}{LeftArgType}};}
\DoxyCodeLine{00369\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{internal::traits<Derived>::RightArgType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ca341c4f488e5bf8c4250d2ae087412}{RightArgType}};}
\DoxyCodeLine{00370\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{internal::traits<Derived>::OutputKernelType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ab2d1d5cd018af9795d4ac65dec4ea949}{OutputKernelType}};}
\DoxyCodeLine{00371\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{internal::traits<Derived>::Device}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a03c60e16e497b5e67b67ed9b4e2964f2}{Device}};}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp<Indices,\ LeftArgType,\ RightArgType,\ OutputKernelType>}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac735cc2f522fad9160a072fc496343b2}{XprType}};}
\DoxyCodeLine{00374\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename\ XprType::Scalar>::type}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}};}
\DoxyCodeLine{00375\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_af5f933c7895e092dfe920f5234d89b7e}{XprType::Index}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}};}
\DoxyCodeLine{00376\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a5ec0667934f84b6fd393fc84504be236}{XprType::CoeffReturnType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a03e212da1d23eb224d3b92b81ad16c22}{CoeffReturnType}};}
\DoxyCodeLine{00377\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1PacketType_a1eeaa0a6cdf53f6f0fc3eebacf9590ec}{PacketType<CoeffReturnType,\ Device>::type}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a3e2f8aab3fc497f121813ebb004b9fb0}{PacketReturnType}};}
\DoxyCodeLine{00378\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1StorageMemory}{StorageMemory<Scalar,\ Device>}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a4b537a9d4ff3a484b2f4988e1b140b57}{Storage}};}
\DoxyCodeLine{00379\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1MakePointer_a67639bacf48b31d0e052df08cf07dee9}{Storage::Type}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7c57e47d657c3ea3baa111f6434cd041}{EvaluatorPointerType}};}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba6613a957acbb52458113c07828982c32}{IsAligned}}\ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{true},}
\DoxyCodeLine{00383\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2baf6527156e6411ad5bd82ced83e71af8d}{PacketAccess}}\ \ \ \ \ \ =\ (\mbox{\hyperlink{structEigen_1_1PacketType}{PacketType<CoeffReturnType,\ Device>::size}}\ >\ 1),}
\DoxyCodeLine{00384\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba8e9b3c0fd175007b69a0a163b0999da3}{BlockAccess}}\ \ \ \ \ \ \ =\ \textcolor{keyword}{false},}
\DoxyCodeLine{00385\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2bacdea8f59f3c47808e8b740129de6e378}{PreferBlockAccess}}\ =\ \textcolor{keyword}{false},}
\DoxyCodeLine{00386\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba0f89d9335343c299e5fde7362d71eb23}{Layout}}\ \ \ \ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<LeftArgType,\ Device>::Layout}},}
\DoxyCodeLine{00387\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2baf11798af2112b722578243e939c864b5}{CoordAccess}}\ \ \ \ \ \ \ =\ \textcolor{keyword}{false},\ \ \textcolor{comment}{//\ to\ be\ implemented}}
\DoxyCodeLine{00388\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba14c240fabdbdee3e184c456cf4349f6b}{RawAccess}}\ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{true}}
\DoxyCodeLine{00389\ \ \ \};}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \textcolor{comment}{//===-\/\ Tensor\ block\ evaluation\ strategy\ (see\ TensorBlock.h)\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/===//}}
\DoxyCodeLine{00392\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1internal_1_1TensorBlockNotImplemented}{internal::TensorBlockNotImplemented}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_abd8be2ee77de955ee30e97c0cedbc066}{TensorBlock}};}
\DoxyCodeLine{00393\ \ \ \textcolor{comment}{//===-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/===//}}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \textcolor{comment}{//\ Most\ of\ the\ code\ is\ assuming\ that\ both\ input\ tensors\ are\ ColMajor.\ If\ the}}
\DoxyCodeLine{00396\ \ \ \textcolor{comment}{//\ inputs\ are\ RowMajor,\ we\ will\ "{}cheat"{}\ by\ swapping\ the\ LHS\ and\ RHS:}}
\DoxyCodeLine{00397\ \ \ \textcolor{comment}{//\ If\ we\ want\ to\ compute\ A\ *\ B\ =\ C,\ where\ A\ is\ LHS\ and\ B\ is\ RHS,\ the\ code}}
\DoxyCodeLine{00398\ \ \ \textcolor{comment}{//\ will\ pretend\ B\ is\ LHS\ and\ A\ is\ RHS.}}
\DoxyCodeLine{00399\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1conditional}{internal::conditional}}<}
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba0f89d9335343c299e5fde7362d71eb23}{Layout}})\ ==\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}}),\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aac321c7a2dd37af50cd8aa119eeb74a8}{LeftArgType}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ca341c4f488e5bf8c4250d2ae087412}{RightArgType}}>::type\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac474c43ae95c00be7423d33fb6244351}{EvalLeftArgType}};}
\DoxyCodeLine{00401\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1conditional}{internal::conditional}}<}
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba0f89d9335343c299e5fde7362d71eb23}{Layout}})\ ==\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}}),\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ca341c4f488e5bf8c4250d2ae087412}{RightArgType}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aac321c7a2dd37af50cd8aa119eeb74a8}{LeftArgType}}>::type\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a51ab948700f08209f9d9c698f925c082}{EvalRightArgType}};}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<EvalLeftArgType,\ Device>}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b83025c5b50d9edb9fcaa0cc6de6ba5}{LeftEvaluatorType}};}
\DoxyCodeLine{00405\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<EvalRightArgType,\ Device>}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a3df9e9837eb1995177b4f09f83ece08f}{RightEvaluatorType}};}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}}\ =}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<typename\ TensorEvaluator<EvalLeftArgType,\ Device>::Dimensions}}>\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{::value}};}
\DoxyCodeLine{00409\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}}\ =}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<typename\ TensorEvaluator<EvalRightArgType,\ Device>::Dimensions}}>\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{::value}};}
\DoxyCodeLine{00411\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}}\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<Indices>::value}};}
\DoxyCodeLine{00412\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a8f5be3cf2f40fe66b52a16135a9102ea}{NumDims}}\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}}\ +\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}}\ -\/\ 2\ *\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}};}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1array}{array<Index,\ ContractDims>}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2042dba29fd9197c9cb84fceb2afd0dc}{contract\_t}};}
\DoxyCodeLine{00415\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1array}{array}}<\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}}\ -\/\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}}>\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9e391308bdea7a18b410610d7ed1e182}{left\_nocontract\_t}};}
\DoxyCodeLine{00416\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1array}{array}}<\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}}\ -\/\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}}>\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a55b95898171447d29004dab80e95f84f}{right\_nocontract\_t}};}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1DSizes}{DSizes<Index,\ NumDims>}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_af9bb5b23feb54026a7d40a9df1eec101}{Dimensions}};}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}}
\DoxyCodeLine{00421\ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a346d8162347e63ec050244051d10cad1}{TensorContractionEvaluatorBase}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp}{XprType}}\&\ op,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a03c60e16e497b5e67b67ed9b4e2964f2}{Device}}\&\ device)}
\DoxyCodeLine{00422\ \ \ \ \ \ \ :\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}}(\mbox{\hyperlink{namespaceEigen_a26b3e77015597ba6bae64bca8045daf3}{choose}}(\mbox{\hyperlink{structEigen_1_1Cond}{Cond}}<static\_cast<int>(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba0f89d9335343c299e5fde7362d71eb23}{Layout}})\ ==\ static\_cast<int>(\mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}})>(),}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ op.lhsExpression(),\ op.rhsExpression()),\ device),}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}}(\mbox{\hyperlink{namespaceEigen_a26b3e77015597ba6bae64bca8045daf3}{choose}}(\mbox{\hyperlink{structEigen_1_1Cond}{Cond}}<static\_cast<int>(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba0f89d9335343c299e5fde7362d71eb23}{Layout}})\ ==\ static\_cast<int>(\mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}})>(),}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ op.rhsExpression(),\ op.lhsExpression()),\ device),}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}}(device),}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac33eecd270a0844f7e605bd438603077}{m\_output\_kernel}}(op.outputKernel()),}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}}(NULL)\ \{}
\DoxyCodeLine{00429\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2StaticAssert_8h_ac95cf960f4a8395b28af90edfda755f0}{EIGEN\_STATIC\_ASSERT}}((\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<LeftArgType,\ Device>::Layout}})\ ==}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<RightArgType,\ Device>::Layout}})),}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ YOU\_MADE\_A\_PROGRAMMING\_MISTAKE);}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00434\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1DSizes}{DSizes<Index,\ LDims>}}\ eval\_left\_dims;}
\DoxyCodeLine{00435\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1DSizes}{DSizes<Index,\ RDims>}}\ eval\_right\_dims;}
\DoxyCodeLine{00436\ \ \ \ \ \mbox{\hyperlink{classEigen_1_1array}{array<IndexPair<Index>}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}}>\ eval\_op\_indices;}
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba0f89d9335343c299e5fde7362d71eb23}{Layout}})\ ==\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}}))\ \{}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \textcolor{comment}{//\ For\ ColMajor,\ we\ keep\ using\ the\ existing\ dimensions}}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ eval\_left\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}}.\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a4b49b2c40bcb2220fb240083cd1833c6}{dimensions}}()[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ eval\_right\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}}.\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a4b49b2c40bcb2220fb240083cd1833c6}{dimensions}}()[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ keep\ the\ pairs\ of\ contracting\ indices.}}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].first\ =\ op.\mbox{\hyperlink{classEigen_1_1TensorContractionOp_a9ba3d35ad12ea93d9b24def81c07a497}{indices}}()[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].first;}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].second\ =\ op.\mbox{\hyperlink{classEigen_1_1TensorContractionOp_a9ba3d35ad12ea93d9b24def81c07a497}{indices}}()[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].second;}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00450\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \textcolor{comment}{//\ For\ RowMajor,\ we\ need\ to\ reverse\ the\ existing\ dimensions}}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ eval\_left\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}}.\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a4b49b2c40bcb2220fb240083cd1833c6}{dimensions}}()[\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}}\ -\/\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ -\/\ 1];}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ eval\_right\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}}.\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a4b49b2c40bcb2220fb240083cd1833c6}{dimensions}}()[\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}}\ -\/\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ -\/\ 1];}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ flip\ all\ the\ pairs\ of\ contracting\ indices\ as\ well\ as}}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \textcolor{comment}{//\ reversing\ the\ dimensions.}}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].first\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}}\ -\/\ 1\ -\/\ op.\mbox{\hyperlink{classEigen_1_1TensorContractionOp_a9ba3d35ad12ea93d9b24def81c07a497}{indices}}()[\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}}\ -\/\ 1\ -\/\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].second;}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].second\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}}\ -\/\ 1\ -\/\ op.\mbox{\hyperlink{classEigen_1_1TensorContractionOp_a9ba3d35ad12ea93d9b24def81c07a497}{indices}}()[\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}}\ -\/\ 1\ -\/\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].first;}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00464\ \ \ \ \ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{comment}{//\ Check\ for\ duplicate\ axes\ and\ make\ sure\ the\ first\ index\ in\ eval\_op\_indices}}
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{comment}{//\ is\ increasing.\ Using\ O(n\string^2)\ sorting\ is\ OK\ since\ ContractDims\ is\ small}}
\DoxyCodeLine{00468\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ +\ 1;\ j\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}};\ j++)\ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(eval\_op\_indices[j].first\ !=\ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].first\ \&\&}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eval\_op\_indices[j].second\ !=\ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].second\ \&\&}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}contraction\ axes\ should\ be\ unique"{}});}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (eval\_op\_indices[j].first\ <\ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].first)\ \{}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1numext_a3b617b6220683f86218071c40c41d381}{numext::swap}}(eval\_op\_indices[j],\ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]);}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00477\ \ \ \ \ \}}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \ \ \mbox{\hyperlink{classEigen_1_1array}{array<Index,\ LDims>}}\ lhs\_strides;}
\DoxyCodeLine{00480\ \ \ \ \ lhs\_strides[0]\ =\ 1;}
\DoxyCodeLine{00481\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}}-\/1;\ ++\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}})\ \{}
\DoxyCodeLine{00482\ \ \ \ \ \ \ lhs\_strides[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}+1]\ =\ lhs\_strides[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ *\ eval\_left\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00483\ \ \ \ \ \}}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \ \ \mbox{\hyperlink{classEigen_1_1array}{array<Index,\ RDims>}}\ rhs\_strides;}
\DoxyCodeLine{00486\ \ \ \ \ rhs\_strides[0]\ =\ 1;}
\DoxyCodeLine{00487\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}}-\/1;\ ++\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}})\ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ rhs\_strides[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}+1]\ =\ rhs\_strides[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ *\ eval\_right\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00489\ \ \ \ \ \}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_afd3e8052eb4e52616015be32ab25936a}{m\_i\_strides}}.\mbox{\hyperlink{classEigen_1_1array_a332ffdbd5ae2690a6f983959baecc972}{size}}()\ >\ 0)\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_afd3e8052eb4e52616015be32ab25936a}{m\_i\_strides}}[0]\ =\ 1;}
\DoxyCodeLine{00492\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a48dd20851a2b8b56162802665a3cc19d}{m\_j\_strides}}.\mbox{\hyperlink{classEigen_1_1array_a332ffdbd5ae2690a6f983959baecc972}{size}}()\ >\ 0)\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a48dd20851a2b8b56162802665a3cc19d}{m\_j\_strides}}[0]\ =\ 1;}
\DoxyCodeLine{00493\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}}.\mbox{\hyperlink{classEigen_1_1array_a332ffdbd5ae2690a6f983959baecc972}{size}}()\ >\ 0)\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}}[0]\ =\ 1;}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a18bbbed712ad56716c2684aa31e9552d}{m\_i\_size}}\ =\ 1;}
\DoxyCodeLine{00496\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9cd116ffd403b081d33bea8cc2e45067}{m\_j\_size}}\ =\ 1;}
\DoxyCodeLine{00497\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ab37182c2e62a75719c378c068b0b7eb1}{m\_k\_size}}\ =\ 1;}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{comment}{//\ To\ compute\ the\ dimension,\ we\ simply\ concatenate\ the\ non-\/contracting}}
\DoxyCodeLine{00500\ \ \ \ \ \textcolor{comment}{//\ dimensions\ of\ the\ left\ and\ then\ the\ right\ tensor.\ Additionally,\ we\ also}}
\DoxyCodeLine{00501\ \ \ \ \ \textcolor{comment}{//\ compute\ the\ strides\ corresponding\ to\ the\ left\ non-\/contracting}}
\DoxyCodeLine{00502\ \ \ \ \ \textcolor{comment}{//\ dimensions\ and\ right\ non-\/contracting\ dimensions.}}
\DoxyCodeLine{00503\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_acd796b4ae4e27f678d424091074e2871}{m\_lhs\_inner\_dim\_contiguous}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00504\ \ \ \ \ \textcolor{keywordtype}{int}\ dim\_idx\ =\ 0;}
\DoxyCodeLine{00505\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ nocontract\_idx\ =\ 0;}
\DoxyCodeLine{00506\ }
\DoxyCodeLine{00507\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87ce6b6099f0d4fc6356c22dfb143349}{LDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \textcolor{comment}{//\ find\ if\ we\ are\ contracting\ on\ index\ i\ of\ left\ tensor}}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ contracting\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}};\ j++)\ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (eval\_op\_indices[j].first\ ==\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}})\ \{}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ contracting\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!contracting)\ \{}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ dimension\ size\ to\ output\ dimensions}}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aceac18282cc5f1613de33195d1b2b26a}{m\_dimensions}}[dim\_idx]\ =\ eval\_left\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6467d3a59f2812726b6ba65ad4e69993}{m\_left\_nocontract\_strides}}[nocontract\_idx]\ =\ lhs\_strides[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dim\_idx\ !=\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}})\ \{}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_acd796b4ae4e27f678d424091074e2871}{m\_lhs\_inner\_dim\_contiguous}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nocontract\_idx+1\ <\ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<left\_nocontract\_t>::value}})\ \{}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_afd3e8052eb4e52616015be32ab25936a}{m\_i\_strides}}[nocontract\_idx+1]\ =}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_afd3e8052eb4e52616015be32ab25936a}{m\_i\_strides}}[nocontract\_idx]\ *\ eval\_left\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a18bbbed712ad56716c2684aa31e9552d}{m\_i\_size}}\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_afd3e8052eb4e52616015be32ab25936a}{m\_i\_strides}}[nocontract\_idx]\ *\ eval\_left\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ dim\_idx++;}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ nocontract\_idx++;}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00532\ \ \ \ \ \}}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00534\ \ \ \ \ nocontract\_idx\ =\ 0;}
\DoxyCodeLine{00535\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a52d2c4312b5e4a85aeca82caccd3f7e4}{RDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ contracting\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \textcolor{comment}{//\ find\ if\ we\ are\ contracting\ on\ index\ i\ of\ right\ tensor}}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}};\ j++)\ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (eval\_op\_indices[j].second\ ==\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}})\ \{}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ contracting\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!contracting)\ \{}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aceac18282cc5f1613de33195d1b2b26a}{m\_dimensions}}[dim\_idx]\ =\ eval\_right\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nocontract\_idx+1\ <\ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<right\_nocontract\_t>::value}})\ \{}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a48dd20851a2b8b56162802665a3cc19d}{m\_j\_strides}}[nocontract\_idx+1]\ =}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a48dd20851a2b8b56162802665a3cc19d}{m\_j\_strides}}[nocontract\_idx]\ *\ eval\_right\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9cd116ffd403b081d33bea8cc2e45067}{m\_j\_size}}\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a48dd20851a2b8b56162802665a3cc19d}{m\_j\_strides}}[nocontract\_idx]\ *\ eval\_right\_dims[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a4e18dce7e14206da9b3f6229c491236e}{m\_right\_nocontract\_strides}}[nocontract\_idx]\ =\ rhs\_strides[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}];}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ dim\_idx++;}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ nocontract\_idx++;}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00556\ \ \ \ \ \}}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00558\ \ \ \ \ \textcolor{comment}{//\ Now\ compute\ the\ strides\ corresponding\ to\ the\ contracting\ dimensions.\ We}}
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{comment}{//\ assumed\ above\ that\ non-\/contracting\ axes\ are\ represented\ in\ the\ same\ order}}
\DoxyCodeLine{00560\ \ \ \ \ \textcolor{comment}{//\ in\ the\ matrix\ as\ they\ are\ in\ the\ tensor.\ This\ is\ not\ the\ case\ for}}
\DoxyCodeLine{00561\ \ \ \ \ \textcolor{comment}{//\ contracting\ axes.\ As\ the\ contracting\ axes\ must\ be\ of\ the\ same\ size\ in}}
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{comment}{//\ each\ tensor,\ we'll\ only\ look\ at\ the\ first\ tensor\ here.}}
\DoxyCodeLine{00563\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87e491dfe09186b80343fb4367658730}{m\_rhs\_inner\_dim\_contiguous}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00564\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a80ff521ba2ceac9dabf4f7443934c729}{m\_rhs\_inner\_dim\_reordered}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00565\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aacbd2b91f62c767296e8020478807f27}{ContractDims}};\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++)\ \{}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ left\ =\ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].first;}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ right\ =\ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}].second;}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc_8cc_aad9b71a31372d5c0ab9c23163efe9544}{size}}\ =\ eval\_left\_dims[left];}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(\mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc_8cc_aad9b71a31372d5c0ab9c23163efe9544}{size}}\ ==\ eval\_right\_dims[right]\ \&\&}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Contraction\ axes\ must\ be\ same\ size"{}});}
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00573\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}+1\ <\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<contract\_t>::value}}))\ \{}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}}[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}+1]\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}}[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ *\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc_8cc_aad9b71a31372d5c0ab9c23163efe9544}{size}};}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ab37182c2e62a75719c378c068b0b7eb1}{m\_k\_size}}\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}}[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ *\ \mbox{\hyperlink{abseil-cpp_2absl_2base_2internal_2low__level__alloc_8cc_aad9b71a31372d5c0ab9c23163efe9544}{size}};}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a8a5452f28c1356a1e065d1446e31faaf}{m\_left\_contracting\_strides}}[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ =\ lhs\_strides[left];}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a576ad81df3886a58735f82c8431a7569}{m\_right\_contracting\_strides}}[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}]\ =\ rhs\_strides[right];}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00581\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ >\ 0\ \&\&\ right\ <\ eval\_op\_indices[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}-\/1].second)\ \{}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a80ff521ba2ceac9dabf4f7443934c729}{m\_rhs\_inner\_dim\_reordered}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (right\ !=\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}})\ \{}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87e491dfe09186b80343fb4367658730}{m\_rhs\_inner\_dim\_contiguous}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00587\ \ \ \ \ \}}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \ \ \ \ \textcolor{comment}{//\ If\ the\ layout\ is\ RowMajor,\ we\ need\ to\ reverse\ the\ m\_dimensions}}
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba0f89d9335343c299e5fde7362d71eb23}{Layout}})\ ==\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor}}))\ \{}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ =\ 0,\ j\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a8f5be3cf2f40fe66b52a16135a9102ea}{NumDims}}\ -\/\ 1;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}\ <\ j;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}++,\ j-\/-\/)\ \{}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceEigen_1_1numext_a3b617b6220683f86218071c40c41d381}{numext::swap}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aceac18282cc5f1613de33195d1b2b26a}{m\_dimensions}}[\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__benchmark_8cc_a717c50cfde3924051c279a89096afd3d}{i}}],\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aceac18282cc5f1613de33195d1b2b26a}{m\_dimensions}}[j]);}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00594\ \ \ \ \ \}}
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00596\ \ \ \ \ \textcolor{comment}{//\ A\ set\ of\ parameters\ that\ will\ allow\ output\ kernel\ to\ get\ from\ output}}
\DoxyCodeLine{00597\ \ \ \ \ \textcolor{comment}{//\ tensor\ dimensions\ (i,\ j)\ into\ the\ original\ tensor\ dimensions.}}
\DoxyCodeLine{00598\ \ \ \ \ \textcolor{comment}{//\ TODO(ezhulenev):\ Add\ parameters\ required\ to\ infer\ output\ tensor\ index\ for}}
\DoxyCodeLine{00599\ \ \ \ \ \textcolor{comment}{//\ more\ complex\ contractions\ than\ 2x2\ on\ internal\ dimension.}}
\DoxyCodeLine{00600\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac560cfe4ea45eddd62f29c0279a1e581}{m\_tensor\_contraction\_params}}.\mbox{\hyperlink{structEigen_1_1TensorContractionParams_aeba06ed59eedf7675950921d2313f0f7}{swapped\_arguments}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a754b3b2c2ba4439fc397828e2cd9ca2ba0f89d9335343c299e5fde7362d71eb23}{Layout}})\ ==\ \mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13acfcde9cd8677c5f7caf6bd603666aae3}{RowMajor}};}
\DoxyCodeLine{00601\ \ \ \}}
\DoxyCodeLine{00602\ }
\DoxyCodeLine{00603\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1DSizes}{Dimensions}}\&\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a4e8bc24559a1f4454c195a39af013740}{dimensions}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aceac18282cc5f1613de33195d1b2b26a}{m\_dimensions}};\ \}}
\DoxyCodeLine{00604\ }
\DoxyCodeLine{00605\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a8b6b446c994537fde441af15967d0514}{evalSubExprsIfNeeded}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7c57e47d657c3ea3baa111f6434cd041}{EvaluatorPointerType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_af050640abad26e623a6f6fbb346bbaef}{data}})\ \{}
\DoxyCodeLine{00606\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}}.\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a0fcd215ee81860d68da5c5c14e2d5b94}{evalSubExprsIfNeeded}}(NULL);}
\DoxyCodeLine{00607\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}}.\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a0fcd215ee81860d68da5c5c14e2d5b94}{evalSubExprsIfNeeded}}(NULL);}
\DoxyCodeLine{00608\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_af050640abad26e623a6f6fbb346bbaef}{data}})\ \{}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9ac0a3d010ff6a0b6b2512dfc0ea75aa}{evalTo}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_af050640abad26e623a6f6fbb346bbaef}{data}});}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00611\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7c57e47d657c3ea3baa111f6434cd041}{EvaluatorPointerType}}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}}.allocate(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a4e8bc24559a1f4454c195a39af013740}{dimensions}}().TotalSize()\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}})));}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9ac0a3d010ff6a0b6b2512dfc0ea75aa}{evalTo}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}});}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00615\ \ \ \ \ \}}
\DoxyCodeLine{00616\ \ \ \}}
\DoxyCodeLine{00617\ }
\DoxyCodeLine{00618\ \textcolor{preprocessor}{\#ifdef\ EIGEN\_USE\_THREADS}}
\DoxyCodeLine{00619\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ EvalSubExprsCallback>}
\DoxyCodeLine{00620\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}\ evalSubExprsIfNeededAsync(}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7c57e47d657c3ea3baa111f6434cd041}{EvaluatorPointerType}}\ dest,\ EvalSubExprsCallback\ done)\ \{}
\DoxyCodeLine{00622\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}}.evalSubExprsIfNeededAsync(\textcolor{keyword}{nullptr},\ [\textcolor{keyword}{this},\ done,\ dest](\textcolor{keywordtype}{bool})\ \{}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}}.evalSubExprsIfNeededAsync(\textcolor{keyword}{nullptr},\ [\textcolor{keyword}{this},\ done,\ dest](\textcolor{keywordtype}{bool})\ \{}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dest)\ \{}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ evalToAsync(dest,\ [done]()\ \{\ done(\textcolor{keyword}{false});\ \});}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7c57e47d657c3ea3baa111f6434cd041}{EvaluatorPointerType}}\textcolor{keyword}{>}(}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}}.allocate(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a4e8bc24559a1f4454c195a39af013740}{dimensions}}().TotalSize()\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}})));}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \ \ evalToAsync(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}},\ [done]()\ \{\ done(\textcolor{keyword}{true});\ \});}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \});}
\DoxyCodeLine{00632\ \ \ \ \ \});}
\DoxyCodeLine{00633\ \ \ \}}
\DoxyCodeLine{00634\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ EIGEN\_USE\_THREADS}}
\DoxyCodeLine{00635\ }
\DoxyCodeLine{00636\ \textcolor{preprocessor}{\#ifndef\ TENSOR\_CONTRACTION\_DISPATCH}}
\DoxyCodeLine{00637\ \textcolor{preprocessor}{\#define\ TENSOR\_CONTRACTION\_DISPATCH(METHOD,\ ALIGNMENT,\ ARGS)\ \(\backslash\)}}
\DoxyCodeLine{00638\ \textcolor{preprocessor}{\ \ if\ (this-\/>m\_lhs\_inner\_dim\_contiguous)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00639\ \textcolor{preprocessor}{\ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_contiguous)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00640\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_reordered)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00641\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ METHOD<true,\ true,\ true,\ ALIGNMENT>\ ARGS;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00642\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00643\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ METHOD<true,\ true,\ false,\ ALIGNMENT>\ ARGS;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00644\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00645\ \textcolor{preprocessor}{\ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00646\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_reordered)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00647\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ METHOD<true,\ false,\ true,\ ALIGNMENT>\ ARGS;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00648\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00649\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ METHOD<true,\ false,\ false,\ ALIGNMENT>\ ARGS;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00650\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00651\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00652\ \textcolor{preprocessor}{\ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00653\ \textcolor{preprocessor}{\ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_contiguous)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00654\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_reordered)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00655\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ METHOD<false,\ true,\ true,\ ALIGNMENT>\ ARGS;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00656\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00657\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ METHOD<false,\ true,\ false,\ ALIGNMENT>\ ARGS;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00658\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00659\ \textcolor{preprocessor}{\ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00660\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_reordered)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00661\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ METHOD<false,\ false,\ true,\ ALIGNMENT>\ ARGS;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00662\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00663\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ METHOD<false,\ false,\ false,\ ALIGNMENT>\ ARGS;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00664\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00665\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00666\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{00667\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00668\ }
\DoxyCodeLine{00669\ \textcolor{preprocessor}{\#ifndef\ TENSOR\_CONTRACTION\_ASYNC\_DISPATCH}}
\DoxyCodeLine{00670\ \textcolor{preprocessor}{\#define\ TENSOR\_CONTRACTION\_ASYNC\_DISPATCH(METHOD,\ DONE,\ ALIGNMENT,\ ARGS,\ FN)\ \(\backslash\)}}
\DoxyCodeLine{00671\ \textcolor{preprocessor}{\ \ if\ (this-\/>m\_lhs\_inner\_dim\_contiguous)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00672\ \textcolor{preprocessor}{\ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_contiguous)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00673\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_reordered)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00674\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (new\ METHOD<DONE,\ true,\ true,\ true,\ ALIGNMENT>\ ARGS)-\/>FN;\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00675\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00676\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (new\ METHOD<DONE,\ true,\ true,\ false,\ ALIGNMENT>\ ARGS)-\/>FN;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00677\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00678\ \textcolor{preprocessor}{\ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00679\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_reordered)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00680\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (new\ METHOD<DONE,\ true,\ false,\ true,\ ALIGNMENT>\ ARGS)-\/>FN;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00681\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00682\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (new\ METHOD<DONE,\ true,\ false,\ false,\ ALIGNMENT>\ ARGS)-\/>FN;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00683\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00684\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00685\ \textcolor{preprocessor}{\ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00686\ \textcolor{preprocessor}{\ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_contiguous)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00687\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_reordered)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00688\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (new\ METHOD<DONE,\ false,\ true,\ true,\ ALIGNMENT>\ ARGS)-\/>FN;\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00689\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00690\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (new\ METHOD<DONE,\ false,\ true,\ false,\ ALIGNMENT>\ ARGS)-\/>FN;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00691\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00692\ \textcolor{preprocessor}{\ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00693\ \textcolor{preprocessor}{\ \ \ \ \ \ if\ (this-\/>m\_rhs\_inner\_dim\_reordered)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00694\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (new\ METHOD<DONE,\ false,\ false,\ true,\ ALIGNMENT>\ ARGS)-\/>FN;\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00695\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00696\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ (new\ METHOD<DONE,\ false,\ false,\ false,\ ALIGNMENT>\ ARGS)-\/>FN;\ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00697\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00698\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00699\ \textcolor{preprocessor}{\ \ \}}}
\DoxyCodeLine{00700\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00701\ }
\DoxyCodeLine{00702\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9ac0a3d010ff6a0b6b2512dfc0ea75aa}{evalTo}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}*\ buffer)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00703\ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Derived*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>\textcolor{keyword}{template}\ evalProduct<Unaligned>(buffer);}
\DoxyCodeLine{00704\ \ \ \}}
\DoxyCodeLine{00705\ }
\DoxyCodeLine{00706\ \textcolor{preprocessor}{\#ifdef\ EIGEN\_USE\_THREADS}}
\DoxyCodeLine{00707\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ EvalToCallback>}
\DoxyCodeLine{00708\ \ \ \textcolor{keywordtype}{void}\ evalToAsync(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}*\ buffer,\ EvalToCallback\ done)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00709\ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Derived*\textcolor{keyword}{>}(\textcolor{keyword}{this})}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ -\/>\textcolor{keyword}{template}\ evalProductAsync<EvalToCallback,\ Unaligned>(buffer,}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::move(done));}
\DoxyCodeLine{00712\ \ \ \}}
\DoxyCodeLine{00713\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{//\ EIGEN\_USE\_THREADS}}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00715\ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ lhs\_inner\_dim\_contiguous,\ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_reordered,\ \textcolor{keywordtype}{int}\ Alignment>}
\DoxyCodeLine{00717\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac2a141c26b4403c4ecdc4d1de83d8df1}{evalProductSequential}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}*\ buffer)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00718\ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9cd116ffd403b081d33bea8cc2e45067}{m\_j\_size}}\ ==\ 1)\ \{}
\DoxyCodeLine{00719\ \ \ \ \ \ \ this-\/>\textcolor{keyword}{template}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72cf4fd8e6ba21d8048818993ac8c945}{evalGemv}}<lhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_contiguous,\ rhs\_inner\_dim\_reordered,}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Alignment>(buffer);}
\DoxyCodeLine{00722\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00723\ \ \ \ \ \ \ this-\/>\textcolor{keyword}{template}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aee0cb093c9876554ac9fecd6a96d4d87}{evalGemm}}<lhs\_inner\_dim\_contiguous,\ rhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_reordered,\ Alignment>(buffer);}
\DoxyCodeLine{00725\ \ \ \ \ \}}
\DoxyCodeLine{00726\ \ \ \}}
\DoxyCodeLine{00727\ }
\DoxyCodeLine{00728\ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ lhs\_inner\_dim\_contiguous,\ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_contiguous,\ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_reordered,\ \textcolor{keywordtype}{int}\ Alignment>}
\DoxyCodeLine{00729\ \textcolor{preprocessor}{\ \ \#if\ !defined(EIGEN\_HIPCC)}}
\DoxyCodeLine{00730\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}}
\DoxyCodeLine{00731\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00732\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72cf4fd8e6ba21d8048818993ac8c945}{evalGemv}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}*\ buffer)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00733\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ rows\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a18bbbed712ad56716c2684aa31e9552d}{m\_i\_size}};}
\DoxyCodeLine{00734\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ cols\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ab37182c2e62a75719c378c068b0b7eb1}{m\_k\_size}};}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename\ EvalLeftArgType::Scalar>::type}}\ LhsScalar;}
\DoxyCodeLine{00737\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename\ EvalRightArgType::Scalar>::type}}\ RhsScalar;}
\DoxyCodeLine{00738\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<EvalLeftArgType,\ Device>}}\ LeftEvaluator;}
\DoxyCodeLine{00739\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<EvalRightArgType,\ Device>}}\ RightEvaluator;}
\DoxyCodeLine{00740\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ lhs\_packet\_size\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1unpacket__traits}{internal::unpacket\_traits<typename\ LeftEvaluator::PacketReturnType>::size}};}
\DoxyCodeLine{00741\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ rhs\_packet\_size\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1unpacket__traits}{internal::unpacket\_traits<typename\ RightEvaluator::PacketReturnType>::size}};}
\DoxyCodeLine{00742\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ lhs\_alignment\ =\ LeftEvaluator::IsAligned\ ?\ \mbox{\hyperlink{group__enums_gga45fe06e29902b7a2773de05ba27b47a1ad37d4c71425bb286e9b4103830538fbf}{Aligned}}\ :\ \mbox{\hyperlink{group__enums_gga45fe06e29902b7a2773de05ba27b47a1ac935220b4c844108e183ebe30a4d5204}{Unaligned}};}
\DoxyCodeLine{00743\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ rhs\_alignment\ =\ RightEvaluator::IsAligned\ ?\ \mbox{\hyperlink{group__enums_gga45fe06e29902b7a2773de05ba27b47a1ad37d4c71425bb286e9b4103830538fbf}{Aligned}}\ :\ \mbox{\hyperlink{group__enums_gga45fe06e29902b7a2773de05ba27b47a1ac935220b4c844108e183ebe30a4d5204}{Unaligned}};}
\DoxyCodeLine{00744\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1internal_1_1TensorContractionInputMapper}{internal::TensorContractionInputMapper}}<LhsScalar,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}},\ \mbox{\hyperlink{namespaceEigen_1_1internal_aa085ebbff5643578b80dd9f8fcb8d77da70822e454a6eb37b1dd2a2aaa94342c2}{internal::Lhs}},}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LeftEvaluator,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9e391308bdea7a18b410610d7ed1e182}{left\_nocontract\_t}},}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2042dba29fd9197c9cb84fceb2afd0dc}{contract\_t}},\ lhs\_packet\_size,}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{false},\ lhs\_alignment>\ LhsMapper;}
\DoxyCodeLine{00749\ }
\DoxyCodeLine{00750\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1internal_1_1TensorContractionInputMapper}{internal::TensorContractionInputMapper}}<RhsScalar,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}},\ \mbox{\hyperlink{namespaceEigen_1_1internal_aa085ebbff5643578b80dd9f8fcb8d77dabc0d1bfef81f2d7b444c8658bc523042}{internal::Rhs}},}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ RightEvaluator,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a55b95898171447d29004dab80e95f84f}{right\_nocontract\_t}},}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2042dba29fd9197c9cb84fceb2afd0dc}{contract\_t}},\ rhs\_packet\_size,}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_reordered,\ rhs\_alignment>\ RhsMapper;}
\DoxyCodeLine{00755\ }
\DoxyCodeLine{00756\ \ \ \ \ LhsMapper\ lhs(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6467d3a59f2812726b6ba65ad4e69993}{m\_left\_nocontract\_strides}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_afd3e8052eb4e52616015be32ab25936a}{m\_i\_strides}},}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a8a5452f28c1356a1e065d1446e31faaf}{m\_left\_contracting\_strides}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}});}
\DoxyCodeLine{00758\ \ \ \ \ RhsMapper\ rhs(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a4e18dce7e14206da9b3f6229c491236e}{m\_right\_nocontract\_strides}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a48dd20851a2b8b56162802665a3cc19d}{m\_j\_strides}},}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a576ad81df3886a58735f82c8431a7569}{m\_right\_contracting\_strides}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}});}
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}\ alpha(1);}
\DoxyCodeLine{00762\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ resIncr(1);}
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00764\ \ \ \ \ \textcolor{comment}{//\ zero\ out\ the\ result\ buffer\ (which\ must\ be\ of\ size\ at\ least\ rows\ *\ sizeof(Scalar)}}
\DoxyCodeLine{00765\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}}.memset(buffer,\ 0,\ rows\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}));}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00767\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1general__matrix__vector__product}{internal::general\_matrix\_vector\_product<Index,LhsScalar,LhsMapper,ColMajor,false,RhsScalar,RhsMapper,false>::run}}(}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ rows,\ cols,\ lhs,\ rhs,}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ buffer,\ resIncr,\ alpha);}
\DoxyCodeLine{00770\ }
\DoxyCodeLine{00771\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1internal_1_1blas__data__mapper}{internal::blas\_data\_mapper<Scalar,\ Index,\ ColMajor>}}\ OutputMapper;}
\DoxyCodeLine{00772\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac33eecd270a0844f7e605bd438603077}{m\_output\_kernel}}(OutputMapper(buffer,\ rows),\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac560cfe4ea45eddd62f29c0279a1e581}{m\_tensor\_contraction\_params}},}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\textcolor{keyword}{>}(0),\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\textcolor{keyword}{>}(0),\ rows,}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\textcolor{keyword}{>}(1));}
\DoxyCodeLine{00775\ \ \ \}}
\DoxyCodeLine{00776\ }
\DoxyCodeLine{00777\ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ lhs\_inner\_dim\_contiguous,\ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_contiguous,\ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_reordered,\ \textcolor{keywordtype}{int}\ Alignment>}
\DoxyCodeLine{00778\ \textcolor{preprocessor}{\ \ \#if\ !defined(EIGEN\_HIPCC)}}
\DoxyCodeLine{00779\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}}
\DoxyCodeLine{00780\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00781\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aee0cb093c9876554ac9fecd6a96d4d87}{evalGemm}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}*\ buffer)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00782\ \ \ \ \ \textcolor{comment}{//\ columns\ in\ left\ side,\ rows\ in\ right\ side}}
\DoxyCodeLine{00783\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ k\ =\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ab37182c2e62a75719c378c068b0b7eb1}{m\_k\_size}};}
\DoxyCodeLine{00784\ \ \ \ \ this-\/>\textcolor{keyword}{template}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a89f62c92fa0c83b2267d48f8fb73bb5f}{evalGemmPartial}}<lhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_reordered,}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Alignment,\ \textcolor{keyword}{true}>(buffer,\ 0,\ k,\ 1);}
\DoxyCodeLine{00788\ \ \ \}}
\DoxyCodeLine{00789\ }
\DoxyCodeLine{00790\ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ lhs\_inner\_dim\_contiguous,\ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_reordered,\ \textcolor{keywordtype}{int}\ Alignment>}
\DoxyCodeLine{00792\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_af4fa01bffc73dfe8e164145d34dadbeb}{evalGemmPartialWithoutOutputKernel}}(}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}*\ buffer,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ k\_start,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ k\_end,\ \textcolor{keywordtype}{int}\ num\_threads)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00794\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a89f62c92fa0c83b2267d48f8fb73bb5f}{evalGemmPartial}}<lhs\_inner\_dim\_contiguous,\ rhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_reordered,\ Alignment,}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*use\_output\_kernel*/}\ \textcolor{keyword}{false}>(buffer,\ k\_start,\ k\_end,}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_threads);}
\DoxyCodeLine{00798\ \ \ \}}
\DoxyCodeLine{00799\ }
\DoxyCodeLine{00800\ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ lhs\_inner\_dim\_contiguous,\ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_contiguous,\ \textcolor{keywordtype}{bool}\ rhs\_inner\_dim\_reordered,\ \textcolor{keywordtype}{int}\ Alignment,\ \textcolor{keywordtype}{bool}\ use\_output\_kernel>}
\DoxyCodeLine{00801\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a89f62c92fa0c83b2267d48f8fb73bb5f}{evalGemmPartial}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}*\ buffer,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ k\_start,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ k\_end,\ \textcolor{keywordtype}{int}\ num\_threads)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00802\ \ \ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_acaa7ba89800cfe18d5fd6eed620aea9c}{eigen\_assert}}(k\_end\ >=\ k\_start\ \&\&\ k\_start\ >=\ 0\ \&\&\ k\_end\ <=\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ab37182c2e62a75719c378c068b0b7eb1}{m\_k\_size}});}
\DoxyCodeLine{00803\ \ \ \ \ \textcolor{comment}{//\ columns\ in\ slice\ on\ left\ side,\ rows\ on\ right\ side}}
\DoxyCodeLine{00804\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ k\_slice\ =\ k\_end\ -\/\ k\_start;}
\DoxyCodeLine{00805\ }
\DoxyCodeLine{00806\ \ \ \ \ \textcolor{comment}{//\ rows\ in\ left\ side}}
\DoxyCodeLine{00807\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ m\ =\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a18bbbed712ad56716c2684aa31e9552d}{m\_i\_size}};}
\DoxyCodeLine{00808\ }
\DoxyCodeLine{00809\ \ \ \ \ \textcolor{comment}{//\ columns\ in\ right\ side}}
\DoxyCodeLine{00810\ \ \ \ \ \textcolor{keyword}{const}\ Index\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}}\ =\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9cd116ffd403b081d33bea8cc2e45067}{m\_j\_size}};}
\DoxyCodeLine{00811\ }
\DoxyCodeLine{00812\ \ \ \ \ \textcolor{comment}{//\ define\ data\ mappers\ for\ Lhs\ and\ Rhs}}
\DoxyCodeLine{00813\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename\ EvalLeftArgType::Scalar>::type}}\ LhsScalar;}
\DoxyCodeLine{00814\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename\ EvalRightArgType::Scalar>::type}}\ RhsScalar;}
\DoxyCodeLine{00815\ }
\DoxyCodeLine{00816\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<EvalLeftArgType,\ Device>}}\ LeftEvaluator;}
\DoxyCodeLine{00817\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<EvalRightArgType,\ Device>}}\ RightEvaluator;}
\DoxyCodeLine{00818\ }
\DoxyCodeLine{00819\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ lhs\_packet\_size\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1unpacket__traits}{internal::unpacket\_traits<typename\ LeftEvaluator::PacketReturnType>::size}};}
\DoxyCodeLine{00820\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ rhs\_packet\_size\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1unpacket__traits}{internal::unpacket\_traits<typename\ RightEvaluator::PacketReturnType>::size}};}
\DoxyCodeLine{00821\ }
\DoxyCodeLine{00822\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1internal_1_1TensorContractionInputMapper}{internal::TensorContractionInputMapper}}<LhsScalar,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}},\ \mbox{\hyperlink{namespaceEigen_1_1internal_aa085ebbff5643578b80dd9f8fcb8d77da70822e454a6eb37b1dd2a2aaa94342c2}{internal::Lhs}},}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LeftEvaluator,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9e391308bdea7a18b410610d7ed1e182}{left\_nocontract\_t}},}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2042dba29fd9197c9cb84fceb2afd0dc}{contract\_t}},\ lhs\_packet\_size,}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{false},\ \mbox{\hyperlink{group__enums_gga45fe06e29902b7a2773de05ba27b47a1ac935220b4c844108e183ebe30a4d5204}{Unaligned}}>\ LhsMapper;}
\DoxyCodeLine{00827\ }
\DoxyCodeLine{00828\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1internal_1_1TensorContractionInputMapper}{internal::TensorContractionInputMapper}}<RhsScalar,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}},\ \mbox{\hyperlink{namespaceEigen_1_1internal_aa085ebbff5643578b80dd9f8fcb8d77dabc0d1bfef81f2d7b444c8658bc523042}{internal::Rhs}},}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ RightEvaluator,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a55b95898171447d29004dab80e95f84f}{right\_nocontract\_t}},}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2042dba29fd9197c9cb84fceb2afd0dc}{contract\_t}},\ rhs\_packet\_size,}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_contiguous,}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rhs\_inner\_dim\_reordered,\ \mbox{\hyperlink{group__enums_gga45fe06e29902b7a2773de05ba27b47a1ac935220b4c844108e183ebe30a4d5204}{Unaligned}}>\ RhsMapper;}
\DoxyCodeLine{00833\ }
\DoxyCodeLine{00834\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1internal_1_1blas__data__mapper}{internal::blas\_data\_mapper<Scalar,\ Index,\ ColMajor>}}\ OutputMapper;}
\DoxyCodeLine{00835\ }
\DoxyCodeLine{00836\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1internal_1_1TensorContractionKernel}{internal::TensorContractionKernel}}<}
\DoxyCodeLine{00837\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}},\ LhsScalar,\ RhsScalar,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}},\ OutputMapper,\ LhsMapper,\ RhsMapper>}
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ TensorContractionKernel;}
\DoxyCodeLine{00839\ }
\DoxyCodeLine{00840\ \ \ \ \ \textcolor{comment}{//\ initialize\ data\ mappers}}
\DoxyCodeLine{00841\ \ \ \ \ LhsMapper\ lhs(this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}},\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6467d3a59f2812726b6ba65ad4e69993}{m\_left\_nocontract\_strides}},\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_afd3e8052eb4e52616015be32ab25936a}{m\_i\_strides}},}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a8a5452f28c1356a1e065d1446e31faaf}{m\_left\_contracting\_strides}},\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}});}
\DoxyCodeLine{00843\ }
\DoxyCodeLine{00844\ \ \ \ \ RhsMapper\ rhs(this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}},\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a4e18dce7e14206da9b3f6229c491236e}{m\_right\_nocontract\_strides}},\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a48dd20851a2b8b56162802665a3cc19d}{m\_j\_strides}},}
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a576ad81df3886a58735f82c8431a7569}{m\_right\_contracting\_strides}},\ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}});}
\DoxyCodeLine{00846\ }
\DoxyCodeLine{00847\ \ \ \ \ OutputMapper\ output(buffer,\ m);}
\DoxyCodeLine{00848\ }
\DoxyCodeLine{00849\ \ \ \ \ \textcolor{comment}{//\ Sizes\ of\ the\ blocks\ to\ load\ in\ cache.\ See\ the\ Goto\ paper\ for\ details.}}
\DoxyCodeLine{00850\ \ \ \ \ \mbox{\hyperlink{classEigen_1_1internal_1_1TensorContractionBlocking}{internal::TensorContractionBlocking}}<\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}},\ LhsScalar,\ RhsScalar,}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}},\ \mbox{\hyperlink{namespaceEigen_1_1internal_ad1d0ed30fcc1b3845af992f97d279e0caa17bf5513d5b0e45bee5bb0b215b7641}{internal::ShardByCol}}>}
\DoxyCodeLine{00852\ \ \ \ \ \ \ \ \ blocking(k\_slice,\ m,\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}},\ num\_threads);}
\DoxyCodeLine{00853\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ kc\ =\ blocking.kc();}
\DoxyCodeLine{00854\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ mc\ =\ \mbox{\hyperlink{namespaceEigen_1_1numext_ab3b30bf0bcfa1ad91dbec75fabb3bea0}{numext::mini}}(m,\ blocking.mc());}
\DoxyCodeLine{00855\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ nc\ =\ \mbox{\hyperlink{namespaceEigen_1_1numext_ab3b30bf0bcfa1ad91dbec75fabb3bea0}{numext::mini}}(\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}},\ blocking.nc());}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ TensorContractionKernel::LhsBlock\ LhsBlock;}
\DoxyCodeLine{00858\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ TensorContractionKernel::RhsBlock\ RhsBlock;}
\DoxyCodeLine{00859\ }
\DoxyCodeLine{00860\ \ \ \ \ LhsBlock\ blockA;}
\DoxyCodeLine{00861\ \ \ \ \ RhsBlock\ blockB;}
\DoxyCodeLine{00862\ }
\DoxyCodeLine{00863\ \ \ \ \ TensorContractionKernel\ kernel(m,\ k\_slice,\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}},\ mc,\ kc,\ nc);}
\DoxyCodeLine{00864\ }
\DoxyCodeLine{00865\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ TensorContractionKernel::BlockMemHandle\ BlockMemHandle;}
\DoxyCodeLine{00866\ \ \ \ \ \textcolor{keyword}{const}\ BlockMemHandle\ packed\_mem\ =}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ kernel.allocate(this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}},\ \&blockA,\ \&blockB);}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ \ \ \textcolor{comment}{//\ If\ a\ contraction\ kernel\ does\ not\ support\ beta,\ explicitly\ initialize}}
\DoxyCodeLine{00870\ \ \ \ \ \textcolor{comment}{//\ output\ buffer\ with\ zeroes.}}
\DoxyCodeLine{00871\ \ \ \ \ \textcolor{keywordflow}{if}\ (!TensorContractionKernel::HasBeta)\ \{}
\DoxyCodeLine{00872\ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}}.memset(buffer,\ 0,\ m\ *\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}}\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}));}
\DoxyCodeLine{00873\ \ \ \ \ \}}
\DoxyCodeLine{00874\ }
\DoxyCodeLine{00875\ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a48d37c88961428889f8b283379ab961c}{i2}}=0;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a48d37c88961428889f8b283379ab961c}{i2}}<m;\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a48d37c88961428889f8b283379ab961c}{i2}}+=mc)}
\DoxyCodeLine{00876\ \ \ \ \ \{}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ actual\_mc\ =\ \mbox{\hyperlink{namespaceEigen_1_1numext_ab3b30bf0bcfa1ad91dbec75fabb3bea0}{numext::mini}}(\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a48d37c88961428889f8b283379ab961c}{i2}}+mc,m)-\/\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a48d37c88961428889f8b283379ab961c}{i2}};}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ k2\ =\ k\_start;\ k2\ <\ k\_end;\ k2\ +=\ kc)\ \{}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ make\ sure\ we\ don't\ overshoot\ right\ edge\ of\ left\ matrix,\ then\ pack\ vertical\ panel}}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ actual\_kc\ =\ \mbox{\hyperlink{namespaceEigen_1_1numext_ab3b30bf0bcfa1ad91dbec75fabb3bea0}{numext::mini}}(k2\ +\ kc,\ k\_end)\ -\/\ k2;}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ kernel.packLhs(\&blockA,\ lhs.getSubMapper(\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a48d37c88961428889f8b283379ab961c}{i2}},\ k2),\ actual\_kc,\ actual\_mc);}
\DoxyCodeLine{00882\ }
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ kernel\ supports\ beta,\ there\ is\ no\ need\ to\ initialize\ output}}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ buffer\ with\ zeroes.}}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}\ alpha\ =\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}(1);}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}\ beta\ =\ (TensorContractionKernel::HasBeta\ \&\&\ k2\ ==\ k\_start)}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}(0)}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a2b45472f14e048715b18b9af5e88f65e}{Scalar}}(1);}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ series\ of\ horizontal\ blocks}}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ j2\ =\ 0;\ j2\ <\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}};\ j2\ +=\ nc)\ \{}
\DoxyCodeLine{00892\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ make\ sure\ we\ don't\ overshoot\ right\ edge\ of\ right\ matrix,\ then\ pack\ block}}
\DoxyCodeLine{00893\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ actual\_nc\ =\ \mbox{\hyperlink{namespaceEigen_1_1numext_ab3b30bf0bcfa1ad91dbec75fabb3bea0}{numext::mini}}(j2\ +\ nc,\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a76f11d9a0a47b94f72c2d0e77fb32240}{n}})\ -\/\ j2;}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \ \ kernel.packRhs(\&blockB,\ rhs.getSubMapper(k2,\ j2),\ actual\_kc,}
\DoxyCodeLine{00895\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ actual\_nc);}
\DoxyCodeLine{00896\ }
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ call\ gebp\ (matrix\ kernel)}}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ parameters\ here\ are\ copied\ from\ Eigen's\ GEMM\ implementation}}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ OutputMapper\ output\_mapper\ =\ output.getSubMapper(\mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a48d37c88961428889f8b283379ab961c}{i2}},\ j2);}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \ \ \ \ kernel.invoke(output\_mapper,\ blockA,\ blockB,\ actual\_mc,\ actual\_kc,}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ actual\_nc,\ alpha,\ beta);}
\DoxyCodeLine{00902\ }
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ are\ done\ with\ this\ [i2,\ j2]\ output\ block.}}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (use\_output\_kernel\ \&\&\ k2\ +\ kc\ >=\ k\_end)\ \{}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac33eecd270a0844f7e605bd438603077}{m\_output\_kernel}}(output\_mapper,\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac560cfe4ea45eddd62f29c0279a1e581}{m\_tensor\_contraction\_params}},\ \mbox{\hyperlink{abseil-cpp_2absl_2container_2btree__test_8cc_a48d37c88961428889f8b283379ab961c}{i2}},\ j2,}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ actual\_mc,\ actual\_nc);}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00910\ \ \ \ \ \}}
\DoxyCodeLine{00911\ }
\DoxyCodeLine{00912\ \ \ \ \ kernel.deallocate(this-\/>\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}},\ packed\_mem);}
\DoxyCodeLine{00913\ \ \ \}}
\DoxyCodeLine{00914\ }
\DoxyCodeLine{00915\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a142e23450acbd0812387c6abff283f39}{cleanup}}()\ \{}
\DoxyCodeLine{00916\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}}.\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a77d1ef701d1651a0d47c9ae2083acc49}{cleanup}}();}
\DoxyCodeLine{00917\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}}.\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a77d1ef701d1651a0d47c9ae2083acc49}{cleanup}}();}
\DoxyCodeLine{00918\ }
\DoxyCodeLine{00919\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}}\ !=\ NULL)\ \{}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}}.deallocate(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}});}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}}\ =\ NULL;}
\DoxyCodeLine{00922\ \ \ \ \ \}}
\DoxyCodeLine{00923\ \ \ \}}
\DoxyCodeLine{00924\ }
\DoxyCodeLine{00925\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a03e212da1d23eb224d3b92b81ad16c22}{CoeffReturnType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_af35dc8f04e25238ed04628398d1adc53}{coeff}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00926\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}}[index];}
\DoxyCodeLine{00927\ \ \ \}}
\DoxyCodeLine{00928\ }
\DoxyCodeLine{00929\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \mbox{\hyperlink{classEigen_1_1TensorOpCost}{TensorOpCost}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ad0f21541238d3add97d114afb6859b0f}{costPerCoeff}}(\textcolor{keywordtype}{bool})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00930\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classEigen_1_1TensorOpCost}{TensorOpCost}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a03e212da1d23eb224d3b92b81ad16c22}{CoeffReturnType}}),\ 0,\ 0);}
\DoxyCodeLine{00931\ \ \ \}}
\DoxyCodeLine{00932\ }
\DoxyCodeLine{00933\ \ \ \textcolor{keyword}{template}<\textcolor{keywordtype}{int}\ LoadMode>}
\DoxyCodeLine{00934\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a3e2f8aab3fc497f121813ebb004b9fb0}{PacketReturnType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a430b83d71a67ba792130b8d36c049a9f}{packet}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00935\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceEigen_1_1internal_a100dabe02b9d7dafb1a39d7d4dbbdd4a}{internal::ploadt<PacketReturnType,\ LoadMode>}}(\mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}}\ +\ index);}
\DoxyCodeLine{00936\ \ \ \}}
\DoxyCodeLine{00937\ }
\DoxyCodeLine{00938\ \ \ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_a9efec3cfd22b9a33bead9c6718d128da}{EIGEN\_DEVICE\_FUNC}}\ \mbox{\hyperlink{eigen_2Eigen_2src_2Core_2util_2Macros_8h_af2b60117c00a6e75812de43bfe7db3b1}{EIGEN\_STRONG\_INLINE}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7c57e47d657c3ea3baa111f6434cd041}{EvaluatorPointerType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_af050640abad26e623a6f6fbb346bbaef}{data}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}};\ \}}
\DoxyCodeLine{00939\ }
\DoxyCodeLine{00940\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00941\ \ \ \mbox{\hyperlink{structEigen_1_1DSizes}{Dimensions}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aceac18282cc5f1613de33195d1b2b26a}{m\_dimensions}};}
\DoxyCodeLine{00942\ }
\DoxyCodeLine{00943\ \ \ \mbox{\hyperlink{classEigen_1_1array}{contract\_t}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aeff23a8341ce58a417d6ea903d873597}{m\_k\_strides}};}
\DoxyCodeLine{00944\ \ \ \mbox{\hyperlink{classEigen_1_1array}{contract\_t}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a8a5452f28c1356a1e065d1446e31faaf}{m\_left\_contracting\_strides}};}
\DoxyCodeLine{00945\ \ \ \mbox{\hyperlink{classEigen_1_1array}{contract\_t}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a576ad81df3886a58735f82c8431a7569}{m\_right\_contracting\_strides}};}
\DoxyCodeLine{00946\ }
\DoxyCodeLine{00947\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_acd796b4ae4e27f678d424091074e2871}{m\_lhs\_inner\_dim\_contiguous}};}
\DoxyCodeLine{00948\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a87e491dfe09186b80343fb4367658730}{m\_rhs\_inner\_dim\_contiguous}};}
\DoxyCodeLine{00949\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a80ff521ba2ceac9dabf4f7443934c729}{m\_rhs\_inner\_dim\_reordered}};}
\DoxyCodeLine{00950\ }
\DoxyCodeLine{00951\ \ \ \mbox{\hyperlink{classEigen_1_1array}{left\_nocontract\_t}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_afd3e8052eb4e52616015be32ab25936a}{m\_i\_strides}};}
\DoxyCodeLine{00952\ \ \ \mbox{\hyperlink{classEigen_1_1array}{right\_nocontract\_t}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a48dd20851a2b8b56162802665a3cc19d}{m\_j\_strides}};}
\DoxyCodeLine{00953\ \ \ \mbox{\hyperlink{classEigen_1_1array}{left\_nocontract\_t}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6467d3a59f2812726b6ba65ad4e69993}{m\_left\_nocontract\_strides}};}
\DoxyCodeLine{00954\ \ \ \mbox{\hyperlink{classEigen_1_1array}{right\_nocontract\_t}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a4e18dce7e14206da9b3f6229c491236e}{m\_right\_nocontract\_strides}};}
\DoxyCodeLine{00955\ }
\DoxyCodeLine{00956\ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a18bbbed712ad56716c2684aa31e9552d}{m\_i\_size}};}
\DoxyCodeLine{00957\ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a9cd116ffd403b081d33bea8cc2e45067}{m\_j\_size}};}
\DoxyCodeLine{00958\ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a79df006e2a7b5edd3e71382016865362}{Index}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ab37182c2e62a75719c378c068b0b7eb1}{m\_k\_size}};}
\DoxyCodeLine{00959\ }
\DoxyCodeLine{00960\ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionParams}{TensorContractionParams}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac560cfe4ea45eddd62f29c0279a1e581}{m\_tensor\_contraction\_params}};}
\DoxyCodeLine{00961\ }
\DoxyCodeLine{00962\ \ \ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<EvalLeftArgType,\ Device>}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7137ce95031d1d30133b70e508303549}{m\_leftImpl}};}
\DoxyCodeLine{00963\ \ \ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<EvalRightArgType,\ Device>}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a72116b5d9e9cfd742228f8487b912534}{m\_rightImpl}};}
\DoxyCodeLine{00964\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a03c60e16e497b5e67b67ed9b4e2964f2}{Device}}\ \mbox{\hyperlink{eigen_2unsupported_2Eigen_2CXX11_2src_2Tensor_2TensorMacros_8h_ab1d48616b1c0fcce6dc3f01cad41b1d8}{EIGEN\_DEVICE\_REF}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a582c887fd74416f08ae33218b889e5c2}{m\_device}};}
\DoxyCodeLine{00965\ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ab2d1d5cd018af9795d4ac65dec4ea949}{OutputKernelType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_ac33eecd270a0844f7e605bd438603077}{m\_output\_kernel}};}
\DoxyCodeLine{00966\ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a7c57e47d657c3ea3baa111f6434cd041}{EvaluatorPointerType}}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ef1143be09089c851e4a78fb2fe856d}{m\_result}};}
\DoxyCodeLine{00967\ \};}
\DoxyCodeLine{00968\ }
\DoxyCodeLine{00969\ }
\DoxyCodeLine{00970\ \textcolor{comment}{//\ evaluator\ for\ default\ device}}
\DoxyCodeLine{00971\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Indices,\ \textcolor{keyword}{typename}\ LeftArgType,\ \textcolor{keyword}{typename}\ RightArgType,\ \textcolor{keyword}{typename}\ OutputKernelType,\ \textcolor{keyword}{typename}\ Device>}
\DoxyCodeLine{00972\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator}}<const\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp}}<Indices,\ LeftArgType,\ RightArgType,\ OutputKernelType>,\ Device>\ :}
\DoxyCodeLine{00973\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase}{TensorContractionEvaluatorBase}}<}
\DoxyCodeLine{00974\ \ \ \ \ \ \ TensorEvaluator<const\ TensorContractionOp<Indices,\ LeftArgType,\ RightArgType,\ OutputKernelType>,\ Device>\ >\ \{}
\DoxyCodeLine{00975\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<const\ TensorContractionOp<Indices,\ LeftArgType,\ RightArgType,\ OutputKernelType>}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a03c60e16e497b5e67b67ed9b4e2964f2}{Device}}>\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a30c1db4b383d1b57d05a13a22494efc7}{Self}};}
\DoxyCodeLine{00976\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase}{TensorContractionEvaluatorBase<Self>}}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a07b2e1d808d8835265bed6ab3af11b5e}{Base}};}
\DoxyCodeLine{00977\ }
\DoxyCodeLine{00978\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp}{TensorContractionOp<Indices,\ LeftArgType,\ RightArgType,\ OutputKernelType>}}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a41accbad24425e341d7e3b03d445fd25}{XprType}};}
\DoxyCodeLine{00979\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1remove__const_afe3dbb0bdee2ec8eed4416723d75bc90}{internal::remove\_const<typename\ XprType::Scalar>::type}}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a885925a16f55a843a3a25cd1145d7b6e}{Scalar}};}
\DoxyCodeLine{00980\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_af5f933c7895e092dfe920f5234d89b7e}{XprType::Index}}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a3e218f09db2b4682816c240d29620aef}{Index}};}
\DoxyCodeLine{00981\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp_a5ec0667934f84b6fd393fc84504be236}{XprType::CoeffReturnType}}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a7464372c50d782af88fc1b1317707c42}{CoeffReturnType}};}
\DoxyCodeLine{00982\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1PacketType_a1eeaa0a6cdf53f6f0fc3eebacf9590ec}{PacketType<CoeffReturnType,\ Device>::type}}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a98242637c2e1786f5998c18982f676ff}{PacketReturnType}};}
\DoxyCodeLine{00983\ }
\DoxyCodeLine{00984\ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00985\ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_ab5b731db71101dd0e4a8453fa43f9881aad2f498adfc79da8b4728669ac46f653}{Layout}}\ =\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator}{TensorEvaluator<LeftArgType,\ Device>::Layout}}}
\DoxyCodeLine{00986\ \ \ \};}
\DoxyCodeLine{00987\ }
\DoxyCodeLine{00988\ \ \ \textcolor{comment}{//\ Most\ of\ the\ code\ is\ assuming\ that\ both\ input\ tensors\ are\ ColMajor.\ If\ the}}
\DoxyCodeLine{00989\ \ \ \textcolor{comment}{//\ inputs\ are\ RowMajor,\ we\ will\ "{}cheat"{}\ by\ swapping\ the\ LHS\ and\ RHS:}}
\DoxyCodeLine{00990\ \ \ \textcolor{comment}{//\ If\ we\ want\ to\ compute\ A\ *\ B\ =\ C,\ where\ A\ is\ LHS\ and\ B\ is\ RHS,\ the\ code}}
\DoxyCodeLine{00991\ \ \ \textcolor{comment}{//\ will\ pretend\ B\ is\ LHS\ and\ A\ is\ RHS.}}
\DoxyCodeLine{00992\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1conditional}{internal::conditional}}<}
\DoxyCodeLine{00993\ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorEvaluator_ab5b731db71101dd0e4a8453fa43f9881aad2f498adfc79da8b4728669ac46f653}{Layout}})\ ==\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}}),\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aac321c7a2dd37af50cd8aa119eeb74a8}{LeftArgType}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ca341c4f488e5bf8c4250d2ae087412}{RightArgType}}>::type\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a66aa3f8b2e79a1cc4e756c953d2d918b}{EvalLeftArgType}};}
\DoxyCodeLine{00994\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1conditional}{internal::conditional}}<}
\DoxyCodeLine{00995\ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{structEigen_1_1TensorEvaluator_ab5b731db71101dd0e4a8453fa43f9881aad2f498adfc79da8b4728669ac46f653}{Layout}})\ ==\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0cbd4bdd0abcfc0224c5fcb5e4f6669a}{ColMajor}}),\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a6ca341c4f488e5bf8c4250d2ae087412}{RightArgType}},\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_aac321c7a2dd37af50cd8aa119eeb74a8}{LeftArgType}}>::type\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a9445a766260ce42a8e86e6f6549da612}{EvalRightArgType}};}
\DoxyCodeLine{00996\ }
\DoxyCodeLine{00997\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ LDims\ =}
\DoxyCodeLine{00998\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<typename\ TensorEvaluator<EvalLeftArgType,\ Device>::Dimensions}}>\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{::value}};}
\DoxyCodeLine{00999\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ RDims\ =}
\DoxyCodeLine{01000\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<typename\ TensorEvaluator<EvalRightArgType,\ Device>::Dimensions}}>\mbox{\hyperlink{abseil-cpp_2absl_2container_2flat__hash__map__test_8cc_a54c2bae0f8aeed048a397b0618037252}{::value}};}
\DoxyCodeLine{01001\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ ContractDims\ =\ \mbox{\hyperlink{structEigen_1_1internal_1_1array__size}{internal::array\_size<Indices>::value}};}
\DoxyCodeLine{01002\ }
\DoxyCodeLine{01003\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1array}{array<Index,\ ContractDims>}}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a3fbe7de89977ea68dd5dbcf6c52e9e59}{contract\_t}};}
\DoxyCodeLine{01004\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1array}{array}}<\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a932b320bc0d4f0c027d28f6f9918bbc6}{Index}},\ LDims\ -\/\ ContractDims>\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_af02d64ca49c12bac881a1cd729a07bf1}{left\_nocontract\_t}};}
\DoxyCodeLine{01005\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1array}{array}}<\mbox{\hyperlink{structEigen_1_1TensorEvaluator_a932b320bc0d4f0c027d28f6f9918bbc6}{Index}},\ RDims\ -\/\ ContractDims>\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_af763403a16222e5879ef8cac8e704bd5}{right\_nocontract\_t}};}
\DoxyCodeLine{01006\ }
\DoxyCodeLine{01007\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ NumDims\ =\ LDims\ +\ RDims\ -\/\ 2\ *\ ContractDims;}
\DoxyCodeLine{01008\ }
\DoxyCodeLine{01009\ \ \ \textcolor{comment}{//\ Could\ we\ use\ NumDimensions\ here?}}
\DoxyCodeLine{01010\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{structEigen_1_1DSizes}{DSizes<Index,\ NumDims>}}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_aa74d0ae4d148979066f7c31a3574469d}{Dimensions}};}
\DoxyCodeLine{01011\ }
\DoxyCodeLine{01012\ \ \ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a609c3bcbadef17dd4e78bb35d0ce8189}{TensorEvaluator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1TensorContractionOp}{XprType}}\&\ op,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase_a03c60e16e497b5e67b67ed9b4e2964f2}{Device}}\&\ device)\ :}
\DoxyCodeLine{01013\ \ \ \ \ \ \ \mbox{\hyperlink{structEigen_1_1TensorContractionEvaluatorBase}{Base}}(op,\ device)\ \{\ \}}
\DoxyCodeLine{01014\ }
\DoxyCodeLine{01015\ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ Alignment>}
\DoxyCodeLine{01016\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_aca5046570a28653eb6c8beefd1b4847a}{evalProduct}}(\mbox{\hyperlink{structEigen_1_1TensorEvaluator_3_01const_01TensorContractionOp_3_01Indices_00_01LeftArgType_00_05a9250aee1077eb80afa2a1f0af14346_a885925a16f55a843a3a25cd1145d7b6e}{Scalar}}*\ buffer)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{01017\ \ \ \ \ \mbox{\hyperlink{eigen_2unsupported_2Eigen_2CXX11_2src_2Tensor_2TensorContraction_8h_a125263decff215ec122bf5c17c7abd67}{TENSOR\_CONTRACTION\_DISPATCH}}(this-\/>\textcolor{keyword}{template}\ evalProductSequential,\ Alignment,\ (buffer));}
\DoxyCodeLine{01018\ \ \ \}}
\DoxyCodeLine{01019\ \};}
\DoxyCodeLine{01020\ }
\DoxyCodeLine{01021\ \}\ \textcolor{comment}{//\ end\ namespace\ Eigen}}
\DoxyCodeLine{01022\ }
\DoxyCodeLine{01023\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_CXX11\_TENSOR\_TENSOR\_CONTRACTION\_H}}

\end{DoxyCode}
